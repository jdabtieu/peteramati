{"version":3,"file":"pa.min.js","mappings":"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","sources":["webpack:///./scriptsrc/ui-autogrow.js","webpack:///webpack/bootstrap","webpack:///./scriptsrc/utils.js","webpack:///./scriptsrc/ui.js","webpack:///./scriptsrc/ui-key.js","webpack:///./scriptsrc/hoturl.js","webpack:///./scriptsrc/utils-errors.js","webpack:///./scriptsrc/ui-range.js","webpack:///./scriptsrc/xhr.js","webpack:///./scriptsrc/ui-sessionlist.js","webpack:///./scriptsrc/encoders.js","webpack:///./scriptsrc/tooltip.js","webpack:///./scriptsrc/pset.js","webpack:///./scriptsrc/diff.js","webpack:///./scriptsrc/markdown-minihtml.js","webpack:///./scriptsrc/diff-markdown.js","webpack:///./scriptsrc/render.js","webpack:///./scriptsrc/note.js","webpack:///./scriptsrc/gc.js","webpack:///./scriptsrc/gradeentry.js","webpack:///./scriptsrc/note-edit.js","webpack:///./scriptsrc/render-terminal.js","webpack:///./scriptsrc/grade-ui.js","webpack:///./scriptsrc/run.js","webpack:///./scriptsrc/run-settings.js","webpack:///./scriptsrc/svgpathutil.js","webpack:///./scriptsrc/ui-history.js","webpack:///./scriptsrc/intervalseq.js","webpack:///./scriptsrc/grgraph.js","webpack:///./scriptsrc/gradestats.js","webpack:///./scriptsrc/grgraph-ui.js","webpack:///./scriptsrc/grgraph-highlight.js","webpack:///./scriptsrc/gc-checkbox.js","webpack:///./scriptsrc/gc-letter.js","webpack:///./scriptsrc/gc-multicheckbox.js","webpack:///./scriptsrc/gc-markdown.js","webpack:///./scriptsrc/gc-select.js","webpack:///./scriptsrc/gc-timermark.js","webpack:///./scriptsrc/popup.js","webpack:///./scriptsrc/ptable-grades.js","webpack:///./scriptsrc/ptable-diff.js","webpack:///./scriptsrc/ptable-run.js","webpack:///./scriptsrc/search.js","webpack:///./scriptsrc/ptable.js","webpack:///./node_modules/uc.micro/properties/Any/regex.mjs","webpack:///./node_modules/uc.micro/categories/Cc/regex.mjs","webpack:///./node_modules/uc.micro/categories/Z/regex.mjs","webpack:///./node_modules/uc.micro/categories/P/regex.mjs","webpack:///./node_modules/linkify-it/index.mjs","webpack:///./node_modules/linkify-it/lib/re.mjs","webpack:///./scriptsrc/main.js"],"sourcesContent":["// ui-autogrow.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nlet autogrowers, shadows = {};\n\nfunction get_shadow(elt, width) {\n    const css = window.getComputedStyle(elt);\n    let t = 'font-size:'.concat(css.fontSize,\n        ';font-family:', css.fontFamily,\n        ';font-weight:', css.fontWeight,\n        ';font-style:', css.fontStyle,\n        ';line-height:', css.lineHeight,\n        'px;position:absolute;top:-10000px;left:-10000px;resize:none;word-wrap:break-word;white-space:pre-wrap;');\n    if (elt.tagName !== \"TEXTAREA\") {\n        const pl = parseFloat(css.paddingLeft),\n            pr = parseFloat(css.paddingRight),\n            bl = parseFloat(css.borderLeftWidth),\n            br = parseFloat(css.borderRightWidth);\n        t = t.concat('width:auto;display:table-cell;padding-left:', pl,\n            'px;padding-right:', pl + pr + bl + br, 'px;');\n        if (css.minWidth === \"0px\" && width) {\n            elt.style.minWidth = width + \"px\";\n        }\n        if (css.maxWidth === \"none\" && !elt.classList.contains(\"wide\")) {\n            elt.style.maxWidth = \"640px\";\n        }\n    }\n    let s = shadows[t];\n    if (!s) {\n        s = shadows[t] = {\n            signature: t,\n            elt: document.createElement(\"div\"),\n            refcount: 0\n        };\n        s.elt.setAttribute(\"style\", t);\n        document.body.appendChild(s.elt);\n    }\n    ++s.refcount;\n    return s;\n}\n\nfunction resizer() {\n    for (let ag of autogrowers) {\n        ag[1]();\n    }\n}\n\nfunction remover(self, shadow) {\n    $(self).removeData(\"autogrower\");\n    if (shadow) {\n        if (shadow instanceof Element) {\n            shadow.remove();\n        } else if (--shadow.refcount === 0) {\n            shadow.elt.remove();\n            delete shadows[shadow.signature];\n        }\n    }\n    autogrowers && autogrowers.delete(self);\n}\n\nfunction make_textarea_autogrower(self) {\n    var shadow, minHeight, lineHeight;\n    return function (event) {\n        if (event === false) {\n            return remover(self, shadow);\n        }\n        var width = self.clientWidth;\n        if (width <= 0) {\n            return;\n        }\n        if (!shadow) {\n            shadow = get_shadow(self);\n            minHeight = self.clientHeight;\n            shadow.elt.innerText = \"!\";\n            lineHeight = shadow.elt.clientHeight;\n        }\n\n        // Did enter get pressed?  Resize in this keydown event so that the flicker doesn't occur.\n        var val = self.value;\n        if (event && event.type == \"keydown\" && event.keyCode === 13) {\n            val += \"\\n\";\n        }\n        shadow.elt.style.width = width + \"px\";\n        shadow.elt.innerText = val + \"...\";\n\n        var wh = Math.max($(window).height() - 4 * lineHeight, 4 * lineHeight);\n        $(self).height(Math.min(wh, Math.max(shadow.elt.clientHeight, minHeight)));\n    };\n}\n\nfunction make_input_autogrower(self) {\n    var shadow, minWidth, maxWidth;\n    return function (event) {\n        if (event === false) {\n            return remover(self, shadow);\n        }\n        var width = 0;\n        try {\n            width = self.offsetWidth;\n        } catch { // IE11 is annoying here\n        }\n        if (width <= 0) {\n            return;\n        }\n        if (!shadow) {\n            shadow = get_shadow(self, width);\n            let css = window.getComputedStyle(self);\n            minWidth = parseFloat(css.minWidth);\n            maxWidth = parseFloat(css.maxWidth);\n        }\n        shadow.elt.innerText = self.value + \"  \";\n        let outerWidth = Math.min(shadow.elt.offsetWidth, $(window).width());\n        if (maxWidth === maxWidth) { // i.e., isn't NaN\n            outerWidth = Math.min(outerWidth, maxWidth);\n        }\n        $(self).outerWidth(Math.max(outerWidth, minWidth));\n    };\n}\n\n$.fn.autogrow = function () {\n    this.each(function () {\n        var $self = $(this), f = $self.data(\"autogrower\");\n        if (!f && this.classList.contains(\"need-autogrow\")) {\n            this.classList.remove(\"need-autogrow\");\n            if (this.tagName === \"TEXTAREA\") {\n                f = make_textarea_autogrower(this);\n            } else if (this.tagName === \"INPUT\" && this.type === \"text\") {\n                f = make_input_autogrower(this);\n            }\n            if (f) {\n                $self.data(\"autogrower\", f).on(\"change input\", f);\n                if (!autogrowers) {\n                    autogrowers = new Map;\n                    $(window).resize(resizer);\n                }\n                autogrowers.set(this, f);\n            }\n        }\n        if (f && $self.val() !== \"\") {\n            f();\n        }\n    });\n    return this;\n};\n\n$.fn.unautogrow = function () {\n    this.each(function () {\n        var f = $(this).data(\"autogrower\");\n        f && f(false);\n    });\n    return this;\n};\n\n$(function () { $(\".need-autogrow\").autogrow(); });\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// utils.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nexport let wstorage = function () { return false; };\ntry {\n    if (window.localStorage && window.JSON)\n        wstorage = function (is_session, key, value) {\n            try {\n                var s = is_session ? window.sessionStorage : window.localStorage;\n                if (typeof key === \"undefined\")\n                    return !!s;\n                else if (typeof value === \"undefined\")\n                    return s.getItem(key);\n                else if (value === null)\n                    return s.removeItem(key);\n                else if (typeof value === \"object\")\n                    return s.setItem(key, JSON.stringify(value));\n                else\n                    return s.setItem(key, value);\n            } catch {\n                return false;\n            }\n        };\n} catch {\n}\nwstorage.json = function (is_session, key) {\n    var x = wstorage(is_session, key);\n    return x ? JSON.parse(x) : false;\n};\nwstorage.site = function (is_session, key, value) {\n    if (siteinfo.base !== \"/\")\n        key = siteinfo.base + key;\n    return wstorage(is_session, key, value);\n};\nwstorage.site_json = function (is_session, key) {\n    if (siteinfo.base !== \"/\")\n        key = siteinfo.base + key;\n    return wstorage.json(is_session, key);\n};\n\n\nexport function sprintf(fmt) {\n    var words = fmt.split(/(%(?:%|-?(?:\\d*|\\*?)(?:\\.\\d*)?[sdefgroxX]))/), wordno, word,\n        arg, argno, conv, pad, t = \"\";\n    for (wordno = 0, argno = 1; wordno != words.length; ++wordno) {\n        word = words[wordno];\n        if (word.charAt(0) != \"%\")\n            t += word;\n        else if (word.charAt(1) == \"%\")\n            t += \"%\";\n        else {\n            arg = arguments[argno];\n            ++argno;\n            conv = word.match(/^%(-?)(\\d*|\\*?)(?:|[.](\\d*))(\\w)/);\n            if (conv[2] == \"*\") {\n                conv[2] = arg.toString();\n                arg = arguments[argno];\n                ++argno;\n            }\n            if (conv[4] >= \"e\" && conv[4] <= \"g\" && conv[3] == null) {\n                conv[3] = 6;\n            }\n            if (conv[4] === \"g\") {\n                arg = Number(arg).toPrecision(conv[3]).toString();\n                arg = arg.replace(/\\.(\\d*[1-9])?0+(|e.*)$/,\n                                  function (match, p1, p2) {\n                                      return (p1 == null ? \"\" : \".\" + p1) + p2;\n                                  });\n            } else if (conv[4] === \"f\") {\n                arg = Number(arg).toFixed(conv[3]);\n            } else if (conv[4] === \"e\") {\n                arg = Number(arg).toExponential(conv[3]);\n            } else if (conv[4] === \"r\") {\n                arg = Number(arg).toFixed(+(conv[3] || 0));\n                if (+(conv[3] || 0))\n                    arg = arg.replace(/\\.?0*$/, \"\");\n            } else if (conv[4] === \"d\") {\n                arg = Math.floor(arg);\n            } else if (conv[4] === \"o\") {\n                arg = Math.floor(arg).toString(8);\n            } else if (conv[4] === \"x\") {\n                arg = Math.floor(arg).toString(16);\n            } else if (conv[4] === \"X\") {\n                arg = Math.floor(arg).toString(16).toUpperCase();\n            }\n            arg = arg.toString();\n            if (conv[2] !== \"\" && conv[2] !== \"0\") {\n                pad = conv[2].charAt(0) === \"0\" ? \"0\" : \" \";\n                while (arg.length < parseInt(conv[2], 10)) {\n                    arg = conv[1] ? arg + pad : pad + arg;\n                }\n            }\n            t += arg;\n        }\n    }\n    return t;\n}\n\n\nfunction pad(num, str, n) {\n    str += num.toString();\n    return str.length <= n ? str : str.substring(str.length - n);\n}\n\nfunction unparse_q(d, alt, is24) {\n    if (is24 && alt && !d.getSeconds()) {\n        return strftime(\"%H:%M\", d);\n    } else if (is24) {\n        return strftime(\"%H:%M:%S\", d);\n    } else if (alt && d.getSeconds()) {\n        return strftime(\"%#l:%M:%S%P\", d);\n    } else if (alt && d.getMinutes()) {\n        return strftime(\"%#l:%M%P\", d);\n    } else if (alt) {\n        return strftime(\"%#l%P\", d);\n    } else {\n        return strftime(\"%I:%M:%S %p\", d);\n    }\n}\n\nconst unparsers = {\n    a: function (d) { return ([\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"])[d.getDay()]; },\n    A: function (d) { return ([\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"])[d.getDay()]; },\n    d: function (d) { return pad(d.getDate(), \"0\", 2); },\n    e: function (d, alt) { return pad(d.getDate(), alt ? \"\" : \" \", 2); },\n    u: function (d) { return d.getDay() || 7; },\n    w: function (d) { return d.getDay(); },\n    b: function (d) { return ([\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"])[d.getMonth()]; },\n    B: function (d) { return ([\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"])[d.getMonth()]; },\n    h: function (d) { return unparsers.b(d); },\n    m: function (d) { return pad(d.getMonth() + 1, \"0\", 2); },\n    y: function (d) { return d.getFullYear() % 100; },\n    Y: function (d) { return d.getFullYear(); },\n    H: function (d) { return pad(d.getHours(), \"0\", 2); },\n    k: function (d, alt) { return pad(d.getHours(), alt ? \"\" : \" \", 2); },\n    I: function (d) { return pad(d.getHours() % 12 || 12, \"0\", 2); },\n    l: function (d, alt) { return pad(d.getHours() % 12 || 12, alt ? \"\" : \" \", 2); },\n    M: function (d) { return pad(d.getMinutes(), \"0\", 2); },\n    X: function (d) { return strftime(\"%#e %b %Y %#q\", d); },\n    p: function (d) { return d.getHours() < 12 ? \"AM\" : \"PM\"; },\n    P: function (d) { return d.getHours() < 12 ? \"am\" : \"pm\"; },\n    q: function (d, alt) { return unparse_q(d, alt, strftime.is24); },\n    r: function (d, alt) { return unparse_q(d, alt, false); },\n    R: function (d, alt) { return unparse_q(d, alt, true); },\n    S: function (d) { return pad(d.getSeconds(), \"0\", 2); },\n    T: function (d) { return strftime(\"%H:%M:%S\", d); },\n    /* XXX z Z */\n    D: function (d) { return strftime(\"%m/%d/%y\", d); },\n    F: function (d) { return strftime(\"%Y-%m-%d\", d); },\n    s: function (d) { return Math.floor(d.getTime() / 1000); },\n    n: function () { return \"\\n\"; },\n    t: function () { return \"\\t\"; },\n    \"%\": function () { return \"%\"; }\n};\n\nexport function strftime(fmt, d) {\n    var words = fmt.split(/(%#?\\S)/), wordno, word, alt, f, t = \"\";\n    if (d == null)\n        d = new Date;\n    else if (typeof d == \"number\")\n        d = new Date(d * 1000);\n    for (wordno = 0; wordno != words.length; ++wordno) {\n        word = words[wordno];\n        alt = word.charAt(1) == \"#\";\n        if (word.charAt(0) == \"%\"\n            && (f = unparsers[word.charAt(1 + alt)]))\n            t += f(d, alt);\n        else\n            t += word;\n    }\n    return t;\n}\n\nexport function sec2text(s, style) {\n    s = Math.round(s);\n    if (s > -60 && s < 60) {\n        return s + \"s\";\n    }\n    let t = s < 0 ? \"-\" : \"\";\n    s = Math.abs(s);\n    if (s >= 3600) {\n        if (s % 900 === 0 && style === \"quarterhour\") {\n            t = t.concat(s / 3600, \"h\");\n            s = 0;\n        } else {\n            const h = Math.floor(s / 3600);\n            t = t.concat(h, \"h\");\n            s -= h * 3600;\n            if (s < 60) {\n                t += \"0m\";\n            }\n        }\n    }\n    if (s >= 60) {\n        const m = Math.floor(s / 60);\n        t = t.concat(m, \"m\");\n        s -= m * 60;\n    }\n    if (s !== 0) {\n        t = t.concat(s, \"s\");\n    }\n    return t;\n}\n\n\nif (!window.JSON || !window.JSON.parse) {\n    window.JSON = {parse: $.parseJSON};\n}\n\nif (!Element.prototype.closest) {\n    Element.prototype.closest = function (s) {\n        return $(this).closest(s)[0];\n    };\n}\n\nif (!Element.prototype.replaceChildren) {\n    Element.prototype.replaceChildren = function () {\n        while (this.lastChild) {\n            this.removeChild(this.lastChild);\n        }\n        for (let i = 0; i !== arguments.length; ++i) {\n            this.append(arguments[i]);\n        }\n    };\n}\n\nif (!String.prototype.startsWith) {\n    String.prototype.startsWith = function (search, pos) {\n        pos = !pos || pos < 0 ? 0 : +pos;\n        return this.substring(pos, pos + search.length) === search;\n    };\n}\n\nif (!String.prototype.endsWith) {\n    String.prototype.endsWith = function (search, this_len) {\n        if (this_len === undefined || this_len > this.length) {\n            this_len = this.length;\n        }\n        return this.substring(this_len - search.length, this_len) === search;\n    };\n}\n\nif (!String.prototype.trimStart) {\n    String.prototype.trimStart = function () {\n        return this.replace(/^[\\s\\uFEFF\\xA0]+/, '');\n    };\n}\n\nif (!Object.hasOwn) {\n    Object.defineProperty(Object, \"hasOwn\", {\n        value: Object.prototype.hasOwnProperty, configurable: true, writable: true\n    });\n}\n\n\nexport class ImmediatePromise {\n    constructor(value) {\n        this.value = value;\n    }\n    then(executor) {\n        try {\n            const v = executor(this.value);\n            if (v instanceof Promise || v instanceof ImmediatePromise) {\n                return v;\n            } else {\n                return new ImmediatePromise(v);\n            }\n        } catch (e) {\n            return Promise.reject(e);\n        }\n    }\n    catch() {\n        return this;\n    }\n    finally(executor) {\n        try {\n            executor();\n        } catch {\n        }\n        return this;\n    }\n}\n\n\nexport function text_eq(a, b) {\n    if (a === b) {\n        return true;\n    } else {\n        a = (a == null ? \"\" : a).replace(/\\r\\n?/g, \"\\n\");\n        b = (b == null ? \"\" : b).replace(/\\r\\n?/g, \"\\n\");\n        return a === b;\n    }\n}\n\n\nexport function string_utf8_index(str, index) {\n    let r = 0, pos = 0;\n    const re = /([\\x00-\\x7F]*)([\\u0080-\\u07FF]*)([\\u0800-\\uD7FF\\uE000-\\uFFFF]*)((?:[\\uD800-\\uDBFF][\\uDC00-\\uDFFF])*)/y, len = str.length;\n    while (pos < len && index > 0) {\n        re.lastIndex = pos;\n        const m = re.exec(str);\n        if (!m) {\n            break;\n        }\n        if (m[1].length) {\n            const n = Math.min(index, m[1].length);\n            r += n;\n            index -= n;\n        }\n        if (m[2].length) {\n            const n = Math.min(index, m[2].length * 2);\n            r += n / 2;\n            index -= n;\n        }\n        if (m[3].length) {\n            const n = Math.min(index, m[3].length * 3);\n            r += n / 3;\n            index -= n;\n        }\n        if (m[4].length) {\n            const n = Math.min(index, m[4].length * 2);\n            r += n / 2; // surrogate pairs\n            index -= n;\n        }\n        pos += m[0].length;\n    }\n    return r;\n}\n","// ui.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nexport let hasClass, addClass, removeClass, toggleClass, classList;\nif (\"classList\" in document.createElement(\"span\")\n    && !/MSIE|rv:11\\.0/.test(navigator.userAgent || \"\")) {\n    hasClass = function (e, k) {\n        let l = e.classList;\n        return l && l.contains(k);\n    };\n    addClass = function (e, k) {\n        e.classList.add(k);\n    };\n    removeClass = function (e, k) {\n        e.classList.remove(k);\n    };\n    toggleClass = function (e, k, v) {\n        e.classList.toggle(k, v);\n    };\n    classList = function (e) {\n        return e.classList;\n    };\n} else {\n    hasClass = function (e, k) {\n        return $(e).hasClass(k);\n    };\n    addClass = function (e, k) {\n        $(e).addClass(k);\n    };\n    removeClass = function (e, k) {\n        $(e).removeClass(k);\n    };\n    toggleClass = function (e, k, v) {\n        $(e).toggleClass(k, v);\n    };\n    classList = function (e) {\n        let k = $.trim(e.className);\n        return k === \"\" ? [] : k.split(/\\s+/);\n    };\n}\n\n\n// ui\nconst callbacks = {};\n\nfunction collect_callbacks(cbs, c, etype) {\n    for (let j = 0; j !== c.length; j += 3) {\n        if (!c[j] || c[j] === etype) {\n            let k = cbs.length;\n            while (k !== 0 && c[j+1] > cbs[k-2]) {\n                k -= 2;\n            }\n            cbs.splice(k, 0, c[j+1], c[j+2]);\n        }\n    }\n}\n\nfunction call_callbacks(cbs, element, event) {\n    for (let i = 0; i !== cbs.length && !event.isImmediatePropagationStopped(); i += 2) {\n        cbs[i+1].call(element, event);\n    }\n}\n\nexport function handle_ui(event) {\n    let e = event.target;\n    if ((e && (hasClass(e, \"ui\") || hasClass(e, \"uin\")))\n        || (this.tagName === \"A\" && hasClass(this, \"ui\"))) {\n        event.preventDefault();\n    }\n    let k = classList(this), cbs = null;\n    for (let i = 0; i < k.length; ++i) {\n        let c = callbacks[k[i]];\n        if (c) {\n            cbs = cbs || [];\n            collect_callbacks(cbs, c, event.type);\n        }\n    }\n    cbs && cbs.length && call_callbacks(cbs, this, event);\n}\n\nhandle_ui.on = function (className, callback, priority) {\n    let dot = className.indexOf(\".\"), type = null;\n    if (dot >= 0) {\n        type = className.substring(0, dot);\n        className = className.substring(dot + 1);\n    }\n    callbacks[className] = callbacks[className] || [];\n    callbacks[className].push(type, priority || 0, callback);\n};\n\nhandle_ui.trigger = function (className, event) {\n    let c = callbacks[className];\n    if (c) {\n        if (typeof event === \"string\") {\n            event = $.Event(event); // XXX IE8: `new Event` is not supported\n        }\n        let cbs = [];\n        collect_callbacks(cbs, c, event.type);\n        cbs.length && call_callbacks(cbs, this, event);\n    }\n};\n\n$(document).on(\"click\", \".ui, .uic\", handle_ui);\n$(document).on(\"change\", \".uich\", handle_ui);\n$(document).on(\"error\", \".ui-error\", handle_ui);\n$(document).on(\"input\", \".uii\", handle_ui);\n$(document).on(\"keydown\", \".uikd\", handle_ui);\n$(document).on(\"load\", \".ui-load\", handle_ui);\n$(document).on(\"mouseup mousedown\", \".uim\", handle_ui);\n$(document).on(\"unfold\", \".ui-unfold\", handle_ui);\n$(document).on(\"focusin\", \".ui-focusin\", handle_ui);\n$(document).on(\"focusout\", \".ui-focusout\", handle_ui);\n\n\nlet in_tab = false;\n$(document).on(\"keydown keyup\", function (event) {\n    if (event.key === \"Tab\" && !event.metaKey) {\n        in_tab = event.type === \"keydown\";\n    }\n});\n$(document).on(\"focus\", \"textarea.ta1\", function () {\n    if (in_tab) {\n        let self = this;\n        setTimeout(function () { self.setSelectionRange(0, self.value.length); }, 0);\n    }\n});\n\n\nexport function fold61(sel, arrowholder, direction) {\n    if (direction != null) {\n        direction = !direction;\n    }\n    toggleClass(sel, \"hidden\", direction);\n    arrowholder && $(arrowholder).find(\"span.foldarrow\").html(\n        hasClass(sel, \"hidden\") ? \"&#x25B6;\" : \"&#x25BC;\"\n    );\n    return false;\n}\n\n\nexport function input_is_checkboxlike(elt) {\n    return elt.type === \"checkbox\" || elt.type === \"radio\";\n}\n\nexport function input_default_value(elt) {\n    if (elt.hasAttribute(\"data-default-value\")) {\n        return elt.getAttribute(\"data-default-value\");\n    } else if (input_is_checkboxlike(elt)) {\n        let checked = elt.defaultChecked;\n        if (elt.hasAttribute(\"data-default-checked\")) {\n            checked = elt.getAttribute(\"data-default-checked\") !== \"false\";\n        }\n        return checked ? elt.defaultValue : \"\";\n    } else {\n        return elt.defaultValue;\n    }\n}\n\nexport function input_set_default_value(elt, val) {\n    if (input_is_checkboxlike(elt)) {\n        // set dirty checkedness flag:\n        elt.checked = elt.checked; // eslint-disable-line no-self-assign\n        elt.removeAttribute(\"data-default-checked\");\n        elt.removeAttribute(\"data-default-value\");\n        if (val == null || val == \"\") {\n            elt.defaultChecked = false;\n        } else if (val == elt.value) {\n            elt.defaultChecked = true;\n        } else {\n            elt.setAttribute(\"data-default-value\", val);\n        }\n    } else {\n        // set dirty value flag:\n        elt.value = elt.value; // eslint-disable-line no-self-assign\n        if (elt.type !== \"select\") {\n            elt.removeAttribute(\"data-default-value\");\n            elt.defaultValue = val;\n        } else {\n            elt.setAttribute(\"data-default-value\", val);\n        }\n    }\n}\n\nfunction text_eq(a, b) {\n    if (a !== b) {\n        a = (a == null ? \"\" : a).replace(/\\r\\n?/g, \"\\n\");\n        b = (b == null ? \"\" : b).replace(/\\r\\n?/g, \"\\n\");\n    }\n    return a === b;\n}\n\nexport function input_differs(elt) {\n    const expected = input_default_value(elt);\n    if (input_is_checkboxlike(elt)) {\n        const val = elt.checked ? elt.value : \"\";\n        return val !== expected;\n    } else if (elt.type === \"button\" || elt.type === \"submit\" || elt.type === \"reset\") {\n        return false;\n    } else {\n        return !text_eq(elt.value, expected);\n    }\n}\n\n\n// HtmlCollector\n\nexport class HtmlCollector {\n    constructor() {\n        this.clear();\n    }\n\n    clear() {\n        this.open = [];\n        this.close = [];\n        this.html = \"\";\n        return this;\n    }\n\n    push(open, close) {\n        if (open && close) {\n            this.open.push(this.html + open);\n            this.close.push(close);\n            this.html = \"\";\n            return this.open.length - 1;\n        } else {\n            this.html += open;\n        }\n        return this;\n    }\n\n    pop(pos) {\n        let n = this.open.length;\n        if (pos == null) {\n            pos = Math.max(0, n - 1);\n        }\n        while (n > pos) {\n            --n;\n            this.html = this.open[n] + this.html + this.close[n];\n            this.open.pop();\n            this.close.pop();\n        }\n        return this;\n    }\n\n    pop_n(n) {\n        return this.pop(Math.max(0, this.open.length - n));\n    }\n\n    push_pop(text) {\n        this.html += text;\n        return this.pop();\n    }\n\n    pop_push(open, close) {\n        this.pop();\n        return this.push(open, close);\n    }\n\n    pop_collapse(pos) {\n        if (pos == null) {\n            pos = this.open.length ? this.open.length - 1 : 0;\n        }\n        while (this.open.length > pos) {\n            if (this.html !== \"\") {\n                this.html = this.open[this.open.length - 1] + this.html +\n                    this.close[this.open.length - 1];\n            }\n            this.open.pop();\n            this.close.pop();\n        }\n        return this;\n    }\n\n    render() {\n        this.pop(0);\n        return this.html;\n    }\n}\n\nexport function $e(tag, attr) {\n    const e = document.createElement(tag);\n    if (!attr) {\n        // nothing\n    } else if (typeof attr === \"string\") {\n        e.className = attr;\n    } else {\n        for (const i in attr) {\n            if (attr[i] == null) {\n                // skip\n            } else if (typeof attr[i] === \"boolean\") {\n                attr[i] ? e.setAttribute(i, \"\") : e.removeAttribute(i);\n            } else {\n                e.setAttribute(i, attr[i]);\n            }\n        }\n    }\n    for (let i = 2; i < arguments.length; ++i) {\n        if (arguments[i] != null) {\n            e.append(arguments[i]);\n        }\n    }\n    return e;\n}\n","// ui-key.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2020 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hasClass } from \"./ui.js\";\n\n\nconst key_map = {\"Spacebar\": \" \", \"Esc\": \"Escape\"},\n    charCode_map = {\"9\": \"Tab\", \"13\": \"Enter\", \"27\": \"Escape\"},\n    keyCode_map = {\n        \"9\": \"Tab\", \"13\": \"Enter\", \"16\": \"ShiftLeft\", \"17\": \"ControlLeft\",\n        \"18\": \"AltLeft\", \"20\": \"CapsLock\", \"27\": \"Escape\", \"33\": \"PageUp\",\n        \"34\": \"PageDown\", \"37\": \"ArrowLeft\", \"38\": \"ArrowUp\", \"39\": \"ArrowRight\",\n        \"40\": \"ArrowDown\", \"91\": \"OSLeft\", \"92\": \"OSRight\", \"93\": \"OSRight\",\n        \"224\": \"OSLeft\", \"225\": \"AltRight\"\n    },\n    nonprintable_map = {\n        \"Alt\": 2,\n        \"AltLeft\": 2,\n        \"AltRight\": 2,\n        \"CapsLock\": 2,\n        \"Control\": 2,\n        \"ControlLeft\": 2,\n        \"ControlRight\": 2,\n        \"Meta\": 2,\n        \"OSLeft\": 2,\n        \"OSRight\": 2,\n        \"Shift\": 2,\n        \"ShiftLeft\": 2,\n        \"ShiftRight\": 2,\n        \"ArrowLeft\": 1,\n        \"ArrowRight\": 1,\n        \"ArrowUp\": 1,\n        \"ArrowDown\": 1,\n        \"Backspace\": 1,\n        \"Enter\": 1,\n        \"Escape\": 1,\n        \"PageUp\": 1,\n        \"PageDown\": 1,\n        \"Tab\": 1\n    };\n\nexport function event_key(evt) {\n    let x;\n    if (typeof evt === \"string\") {\n        return evt;\n    } else if ((x = evt.key) != null) {\n        return key_map[x] || x;\n    } else if ((x = evt.charCode)) {\n        return charCode_map[x] || String.fromCharCode(x);\n    } else if ((x = evt.keyCode)) {\n        if (keyCode_map[x]) {\n            return keyCode_map[x];\n        } else if ((x >= 48 && x <= 57) || (x >= 65 && x <= 90)) {\n            return String.fromCharCode(x);\n        }\n    } else {\n        return \"\";\n    }\n}\n\nevent_key.printable = function (evt) {\n    return !nonprintable_map[event_key(evt)]\n        && (typeof evt === \"string\" || !(evt.ctrlKey || evt.metaKey));\n};\nevent_key.is_modifier = function (evt) {\n    return nonprintable_map[event_key(evt)] > 1;\n};\nevent_key.is_default_a = function (evt, a) {\n    return !evt.shiftKey && !evt.metaKey && !evt.ctrlKey\n        && evt.button == 0\n        && (!a || !hasClass(\"ui\", a));\n};\n\nexport function event_modkey(evt) {\n    return (evt.shiftKey ? 1 : 0) + (evt.ctrlKey ? 2 : 0) + (evt.altKey ? 4 : 0) + (evt.metaKey ? 8 : 0);\n}\nevent_modkey.SHIFT = 1; // NB values matter\nevent_modkey.CTRL = 2;\nevent_modkey.ALT = 4;\nevent_modkey.META = 8;\n","// hoturl.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nfunction encodeURIComponentPlus(s) {\n    return encodeURIComponent(s).replace(/%20/g, \"+\");\n}\n\nfunction serialize_object(x) {\n    if (typeof x === \"string\") {\n        return x;\n    } else if (x) {\n        var k, v, a = [\"\"];\n        for (k in x) {\n            if ((v = x[k]) != null)\n                a.push(encodeURIComponent(k), \"=\", encodeURIComponentPlus(v), \"&\");\n        }\n        a[a.length - 1] = \"\";\n        return a.join(\"\");\n    } else {\n        return \"\";\n    }\n}\n\nfunction hoturl_clean_before(x, page_component, prefix) {\n    if (x.first !== false && x.v.length) {\n        for (var i = 0; i < x.v.length; ++i) {\n            var m = page_component.exec(x.v[i]);\n            if (m) {\n                x.pt += prefix + m[1] + \"/\";\n                x.v.splice(i, 1);\n                x.first = m[1];\n                return;\n            }\n        }\n        x.first = false;\n    }\n}\n\nfunction hoturl_clean(x, page_component) {\n    if (x.last !== false && x.v.length) {\n        for (var i = 0; i < x.v.length; ++i) {\n            var m = page_component.exec(x.v[i]);\n            if (m) {\n                x.t += \"/\" + m[1];\n                x.v.splice(i, 1);\n                x.last = m[1];\n                return;\n            }\n        }\n        x.last = false;\n    }\n}\n\nfunction hoturl_psetinfo(elt, page, args) {\n    const p = elt.closest(\".pa-psetinfo\");\n    let v;\n    if ((v = p.getAttribute(\"data-pa-user\") || siteinfo.uservalue)) {\n        args.push(\"u=\" + encodeURIComponent(v));\n    }\n    if ((v = p.getAttribute(\"data-pa-pset\"))) {\n        args.push(\"pset=\" + encodeURIComponent(v));\n    }\n    if ((v = p.getAttribute(\"data-pa-commit\"))) {\n        args.push(\"commit=\" + encodeURIComponent(v));\n    }\n    let sheet;\n    if ((page === \"api/grade\" || page === \"=api/grade\")\n        && (sheet = p.pa__gradesheet)) {\n        const enames = [];\n        for (let i in sheet.entries) {\n            enames.push(i);\n        }\n        args.push(\"knowngrades=\" + encodeURIComponentPlus(enames.join(\" \")));\n    }\n}\n\nexport function hoturl(page, options) {\n    let k, v, m, x, xv, anchor = \"\";\n    if (siteinfo.site_relative == null || siteinfo.suffix == null) {\n        siteinfo.site_relative = siteinfo.suffix = \"\";\n    }\n\n    if (typeof options === \"string\") {\n        if ((m = options.match(/^(.*?)(#.*)$/))) {\n            options = m[1];\n            anchor = m[2];\n        }\n        xv = options.split(/&/);\n    } else {\n        xv = [];\n        for (k in options) {\n            v = options[k];\n            if (v == null) {\n                /* do nothing */\n            } else if (k === \"anchor\") {\n                anchor = \"#\" + v;\n            } else if (k === \"psetinfo\" && v instanceof Element) {\n                hoturl_psetinfo(v, page, xv);\n            } else {\n                xv.push(encodeURIComponent(k).concat(\"=\", encodeURIComponentPlus(v)));\n            }\n        }\n    }\n\n    if (page.startsWith(\"=\")) {\n        xv.push(\"post=\" + siteinfo.postvalue);\n        page = page.substring(1);\n    }\n    x = {pt: \"\", v: xv, t: page + siteinfo.suffix};\n\n    if (page === \"help\") {\n        hoturl_clean(x, /^t=(\\w+)$/);\n    } else if (page.substr(0, 3) === \"api\") {\n        if (page.length > 3) {\n            x.t = \"api\" + siteinfo.suffix;\n            xv.push(\"fn=\" + page.substr(4));\n        }\n        hoturl_clean_before(x, /^u=([^?&#]+)$/, \"~\");\n        hoturl_clean(x, /^fn=(\\w+)$/);\n    } else if (page === \"index\") {\n        hoturl_clean_before(x, /^u=([^?&#]+)$/, \"~\");\n    } else if (page === \"run\") {\n        hoturl_clean_before(x, /^u=([^?&#]+)$/, \"~\");\n    } else if (page === \"pset\") {\n        hoturl_clean_before(x, /^u=([^?&#]+)$/, \"~\");\n        hoturl_clean(x, /^pset=([^?&#]+)$/);\n        hoturl_clean(x, /^commit=([0-9A-Fa-f]+)$/);\n    }\n\n    if (siteinfo.defaults) {\n        xv.push(serialize_object(siteinfo.defaults));\n    }\n    if (xv.length) {\n        x.t += \"?\" + xv.join(\"&\");\n    }\n    return siteinfo.site_relative + x.pt + x.t + anchor;\n}\n\nexport function hoturl_absolute_base() {\n    if (!siteinfo.absolute_base) {\n        siteinfo.absolute_base = new URL(siteinfo.base, document.baseURI).href;\n    }\n    return siteinfo.absolute_base;\n}\n\nexport function hoturl_get_go(page, options) {\n    window.location = hoturl(page, options);\n}\n\nexport function hoturl_post_go(page, options, data) {\n    const form = document.createElement(\"form\");\n    form.setAttribute(\"method\", \"post\");\n    form.setAttribute(\"enctype\", \"multipart/form-data\");\n    form.setAttribute(\"accept-charset\", \"UTF-8\");\n    form.action = hoturl(page, options);\n    data = data || {____empty____: 1};\n    for (let n in data) {\n        const input = document.createElement(\"input\");\n        input.type = \"hidden\";\n        input.name = n;\n        input.value = data[n];\n        form.appendChild(input);\n    }\n    document.body.appendChild(form);\n    form.submit();\n}\n","// utils-errors.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2020 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hoturl } from \"./hoturl.js\";\n\nexport function log_jserror(errormsg, error, noconsole) {\n    if (!error && errormsg instanceof Error) {\n        error = errormsg;\n        errormsg = {\"error\": error.toString()};\n    } else if (typeof errormsg === \"string\") {\n        errormsg = {\"error\": errormsg};\n    }\n    if (error && error.fileName && !errormsg.url) {\n        errormsg.url = error.fileName;\n    }\n    if (error && error.lineNumber && !errormsg.lineno) {\n        errormsg.lineno = error.lineNumber;\n    }\n    if (error && error.columnNumber && !errormsg.colno) {\n        errormsg.colno = error.columnNumber;\n    }\n    if (error && error.stack) {\n        errormsg.stack = error.stack;\n    }\n    $.ajax(hoturl(\"=api/jserror\"), {\n        global: false, method: \"POST\", cache: false, data: errormsg\n    });\n    if (error && !noconsole && typeof console === \"object\" && console.error) {\n        console.error(errormsg.error);\n    }\n}\n\n\nlet old_onerror = window.onerror, nerrors_logged = 0;\nwindow.onerror = function (errormsg, url, lineno, colno, error) {\n    if ((url || !lineno)\n        && errormsg.indexOf(\"ResizeObserver loop limit exceeded\") < 0\n        && ++nerrors_logged <= 10) {\n        var x = {error: errormsg, url: url, lineno: lineno};\n        if (colno) {\n            x.colno = colno;\n        }\n        log_jserror(x, error, true);\n    }\n    return old_onerror ? old_onerror.apply(this, arguments) : false;\n};\n\n\n$(function () {\n    function locator(e) {\n        var p = [];\n        while (e && e.nodeName !== \"BODY\" && e.nodeName !== \"MAIN\") {\n            var t = e.nodeName, s = e.className.replace(/\\s+/g, \".\");\n            if (e.id !== \"\") {\n                t += \"#\" + e.id;\n            }\n            if (s !== \"\") {\n                t += \".\" + s;\n            }\n            p.push(t);\n            e = e.parentElement;\n        }\n        p.reverse();\n        return p.join(\">\");\n    }\n    var err = [], elt = [];\n    $(\"button.btn-link,button.btn-qlink,button.btn-qolink,.btn-xlink,.btn-ulink,.btn-disabled,a.qx,a.u,a.x\").each(function () {\n        err.push(locator(this));\n        elt.push(this);\n    });\n    if (err.length > 0) {\n        if (window.console) {\n            console.log(err.join(\"\\n\"));\n            for (var i = 0; i !== elt.length; ++i) {\n                console.log(elt[i]);\n            }\n        }\n        log_jserror(err.join(\"\\n\"));\n    }\n});\n","// ui-range.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2020 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hasClass, handle_ui } from \"./ui.js\";\nimport { event_key, event_modkey } from \"./ui-key.js\";\n\nhandle_ui.on(\"js-range-click\", function (event) {\n    if (event.type === \"change\")\n        return;\n\n    var $f = $(this).closest(\"form\"),\n        rangeclick_state = $f[0].jsRangeClick || {},\n        kind = this.getAttribute(\"data-range-type\") || this.name;\n    $f[0].jsRangeClick = rangeclick_state;\n\n    var key = false;\n    if (event.type === \"keydown\" && !event_modkey(event))\n        key = event_key(event);\n    if (rangeclick_state.__clicking__\n        || (event.type === \"updaterange\" && rangeclick_state[\"__update__\" + kind])\n        || (event.type === \"keydown\" && key !== \"ArrowDown\" && key !== \"ArrowUp\"))\n        return;\n\n    // find checkboxes and groups of this type\n    var cbs = [], cbgs = [];\n    $f.find(\"input.js-range-click\").each(function () {\n        var tkind = this.getAttribute(\"data-range-type\") || this.name;\n        if (kind === tkind) {\n            cbs.push(this);\n            if (hasClass(this, \"is-range-group\"))\n                cbgs.push(this);\n        }\n    });\n\n    // find positions\n    var lastelt = rangeclick_state[kind], thispos, lastpos, i;\n    for (i = 0; i !== cbs.length; ++i) {\n        if (cbs[i] === this)\n            thispos = i;\n        if (cbs[i] === lastelt)\n            lastpos = i;\n    }\n\n    if (key) {\n        if (thispos !== 0 && key === \"ArrowUp\")\n            --thispos;\n        else if (thispos < cbs.length - 1 && key === \"ArrowDown\")\n            ++thispos;\n        $(cbs[thispos]).focus().scrollIntoView();\n        event.preventDefault();\n        return;\n    }\n\n    // handle click\n    var group = false, single_group = false, j;\n    if (event.type === \"click\") {\n        rangeclick_state.__clicking__ = true;\n\n        if (hasClass(this, \"is-range-group\")) {\n            i = 0;\n            j = cbs.length - 1;\n            group = this.getAttribute(\"data-range-group\");\n        } else {\n            rangeclick_state[kind] = this;\n            if (event.shiftKey && lastelt) {\n                if (lastpos <= thispos) {\n                    i = lastpos;\n                    j = thispos - 1;\n                } else {\n                    i = thispos + 1;\n                    j = lastpos;\n                }\n            } else {\n                i = 1;\n                j = 0;\n                single_group = this.getAttribute(\"data-range-group\");\n            }\n        }\n\n        while (i <= j) {\n            if (cbs[i].checked !== this.checked\n                && !hasClass(cbs[i], \"is-range-group\")\n                && (!group || cbs[i].getAttribute(\"data-range-group\") === group))\n                $(cbs[i]).trigger(\"click\");\n            ++i;\n        }\n\n        delete rangeclick_state.__clicking__;\n    } else if (event.type === \"updaterange\") {\n        rangeclick_state[\"__updated__\" + kind] = true;\n    }\n\n    // update groups\n    for (j = 0; j !== cbgs.length; ++j) {\n        group = cbgs[j].getAttribute(\"data-range-group\");\n        if (single_group && group !== single_group)\n            continue;\n\n        var state = null;\n        for (i = 0; i !== cbs.length; ++i) {\n            if (cbs[i].getAttribute(\"data-range-group\") === group\n                && !hasClass(cbs[i], \"is-range-group\")) {\n                if (state === null)\n                    state = cbs[i].checked;\n                else if (state !== cbs[i].checked) {\n                    state = \"indeterminate\";\n                    break;\n                }\n            }\n        }\n\n        let changed = false;\n        if (state === \"indeterminate\") {\n            changed = !cbgs[j].indeterminate;\n            cbgs[j].indeterminate = true;\n            cbgs[j].checked = true;\n        } else {\n            changed = cbgs[j].indeterminate || cbgs[j].checked !== state;\n            cbgs[j].indeterminate = false;\n            cbgs[j].checked = state;\n        }\n        if (changed || cbgs[j] === event.target) {\n            const event = new CustomEvent(\"rangechange\", {\n                bubbles: true, cancelable: true,\n                detail: {rangeType: kind, rangeGroup: group, newState: state}\n            });\n            $f[0].dispatchEvent(event);\n        }\n    }\n}, -1);\n\n$(function () {\n    $(\".is-range-group\").each(function () {\n        handle_ui.trigger.call(this, \"js-range-click\", \"updaterange\");\n    });\n});\n","// xhr.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2020 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { log_jserror } from \"./utils-errors.js\";\n\nfunction jqxhr_error_ftext(jqxhr, status, errormsg) {\n    if (status === \"parsererror\")\n        return \"<0>Internal error: bad response from server\";\n    else if (errormsg)\n        return \"<0>\" + errormsg.toString();\n    else if (status === \"timeout\")\n        return \"<0>Connection timed out\";\n    else if (status)\n        return \"<0>Failed [\" + status + \"]\";\n    else\n        return \"<0>Failed\";\n}\n\n\nfunction check_message_list(data, options) {\n    if (typeof data === \"object\") {\n        if (data.message_list && !$.isArray(data.message_list)) {\n            log_jserror(options.url + \": bad message_list\");\n            data.message_list = [{message: \"<0>Internal error\", status: 2}];\n        } else if (data.error && !data.message_list) {\n            // log_jserror(options.url + \": `error` obsolete\"); // XXX backward compat\n            data.message_list = [{message: \"<0>\" + data.error, status: 2}];\n        } else if (data.warning) {\n            log_jserror(options.url + \": `warning` obsolete\"); // XXX backward compat\n        }\n    }\n}\n\nfunction check_sessioninfo(data, options) {\n    if (siteinfo.user.cid == data.sessioninfo.cid) {\n        siteinfo.postvalue = data.sessioninfo.postvalue;\n        $(\"form\").each(function () {\n            var m = /^([^#]*[&?;]post=)([^&?;#]*)/.exec(this.action);\n            if (m) {\n                this.action = m[1].concat(siteinfo.postvalue, this.action.substring(m[0].length));\n            }\n            this.elements.post && (this.elements.post.value = siteinfo.postvalue);\n        });\n    } else {\n        $(\"form\").each(function () {\n            this.elements.sessionreport && (this.elements.sessionreport = options.url.concat(\": bad response \", JSON.stringify(data.sessioninfo), \", current user \", JSON.stringify(siteinfo.user)));\n        });\n    }\n}\n\n$(document).ajaxError(function (event, jqxhr, settings, httperror) {\n    if (jqxhr.readyState != 4) {\n        return;\n    }\n    let data;\n    if (jqxhr.responseText && jqxhr.responseText.charAt(0) === \"{\") {\n        try {\n            data = JSON.parse(jqxhr.responseText);\n        } catch {\n        }\n    }\n    check_message_list(data, settings);\n    if (jqxhr.status !== 502) {\n        let msg = new URL(settings.url, document.baseURI).href + \" API failure: \";\n        if (siteinfo.user && siteinfo.user.email) {\n            msg += \"user \" + siteinfo.user.email + \", \";\n        }\n        msg += jqxhr.status;\n        if (httperror) {\n            msg += \", \" + httperror;\n        }\n        if (jqxhr.responseText) {\n            msg += \", \" + jqxhr.responseText.substring(0, 100);\n        }\n        log_jserror(msg);\n    }\n});\n\n\nlet tracked_out = 0, tracked_after = [];\n\n$.ajaxPrefilter(function (options /* originalOptions, jqxhr */) {\n    if (options.global === false) {\n        return;\n    }\n    let success = options.success || [], error = options.error;\n    function onsuccess(data) {\n        check_message_list(data, options);\n        if (typeof data === \"object\"\n            && data.sessioninfo\n            && options.url.startsWith(siteinfo.site_relative)\n            && (siteinfo.site_relative !== \"\" || !/^(?:[a-z][-a-z0-9+.]*:|\\/|\\.\\.(?:\\/|$))/i.test(options.url))) {\n            check_sessioninfo(data, options);\n        }\n    }\n    function onerror(jqxhr, status, errormsg) {\n        let rjson;\n        if (/application\\/json/.test(jqxhr.getResponseHeader(\"Content-Type\") || \"\")\n            && jqxhr.responseText) {\n            try {\n                rjson = JSON.parse(jqxhr.responseText);\n            } catch {\n            }\n        }\n        if (!rjson\n            || typeof rjson !== \"object\"\n            || rjson.ok !== false) {\n            rjson = {ok: false};\n        }\n        check_message_list(rjson, options);\n        if (!rjson.message_list) {\n            rjson.message_list = [{message: jqxhr_error_ftext(jqxhr, status, errormsg), status: 2}];\n        }\n        for (let i = 0; i !== success.length; ++i) {\n            success[i](rjson, jqxhr, status);\n        }\n    }\n    if (!$.isArray(success)) {\n        success = [success];\n    }\n    options.success = [onsuccess];\n    if (success.length) {\n        Array.prototype.push.apply(options.success, success);\n    }\n    options.error = [];\n    if (error) {\n        Array.prototype.push.apply(options.error, $.isArray(error) ? error : [error]);\n    }\n    options.error.push(onerror);\n    if (options.timeout == null) {\n        options.timeout = 10000;\n    }\n    if (options.dataType == null) {\n        options.dataType = \"json\";\n    }\n    if (options.trackOutstanding) {\n        ++tracked_out;\n    }\n});\n\n$(document).ajaxComplete(function (event, jqxhr, settings) {\n    if (settings.trackOutstanding && --tracked_out === 0) {\n        while (tracked_after.length) {\n            tracked_after.shift()();\n        }\n    }\n});\n\nexport function after_outstanding(f) {\n    if (f === undefined) {\n        return tracked_out > 0;\n    } else if (tracked_out > 0) {\n        tracked_after.push(f);\n    } else {\n        f();\n    }\n}\n\n\nlet cond_out = 0, cond_wait = [], cond_retry = [];\n\nexport function api_conditioner(url, data, method) {\n    if (typeof method === \"string\") {\n        method = {method: method};\n    }\n    return new Promise(function (resolve) {\n        api_conditioner.then(function () {\n            $.ajax(url, Object.assign({\n                data: data, method: \"POST\", cache: false, dataType: \"json\",\n                success: function (data) {\n                    resolve(data);\n                    api_conditioner.done();\n                }\n            }, method || {}));\n        });\n    });\n}\n\napi_conditioner.then = function (f) {\n    // call `f` when ready. `f` calls `api_conditioner.done()` or\n    // `api_conditioner.retry(f)` when done\n    if (cond_out < 5) {\n        ++cond_out;\n        f();\n    } else {\n        cond_wait.push(f);\n    }\n};\n\nfunction api_conditioner_next() {\n    if (cond_out < 1 || cond_out > 5) {\n        throw new Error(\"api_conditioner outstanding error \" + cond_out);\n    }\n    if (cond_wait.length) {\n        cond_wait.shift()();\n    } else {\n        --cond_out;\n    }\n}\n\napi_conditioner.done = function () {\n    if (cond_retry.length) {\n        cond_wait.unshift(...cond_retry);\n        cond_retry.length = 0;\n    }\n    api_conditioner_next();\n};\n\napi_conditioner.retry = function (f) {\n    cond_retry.push(f);\n    api_conditioner_next();\n};\n","// ui-sessionlist.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2020 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { wstorage } from \"./utils.js\";\nimport { hoturl_absolute_base } from \"./hoturl.js\";\nimport { after_outstanding } from \"./xhr.js\";\nimport { hasClass, handle_ui } from \"./ui.js\";\nimport { event_key } from \"./ui-key.js\";\n\n\nlet cookie_set_at;\n\nfunction make_link_callback(elt) {\n    return function () {\n        window.location = elt.href;\n    };\n}\n\nfunction list_digest_update(info) {\n    var add = typeof info === \"string\" ? 1 : 0,\n        digests = wstorage.site_json(false, \"list_digests\") || [],\n        found = -1, now = new Date().getTime();\n    for (var i = 0; i < digests.length; ++i) {\n        var digest = digests[i];\n        if (digest[add] === info) {\n            found = i;\n        } else if (digest[2] < now - 30000) {\n            digests.splice(i, 1);\n            --i;\n        } else if (now <= digest[0]) {\n            now = digest[0] + 1;\n        }\n    }\n    if (found >= 0) {\n        digests[found][2] = now;\n    } else if (add) {\n        digests.push([now, info, now]);\n        found = digests.length - 1;\n    }\n    wstorage.site(false, \"list_digests\", digests);\n    if (found >= 0) {\n        return digests[found][1 - add];\n    } else {\n        return false;\n    }\n}\n\nfunction list_digest_create(info) {\n    var digest = list_digest_update(info);\n    return digest ? \"list\" + digest : info;\n}\n\nfunction list_digest_resolve(info) {\n    var xinfo, m;\n    if ((m = /^list(\\d+)(?=\\s|$)/.exec(info))\n        && (xinfo = list_digest_update(+m[1]))) {\n        return xinfo;\n    } else {\n        return info;\n    }\n}\n\nfunction set_prevnext(info, sitehref) {\n    var m = /(?:^|\\/)(~[^/]+)\\/pset(?:|\\.php)\\/([^/]+)((?:\\/[0-9a-f]+)?)(?=[/?#]|$)/.exec(sitehref), want1, want2;\n    if (m) {\n        info = JSON.parse(info);\n        if (!info.pset) {\n            want2 = m[1] + \"/pset/\" + m[2];\n            want1 = want2 + m[3];\n        } else if (info.pset === m[2]) {\n            want1 = want2 = m[1];\n        } else {\n            return \"\";\n        }\n        var idx = info.items.indexOf(want1);\n        if (idx < 0 && want2 !== want1) {\n            idx = info.items.indexOf(want2);\n        }\n        if (idx >= 0) {\n            return \" \" + JSON.stringify({\n                cur: m[1] + \"/pset/\" + m[2],\n                prev: idx === 0 ? null : info.items[idx-1],\n                next: idx === info.items.length - 1 ? null : info.items[idx+1]\n            });\n        }\n    }\n    return \"\";\n}\n\nfunction set_cookie(info, sitehref) {\n    info = list_digest_resolve(info);\n    let digest = list_digest_create(info);\n    if (sitehref && /(?:^|\\/)pset(?:|\\.php)\\//.test(sitehref)) {\n        digest += set_prevnext(info, sitehref);\n    }\n    cookie_set_at = new Date().getTime();\n    let cookie = `hotlist-info-${cookie_set_at}=${encodeURIComponent(digest)}${siteinfo.cookie_params}; Max-Age=20`, m;\n    if (siteinfo.site_relative && (m = /^[a-z]+:\\/\\/[^/]*(\\/.*)/.exec(hoturl_absolute_base()))) {\n        cookie += \"; Path=\" + m[1];\n    }\n    document.cookie = cookie;\n}\n\nfunction is_listable(sitehref) {\n    return /(?:^|\\/)pset(?:|\\.php)(?:$|\\/)/.test(sitehref);\n}\n\nfunction handle_list(e, href) {\n    let hl, sitehref;\n    if (!href\n        || !href.startsWith(siteinfo.site_relative)\n        || !is_listable((sitehref = href.substring(siteinfo.site_relative.length)))\n        || !(hl = e.closest(\".has-hotlist\"))) {\n        return;\n    }\n    let info = hl.getAttribute(\"data-hotlist\");\n    if (!info) {\n        const event = new CustomEvent(\"pa-hotlist\", {\n            bubbles: true, cancelable: true,\n            detail: {hotlist: null}\n        });\n        hl.dispatchEvent(event);\n        info = event.detail.hotlist;\n        if (info && typeof info !== \"string\") {\n            info = JSON.stringify(info);\n        }\n    }\n    info && set_cookie(info, sitehref);\n}\n\nfunction unload_list() {\n    var hl = document.body.getAttribute(\"data-hotlist\");\n    if (hl && (!cookie_set_at || cookie_set_at + 3 < new Date().getTime())) {\n        set_cookie(hl, location.href);\n    }\n}\n\nfunction list_default_click() {\n    var base = location.href;\n    if (location.hash) {\n        base = base.substring(0, base.length - location.hash.length);\n    }\n    if (this.href.substring(0, base.length + 1) === base + \"#\") {\n        return true;\n    } else if (after_outstanding()) {\n        after_outstanding(make_link_callback(this));\n        return true;\n    } else {\n        return false;\n    }\n}\n\n$(document).on(\"click\", \"a\", function (evt) {\n    if (!hasClass(this, \"ui\")) {\n        if (!event_key.is_default_a(evt)\n            || this.target\n            || !list_default_click.call(this, evt)) {\n            handle_list(this, this.getAttribute(\"href\"));\n        }\n    }\n});\n\n$(document).on(\"submit\", \"form\", function (evt) {\n    if (hasClass(this, \"ui-submit\")) {\n        evt.preventDefault();\n        handle_ui.call(this, evt);\n    } else {\n        handle_list(this, this.getAttribute(\"action\"));\n    }\n});\n\n$(window).on(\"beforeunload\", unload_list);\n\n$(function () {\n    // resolve list digests\n    $(\".has-hotlist\").each(function () {\n        var info = this.getAttribute(\"data-hotlist\");\n        if (info\n            && info.startsWith(\"list\")\n            && (info = list_digest_resolve(info))) {\n            this.setAttribute(\"data-hotlist\", info);\n        }\n    });\n});\n","// encoders.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2020 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nconst ee_re = /[&<>\"']/g,\n    ee_rep = {\"&\": \"&amp;\", \"<\": \"&lt;\", \">\": \"&gt;\", \"\\\"\": \"&quot;\", \"'\": \"&#39;\"};\n\nexport function escape_entities(s) {\n    if (s !== null && typeof s !== \"number\")\n        return s.replace(ee_re, function (match) { return ee_rep[match]; });\n    else\n        return s;\n}\n\nconst ue_re = /&.*?;/g,\n    ue_rep = {\"&amp;\": \"&\", \"&lt;\": \"<\", \"&gt;\": \">\", \"&quot;\": \"\\\"\", \"&apos;\": \"'\", \"&#039;\": \"'\", \"&#39;\": \"'\"};\n\nexport function unescape_entities(s) {\n    if (s !== null && typeof s !== \"number\")\n        return s.replace(ue_re, function (match) { return ue_rep[match]; });\n    else\n        return s;\n}\n\nconst urle_re = /%20|[!~*'()]/g,\n    urle_rep = {\"%20\": \"+\", \"!\": \"%21\", \"~\": \"%7E\", \"*\": \"%2A\", \"'\": \"%27\", \"(\": \"%28\", \")\": \"%29\"};\n\nexport function urlencode(s) {\n    if (s !== null && typeof s !== \"number\")\n        return encodeURIComponent(s).replace(urle_re, function (match) { return urle_rep[match]; });\n    else\n        return s;\n}\n\nexport function urldecode(s) {\n    if (s !== null && typeof s !== \"number\")\n        return decodeURIComponent(s.replace(/\\+/g, \"%20\"));\n    else\n        return s;\n}\n\nexport function text_to_html(text) {\n    var n = document.createElement(\"div\");\n    n.appendChild(document.createTextNode(text));\n    return n.innerHTML;\n}\n\nexport function regexp_quote(s, charclass) {\n    if (!charclass) {\n        s = String(s).replace(/([$()*+./?[\\\\\\]^{|}])/g, '\\\\$1');\n    } else {\n        s = String(s).replace(/([-$()*+./?[\\\\\\]^{|}])/g, '\\\\$1');\n    }\n    return s.replace(/\\x08/g, '\\\\x08');\n}\n\nexport function html_id_encode(s) {\n    return encodeURIComponent(s).replace(/[^-A-Za-z0-9_.%]|%../g, function (s) {\n        if (s.length === 1) {\n            return \"@\" + s.charCodeAt(0).toString(16);\n        } else if (s === \"%2F\") {\n            return \"/\";\n        } else {\n            return \"@\" + s.substring(1);\n        }\n    });\n}\n\nexport function html_id_decode(s) {\n    return decodeURIComponent(s.replace(/@/g, \"%\"));\n}\n","// tooltip.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2020 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { removeClass } from \"./ui.js\";\nimport { text_to_html, escape_entities } from \"./encoders.js\";\n\n\nconst capdir = [\"Top\", \"Right\", \"Bottom\", \"Left\"],\n    lcdir = [\"top\", \"right\", \"bottom\", \"left\"],\n    szdir = [\"height\", \"width\"],\n    SPACE = 8;\n\nfunction geometry_translate(g, offset) {\n    g = $.extend({}, g);\n    g.top += offset.top;\n    g.right += offset.left;\n    g.bottom += offset.top;\n    g.left += offset.left;\n    return g;\n}\n\nfunction cssborder(dir, suffix) {\n    return \"border\" + capdir[dir] + suffix;\n}\n\nfunction cssbc(dir) {\n    return cssborder(dir, \"Color\");\n}\n\nlet roundpixel = Math.round;\nif (window.devicePixelRatio && window.devicePixelRatio > 1) {\n    roundpixel = (function (dpr) {\n        return function (x) { return Math.round(x * dpr) / dpr; };\n    })(window.devicePixelRatio);\n}\n\nfunction to_rgba(c) {\n    var m = c.match(/^rgb\\((.*)\\)$/);\n    return m ? \"rgba(\" + m[1] + \", 1)\" : c;\n}\n\nfunction make_model(color) {\n    const div = document.createElement(\"div\");\n    div.className = \"bubble hidden\" + color;\n    const tail = document.createElement(\"div\");\n    tail.className = \"bubtail bubtail0 nomargin\" + color;\n    div.appendChild(tail);\n    document.body.appendChild(div);\n    return div;\n}\n\nfunction calculate_sizes(color) {\n    const model = make_model(color),\n        $tail = $(model).children(),\n        sizes = [$tail.width(), $tail.height()],\n        css = window.getComputedStyle(model);\n    for (let ds = 0; ds !== 4; ++ds) {\n        let x = css[\"margin\" + capdir[ds]];\n        if (!x || !(x = parseFloat(x))) {\n            x = 0;\n        }\n        sizes[lcdir[ds]] = x;\n    }\n    model.remove();\n    return sizes;\n}\n\n// bubbles and tooltips\nexport function Bubble(content, bubopt) {\n    if (!bubopt && content && typeof content === \"object\") {\n        bubopt = content;\n        content = bubopt.content;\n    } else if (!bubopt)\n        bubopt = {};\n    else if (typeof bubopt === \"string\")\n        bubopt = {color: bubopt};\n\n    var nearpos = null, dirspec = bubopt.dir, dir = null,\n        color = bubopt.color ? \" \" + bubopt.color : \"\";\n\n    let bubdiv = document.createElement(\"div\");\n    bubdiv.className = \"bubble nomargin\" + color;\n    {\n        let bubtail0 = document.createElement(\"div\");\n        bubtail0.className = \"bubtail bubtail0 nomargin\" + color;\n        let bubcontent = document.createElement(\"div\");\n        let bubtail1 = document.createElement(\"div\");\n        bubtail1.className = \"bubtail bubtail1 nomargin\" + color;\n        bubdiv.append(bubtail0, bubcontent, bubtail1);\n        bubtail0.style.width = bubtail0.style.height =\n            bubtail1.style.width = bubtail1.style.height = \"0px\";\n    }\n    document.body.appendChild(bubdiv);\n    if (bubopt[\"pointer-events\"]) {\n        $(bubdiv).css({\"pointer-events\": bubopt[\"pointer-events\"]});\n    }\n    var bubch = bubdiv.childNodes;\n    var sizes = null;\n    var divbw = null;\n\n    function change_tail_direction() {\n        var bw = [0, 0, 0, 0], trw = sizes[1], trh = sizes[0] / 2;\n        divbw = parseFloat($(bubdiv).css(cssborder(dir, \"Width\")));\n        divbw !== divbw && (divbw = 0); // eliminate NaN\n        bw[dir^1] = bw[dir^3] = trh + \"px\";\n        bw[dir^2] = trw + \"px\";\n        bubch[0].style.borderWidth = bw.join(\" \");\n        bw[dir^1] = bw[dir^3] = trh + \"px\";\n        bw[dir^2] = trw + \"px\";\n        bubch[2].style.borderWidth = bw.join(\" \");\n\n        for (var i = 1; i <= 3; ++i)\n            bubch[0].style[lcdir[dir^i]] = bubch[2].style[lcdir[dir^i]] = \"\";\n        bubch[0].style[lcdir[dir]] = (-trw - divbw) + \"px\";\n        // Offset the inner triangle so that the border width in the diagonal\n        // part of the tail, is visually similar to the border width\n        var trdelta = (divbw / trh) * Math.sqrt(trw * trw + trh * trh);\n        bubch[2].style[lcdir[dir]] = (-trw - divbw + trdelta) + \"px\";\n\n        for (i = 0; i < 3; i += 2)\n            bubch[i].style.borderLeftColor = bubch[i].style.borderRightColor =\n            bubch[i].style.borderTopColor = bubch[i].style.borderBottomColor = \"transparent\";\n\n        var yc = to_rgba($(bubdiv).css(\"backgroundColor\")).replace(/([\\d.]+)\\)/, function (s, p1) {\n            return (0.75 * p1 + 0.25) + \")\";\n        });\n        bubch[0].style[cssbc(dir^2)] = $(bubdiv).css(cssbc(dir));\n        bubch[2].style[cssbc(dir^2)] = yc;\n    }\n\n    function constrainmid(nearpos, wpos, ds, ds2) {\n        var z0 = nearpos[lcdir[ds]], z1 = nearpos[lcdir[ds^2]],\n            z = (1 - ds2) * z0 + ds2 * z1;\n        z = Math.max(z, Math.min(z1, wpos[lcdir[ds]] + SPACE));\n        return Math.min(z, Math.max(z0, wpos[lcdir[ds^2]] - SPACE));\n    }\n\n    function constrain(za, wpos, bpos, ds, ds2, noconstrain) {\n        var z0 = wpos[lcdir[ds]], z1 = wpos[lcdir[ds^2]],\n            bdim = bpos[szdir[ds&1]],\n            z = za - ds2 * bdim;\n        if (!noconstrain && z < z0 + SPACE)\n            z = Math.min(za - sizes[0], z0 + SPACE);\n        else if (!noconstrain && z + bdim > z1 - SPACE)\n            z = Math.max(za + sizes[0] - bdim, z1 - SPACE - bdim);\n        return z;\n    }\n\n    function bpos_wconstraint(wpos, ds) {\n        var xw = Math.max(ds === 3 ? 0 : nearpos.left - wpos.left,\n                          ds === 1 ? 0 : wpos.right - nearpos.right);\n        if ((ds === \"h\" || ds === 1 || ds === 3) && xw > 100)\n            return Math.min(wpos.width, xw) - 3*SPACE;\n        else\n            return wpos.width - 3*SPACE;\n    }\n\n    function make_bpos(wpos, ds) {\n        var $b = $(bubdiv);\n        $b.css(\"maxWidth\", \"\");\n        var bg = $b.geometry(true);\n        var wconstraint = bpos_wconstraint(wpos, ds);\n        if (wconstraint < bg.width) {\n            $b.css(\"maxWidth\", wconstraint);\n            bg = $b.geometry(true);\n        }\n        // bpos[D] is the furthest position in direction D, assuming\n        // the bubble was placed on that side. E.g., bpos[0] is the\n        // top of the bubble, assuming the bubble is placed over the\n        // reference.\n        var bpos = [nearpos.top - sizes.bottom - bg.height - sizes[0],\n                    nearpos.right + sizes.left + bg.width + sizes[0],\n                    nearpos.bottom + sizes.top + bg.height + sizes[0],\n                    nearpos.left - sizes.right - bg.width - sizes[0]];\n        bpos.width = bg.width;\n        bpos.height = bg.height;\n        bpos.wconstraint = wconstraint;\n        return bpos;\n    }\n\n    function remake_bpos(bpos, wpos, ds) {\n        var wconstraint = bpos_wconstraint(wpos, ds);\n        if ((wconstraint < bpos.wconstraint && wconstraint < bpos.width)\n            || (wconstraint > bpos.wconstraint && bpos.width >= bpos.wconstraint))\n            bpos = make_bpos(wpos, ds);\n        return bpos;\n    }\n\n    function parse_dirspec(dirspec, pos) {\n        var res;\n        if (dirspec.length > pos\n            && (res = \"0123trblnesw\".indexOf(dirspec.charAt(pos))) >= 0)\n            return res % 4;\n        return -1;\n    }\n\n    function csscornerradius(corner, index) {\n        var divbr = $(bubdiv).css(\"border\" + corner + \"Radius\"), pos;\n        if (!divbr)\n            return 0;\n        if ((pos = divbr.indexOf(\" \")) > -1)\n            divbr = index ? divbr.substring(pos + 1) : divbr.substring(0, pos);\n        return parseFloat(divbr);\n    }\n\n    function constrainradius(x, bpos, ds) {\n        var x0, x1;\n        if (ds & 1) {\n            x0 = csscornerradius(capdir[0] + capdir[ds], 1);\n            x1 = csscornerradius(capdir[2] + capdir[ds], 1);\n        } else {\n            x0 = csscornerradius(capdir[ds] + capdir[3], 1);\n            x1 = csscornerradius(capdir[ds] + capdir[1], 1);\n        }\n        return Math.min(Math.max(x, x0), bpos[szdir[(ds&1)^1]] - x1 - sizes[0]);\n    }\n\n    function show() {\n        sizes = sizes || calculate_sizes(color);\n\n        // parse dirspec\n        if (dirspec == null)\n            dirspec = \"r\";\n        var noflip = /!/.test(dirspec),\n            noconstrain = /\\*/.test(dirspec),\n            dsx = dirspec.replace(/[^a0-3neswtrblhv]/, \"\"),\n            ds = parse_dirspec(dsx, 0),\n            ds2 = parse_dirspec(dsx, 1);\n        if (ds >= 0 && ds2 >= 0 && (ds2 & 1) != (ds & 1))\n            ds2 = (ds2 === 1 || ds2 === 2 ? 1 : 0);\n        else\n            ds2 = 0.5;\n        if (ds < 0)\n            ds = /^[ahv]$/.test(dsx) ? dsx : \"a\";\n\n        var wpos = $(window).geometry();\n        var bpos = make_bpos(wpos, dsx);\n\n        if (ds === \"a\") {\n            if (bpos.height + sizes[0] > Math.max(nearpos.top - wpos.top, wpos.bottom - nearpos.bottom)) {\n                ds = \"h\";\n                bpos = remake_bpos(bpos, wpos, ds);\n            } else\n                ds = \"v\";\n        }\n\n        var wedge = [wpos.top + 3*SPACE, wpos.right - 3*SPACE,\n                     wpos.bottom - 3*SPACE, wpos.left + 3*SPACE];\n        if ((ds === \"v\" || ds === 0 || ds === 2) && !noflip && ds2 < 0\n            && bpos[2] > wedge[2] && bpos[0] < wedge[0]\n            && (bpos[3] >= wedge[3] || bpos[1] <= wedge[1])) {\n            ds = \"h\";\n            bpos = remake_bpos(bpos, wpos, ds);\n        }\n        if ((ds === \"v\" && bpos[2] > wedge[2] && bpos[0] > wedge[0])\n            || (ds === 0 && !noflip && bpos[2] > wpos.bottom\n                && wpos.top - bpos[0] < bpos[2] - wpos.bottom)\n            || (ds === 2 && (noflip || bpos[0] >= wpos.top + SPACE)))\n            ds = 2;\n        else if (ds === \"v\" || ds === 0 || ds === 2)\n            ds = 0;\n        else if ((ds === \"h\" && bpos[3] - wpos.left < wpos.right - bpos[1])\n                 || (ds === 1 && !noflip && bpos[3] < wpos.left)\n                 || (ds === 3 && (noflip || bpos[1] <= wpos.right - SPACE)))\n            ds = 3;\n        else\n            ds = 1;\n        bpos = remake_bpos(bpos, wpos, ds);\n\n        if (ds !== dir) {\n            dir = ds;\n            change_tail_direction();\n        }\n\n        var x, y, xa, ya, d;\n        var divbw = parseFloat($(bubdiv).css(cssborder(ds & 1 ? 0 : 3, \"Width\")));\n        if (ds & 1) {\n            ya = constrainmid(nearpos, wpos, 0, ds2);\n            y = constrain(ya, wpos, bpos, 0, ds2, noconstrain);\n            d = constrainradius(roundpixel(ya - y - sizes[0] / 2 - divbw), bpos, ds);\n            bubch[0].style.top = bubch[2].style.top = d + \"px\";\n\n            if (ds == 1)\n                x = nearpos.left - sizes.right - bpos.width - sizes[1] - 1;\n            else\n                x = nearpos.right + sizes.left + sizes[1];\n        } else {\n            xa = constrainmid(nearpos, wpos, 3, ds2);\n            x = constrain(xa, wpos, bpos, 3, ds2, noconstrain);\n            d = constrainradius(roundpixel(xa - x - sizes[0] / 2 - divbw), bpos, ds);\n            bubch[0].style.left = bubch[2].style.left = d + \"px\";\n\n            if (ds == 0)\n                y = nearpos.bottom + sizes.top + sizes[1];\n            else\n                y = nearpos.top - sizes.bottom - bpos.height - sizes[1] - 1;\n        }\n\n        bubdiv.style.left = roundpixel(x) + \"px\";\n        bubdiv.style.top = roundpixel(y) + \"px\";\n        bubdiv.style.visibility = \"visible\";\n    }\n\n    function remove() {\n        bubdiv && bubdiv.parentElement.removeChild(bubdiv);\n        bubdiv = null;\n    }\n\n    var bubble = {\n        near: function (epos, reference) {\n            if (typeof epos === \"string\" || epos.tagName || epos.jquery) {\n                epos = $(epos);\n                if (dirspec == null && epos[0]) {\n                    dirspec = epos[0].getAttribute(\"data-tooltip-dir\");\n                }\n                epos = epos.geometry(true);\n            }\n            for (let i = 0; i < 4; ++i) {\n                if (!(lcdir[i] in epos) && (lcdir[i ^ 2] in epos))\n                    epos[lcdir[i]] = epos[lcdir[i ^ 2]];\n            }\n            if (reference && (reference = $(reference)) && reference.length\n                && reference[0] != window) {\n                epos = geometry_translate(epos, reference.geometry());\n            }\n            nearpos = epos;\n            show();\n            return bubble;\n        },\n        at: function (x, y, reference) {\n            return bubble.near({top: y, left: x}, reference);\n        },\n        dir: function (dir) {\n            dirspec = dir;\n            return bubble;\n        },\n        remove: remove,\n        color: function (newcolor) {\n            newcolor = newcolor ? \" \" + newcolor : \"\";\n            if (color !== newcolor) {\n                color = newcolor;\n                bubdiv.className = \"bubble\" + color;\n                bubch[0].className = \"bubtail bubtail0\" + color;\n                bubch[2].className = \"bubtail bubtail1\" + color;\n                dir = sizes = null;\n                nearpos && show();\n            }\n            return bubble;\n        },\n        html: function (content) {\n            var n = bubch[1];\n            if (content === undefined)\n                return n.innerHTML;\n            if (typeof content === \"string\"\n                && content === n.innerHTML\n                && bubdiv.style.visibility === \"visible\")\n                return bubble;\n            nearpos && $(bubdiv).css({maxWidth: \"\", left: \"\", top: \"\"});\n            if (typeof content === \"string\")\n                n.innerHTML = content;\n            else {\n                while (n.childNodes.length)\n                    n.removeChild(n.childNodes[0]);\n                if (content && content.jquery)\n                    content.appendTo(n);\n                else\n                    n.appendChild(content);\n            }\n            nearpos && show();\n            return bubble;\n        },\n        text: function (text) {\n            if (text === undefined)\n                return $(bubch[1]).text();\n            else\n                return bubble.html(text ? text_to_html(text) : text);\n        },\n        content_node: function () {\n            return bubch[1].firstChild;\n        },\n        hover: function (enter, leave) {\n            $(bubdiv).hover(enter, leave);\n            return bubble;\n        },\n        removeOn: function (jq, event) {\n            if (arguments.length > 1)\n                $(jq).on(event, remove);\n            else if (bubdiv)\n                $(bubdiv).on(jq, remove);\n            return bubble;\n        },\n        self: function () {\n            return bubdiv ? $(bubdiv) : null;\n        },\n        outerHTML: function () {\n            return bubdiv ? bubdiv.outerHTML : null;\n        }\n    };\n\n    content && bubble.html(content);\n    return bubble;\n}\n\n\nlet builders = {};\n\nfunction prepare_info(elt, info) {\n    var xinfo = elt.getAttribute(\"data-tooltip-info\");\n    if (xinfo) {\n        if (typeof xinfo === \"string\" && xinfo.charAt(0) === \"{\") {\n            xinfo = JSON.parse(xinfo);\n        } else if (typeof xinfo === \"string\") {\n            xinfo = {builder: xinfo};\n        }\n        info = $.extend(xinfo, info);\n    }\n    if (info.builder && builders[info.builder]) {\n        info = builders[info.builder].call(elt, info) || info;\n    }\n    if (info.dir == null || elt.hasAttribute(\"data-tooltip-dir\")) {\n        info.dir = elt.getAttribute(\"data-tooltip-dir\") || \"v\";\n    }\n    if (info.type == null || elt.hasAttribute(\"data-tooltip-type\")) {\n        info.type = elt.getAttribute(\"data-tooltip-type\");\n    }\n    if (info.className == null || elt.hasAttribute(\"data-tooltip-class\")) {\n        info.className = elt.getAttribute(\"data-tooltip-class\") || \"tooltip dark\";\n    }\n    if (elt.hasAttribute(\"data-tooltip\")) {\n        info.content = elt.getAttribute(\"data-tooltip\");\n    } else if (info.content == null) {\n        if (elt.hasAttribute(\"aria-label\")) {\n            info.content = elt.getAttribute(\"aria-label\");\n        } else if (elt.hasAttribute(\"title\")) {\n            info.content = elt.getAttribute(\"title\");\n        }\n    }\n    if (elt.hasAttribute(\"data-tooltip-delay\")) {\n        info.delay = parseInt(elt.getAttribute(\"data-tooltip-delay\"));\n    } else if (info.delay == null && (info.type == null || info.type === \"hover\")) {\n        info.delay = 150;\n    }\n    return info;\n}\n\nfunction show_tooltip(info) {\n    if (window.disable_tooltip) {\n        return null;\n    }\n\n    const self = this;\n    if (info && typeof info === \"string\") {\n        info = {builder: info};\n    } else {\n        info = Object.assign({}, info || {});\n    }\n    info = prepare_info(self, info);\n    info.element = this;\n\n    var tt, bub = null, to = null, near = null, delayto = null,\n        refcount = 1, content = info.content;\n\n    function erase() {\n        to = clearTimeout(to);\n        bub && bub.remove();\n        $(self).removeData(\"tooltipState\");\n        if (window.global_tooltip === tt) {\n            window.global_tooltip = null;\n        }\n    }\n\n    function show_bub() {\n        if (delayto || refcount === 0) {\n            // do not show\n            return;\n        }\n        if (!content) {\n            // remove\n            bub && bub.remove();\n            bub = near = null;\n        } else if (content instanceof Promise) {\n            content.then(function (nc) {\n                content = nc;\n                show_bub();\n            });\n        } else if (bub) {\n            bub.html(content);\n        } else {\n            bub = Bubble(content, {color: info.className, dir: info.dir});\n            near = info.near || info.element;\n            bub.near(near).hover(tt.enter, tt.exit);\n        }\n    }\n\n    tt = {\n        enter: function () {\n            to = clearTimeout(to);\n            ++refcount;\n            return tt;\n        },\n        exit: function () {\n            var delay = info.type === \"focus\" ? 0 : 200;\n            to = clearTimeout(to);\n            if (--refcount <= 0 && info.type !== \"sticky\") {\n                to = setTimeout(erase, delay);\n            }\n            return tt;\n        },\n        erase: erase,\n        _element: self,\n        html: function (new_content) {\n            if (new_content === undefined) {\n                return content;\n            } else {\n                content = new_content;\n                show_bub();\n                return tt;\n            }\n        },\n        text: function (new_text) {\n            return tt.html(escape_entities(new_text));\n        },\n        near: function () {\n            return near;\n        },\n        noDelayClass: function () {\n            return info.noDelayClass;\n        }\n    };\n\n    {\n        let tx = window.global_tooltip;\n        if (tx\n            && tx._element === info.element\n            && tx.html() === content) {\n            tt = tx;\n        } else {\n            tx && tx.erase();\n            $(self).data(\"tooltipState\", tt);\n            if (info.delay\n                && (!info.noDelayClass\n                    || !tx\n                    || tx.noDelayClass() !== info.noDelayClass)) {\n                delayto = setTimeout(function () {\n                    delayto = null;\n                    content && !bub && show_bub();\n                }, info.delay);\n            } else {\n                show_bub();\n            }\n            window.global_tooltip = tt;\n        }\n    }\n    return tt;\n}\n\nfunction ttenter() {\n    const tt = $(this).data(\"tooltipState\");\n    tt ? tt.enter() : show_tooltip.call(this);\n}\n\nfunction ttleave() {\n    var tt = $(this).data(\"tooltipState\");\n    tt && tt.exit();\n}\n\nexport function tooltip() {\n    removeClass(this, \"need-tooltip\");\n    var tt = this.getAttribute(\"data-tooltip-type\");\n    if (tt === \"focus\") {\n        $(this).on(\"focus\", ttenter).on(\"blur\", ttleave);\n    } else {\n        $(this).hover(ttenter, ttleave);\n    }\n}\n\ntooltip.erase = function () {\n    var tt = this === tooltip ? window.global_tooltip : $(this).data(\"tooltipState\");\n    tt && tt.erase();\n};\n\ntooltip.add_builder = function (name, f) {\n    builders[name] = f;\n};\n\ntooltip.enter = function (e, info) {\n    const tt = $(e).data(\"tooltipState\");\n    tt ? tt.enter() : show_tooltip.call(e, info);\n};\n\ntooltip.leave = function (e) {\n    ttleave.call(e);\n};\n\n$(function () { $(\".need-tooltip\").each(tooltip); });\n","// pset.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2020 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { handle_ui, fold61, addClass, hasClass, $e } from \"./ui.js\";\nimport { event_key, event_modkey } from \"./ui-key.js\";\nimport { hoturl } from \"./hoturl.js\";\nimport { escape_entities } from \"./encoders.js\";\nimport { Bubble } from \"./tooltip.js\";\n\n\nhandle_ui.on(\"js-repo-copy\", function () {\n    var node = document.createTextNode(this.getAttribute(\"data-pa-repo\"));\n    var bub = Bubble(node, {color: \"tooltip\", dir: \"t\"});\n    bub.near(this);\n    var range = document.createRange();\n    range.selectNode(node);\n    window.getSelection().removeAllRanges();\n    window.getSelection().addRange(range);\n    try {\n        document.execCommand(\"copy\");\n    } catch {\n    }\n    window.getSelection().removeAllRanges();\n    bub.remove();\n    if (window.global_tooltip && window.global_tooltip.elt == this) {\n        window.global_tooltip.text(this.getAttribute(\"data-pa-repo\"));\n    }\n});\n\nhandle_ui.on(\"js-repo-list\", function (event) {\n    var self = this;\n    $.ajax(hoturl(\"=api/repositories\", {u: this.getAttribute(\"data-pa-user\")}), {\n        method: \"POST\", cache: false,\n        success: function (data) {\n            var t = \"Error loading repositories\";\n            if (data.repositories && data.repositories.length) {\n                t = \"Repositories: \";\n                for (var i = 0; i < data.repositories.length; ++i) {\n                    var r = data.repositories[i];\n                    i && (t += \", \");\n                    t += \"<a href=\\\"\" + escape_entities(r.url) + \"\\\">\" + escape_entities(r.name) + \"</a>\";\n                }\n            } else if (data.repositories) {\n                t = \"No repositories\";\n            }\n            $(\"<div style=\\\"font-size:medium;font-weight:normal\\\"></div>\").html(t).insertAfter(self);\n        }\n    });\n    event.preventDefault();\n});\n\nhandle_ui.on(\"js-pset-viewoptions\", function () {\n    fold61(this.nextSibling, this.parentNode);\n});\n\nhandle_ui.on(\"js-pset-setgrader\", function () {\n    var $form = $(this.closest(\"form\"));\n    $.ajax($form[0].getAttribute(\"action\"), {\n        data: $form.serializeWith({}),\n        type: \"POST\", cache: false,\n        dataType: \"json\",\n        success: function (data) {\n            var a;\n            $form.find(\".ajaxsave61\").html(data.ok ? \"Saved\" : \"<span class='error'>Error: \" + data.error + \"</span>\");\n            if (data.ok && (a = $form.find(\"a.actas\")).length) {\n                a.attr(\"href\", a.attr(\"href\").replace(/actas=[^&;]+/, \"actas=\" + encodeURIComponent(data.grader_email)));\n            }\n        },\n        error: function () {\n            $form.find(\".ajaxsave61\").html(\"<span class='error'>Failed</span>\");\n        }\n    });\n});\n\nhandle_ui.on(\"js-pset-setcommit\", function () {\n    this.closest(\"form\").submit();\n});\n\nhandle_ui.on(\"pa-flagger\", function () {\n    let self = this, form = self.closest(\"form\");\n    if (!form.elements.flagreason) {\n        self.parentElement.append($e(\"div\", \"flagreasoneditor mt-1\",\n            $e(\"span\", \"flagreason mr-2\", \"Why do you want to flag this commit?\"),\n            $e(\"input\", {type: \"text\", name: \"flagreason\", value: \"\", placeholder: \"Optional reason\", class: \"need-autogrow mr-2\"}),\n            $e(\"button\", {type: \"button\", class: \"ui pa-flagger\"}, \"OK\"),\n            $e(\"span\", \"ajaxsave61\")));\n        $(form.elements.flagreason).on(\"keypress\", function (evt) {\n            if (!event_modkey(evt) && event_key(evt) === \"Enter\") {\n                evt.preventDefault();\n                evt.stopImmediatePropagation();\n                $(self).click();\n            }\n        }).autogrow()[0].focus();\n        addClass(self, \"hidden\");\n    } else {\n        $.post(hoturl(\"=api/flag\", {psetinfo: this, flagid: \"new\"}),\n            {reason: form.elements.flagreason.value},\n            function (data) {\n                if (data && data.ok) {\n                    $(form).find(\".flagreasoneditor\").remove();\n                    $(self).replaceWith($e(\"strong\", null, \"Flagged\"));\n                } else {\n                    $(form).find(\".ajaxsave61\").html('<span class=\"error\">Failed</span>');\n                }\n            });\n    }\n});\n\nfunction apply_flagger(e, data) {\n    const psetinfo = e.closest(\".pa-psetinfo\"),\n        grade = !!data.gradecommit && data.gradecommit === psetinfo.getAttribute(\"data-pa-commit\");\n    $(psetinfo).find(\".pa-flagger-grade\").toggleClass(\"active\", grade);\n    $(psetinfo).find(\".pa-flagger-gradelock\").toggleClass(\"active\", grade && data.gradelock);\n    $(psetinfo).find(\".pa-flagger-nograde\").toggleClass(\"active\", data.gradecommit === \"\");\n}\n\nfunction make_flagger(what) {\n    return function () {\n        const self = this, arg = {psetinfo: this, [what]: hasClass(this, \"active\") ? 0 : 1};\n        if (what === \"gradelock\") {\n            arg.grade = 1;\n        }\n        $.post(hoturl(\"=api/gradeflag\", arg), {}, function (data) {\n            data && data.ok && apply_flagger(self, data);\n        });\n    };\n}\n\nhandle_ui.on(\"pa-flagger-grade\", make_flagger(\"grade\"));\nhandle_ui.on(\"pa-flagger-nograde\", make_flagger(\"nograde\"));\nhandle_ui.on(\"pa-flagger-gradelock\", make_flagger(\"gradelock\"));\n\nhandle_ui.on(\"pa-flagger-resolve\", function () {\n    let self = this, form = self.closest(\"form\");\n    $.post(hoturl(\"=api/flag\", {psetinfo: this, flagid: this.getAttribute(\"data-flagid\"), resolve: 1}), {},\n        function (data) {\n            if (data && data.ok) {\n                $(self).replaceWith(\"<strong>Resolved</strong>\");\n            } else {\n                $(form).find(\".ajaxsave61\").html('<span class=\"error\">Failed</span>');\n            }\n        });\n});\n","// diff.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { ImmediatePromise } from \"./utils.js\";\nimport { hasClass, addClass, removeClass, toggleClass, fold61, handle_ui } from \"./ui.js\";\nimport { hoturl } from \"./hoturl.js\";\nimport { html_id_encode, html_id_decode } from \"./encoders.js\";\n\n\nconst BACKWARD = 1;\nconst ANYFILE = 2;\nconst decorators = [];\n\nexport class Filediff {\n    constructor(e) {\n        if (e.nodeType !== Node.ELEMENT_NODE || !hasClass(e, \"pa-filediff\")) {\n            throw new Error;\n        }\n        this.element = e;\n    }\n    static closest(e) {\n        const ed = e.closest(\".pa-filediff\");\n        return ed ? new Filediff(ed) : null;\n    }\n    static referenced(e) {\n        const er = e.closest(\".pa-fileref\");\n        let fd;\n        if (er.firstChild.tagName === \"A\") {\n            fd = Filediff.by_hash(er.firstChild.hash);\n        }\n        return fd || Filediff.closest(e);\n    }\n    static by_file(fn) {\n        const e = document.getElementById(\"F\" + html_id_encode(fn));\n        return e ? new Filediff(e) : null;\n    }\n    static by_hash(hash) {\n        let e;\n        if (hash.startsWith(\"#F\") || hash.startsWith(\"#U\")) {\n            e = document.getElementById(hash.substring(1));\n        }\n        return e ? new Filediff(e) : null;\n    }\n    static by_href(href) {\n        const m = href.match(/^[^#]*#(?:L[ab]\\d+|)([UF][-A-Za-z0-9_.@/]+)$/),\n            e = m && m[1] ? document.getElementById(m[1]) : null;\n        return e ? new Filediff(e) : null;\n    }\n    static add_decorator(f) {\n        decorators.push(f);\n    }\n    load() {\n        if (!hasClass(this.element, \"need-load\")) {\n            return new ImmediatePromise(this);\n        } else {\n            const p = this.element.closest(\".pa-psetinfo\"),\n                wdiff = hasClass(this.element, \"pa-wdiff\");\n            removeClass(this.element, \"need-load\");\n            return new Promise(resolve => {\n                $.ajax(hoturl(\"api/filediff\", {psetinfo: p, wdiff: wdiff ? 1 : null}), {\n                    type: \"GET\", cache: false, dataType: \"json\",\n                    data: {\n                        file: this.file,\n                        base_commit: p.getAttribute(\"data-pa-base-commit\"),\n                        commit: p.getAttribute(\"data-pa-commit\")\n                    },\n                    success: data => {\n                        if (data.ok && data.content_html) {\n                            const result = $(data.content_html);\n                            $(this.element).html(result.children());\n                            this.decorate();\n                            $pa.render_text_page();\n                        }\n                        resolve(this);\n                    }\n                })\n            });\n        }\n    }\n    load_if(show) {\n        if (!show) {\n            return new ImmediatePromise(this);\n        } else {\n            return this.load();\n        }\n    }\n    decorate() {\n        for (let df of decorators) {\n            df(this);\n        }\n    }\n    static decorate_page() {\n        $(\".pa-filediff.need-decorate\").each(function () {\n            removeClass(this, \"need-decorate\");\n            if (!hasClass(this, \"need-load\")) {\n                (new Filediff(this)).decorate();\n            }\n        });\n    }\n    toggle(show) {\n        if (show == null) {\n            show = hasClass(this.element, \"hidden\");\n        }\n        const h3 = this.element.previousSibling,\n            h3fd = h3 && hasClass(h3, \"pa-fileref\") ? Filediff.referenced(h3) : null,\n            isarrow = h3fd && h3fd.element === this.element;\n        fold61(this.element, isarrow ? h3 : null, show);\n    }\n    toggle_show_left(show) {\n        if (show == null) {\n            show = hasClass(this.element, \"pa-hide-left\");\n        }\n        toggleClass(this.element, \"pa-hide-left\", !show);\n        $(this.element.previousSibling).find(\".pa-diff-toggle-hide-left\").toggleClass(\"btn-primary\", show);\n    }\n    get file() {\n        const id = this.element.id;\n        if (id.charAt(0) === \"U\") {\n            const sl = id.indexOf(\"/F\");\n            return html_id_decode(id.substring(sl + 2));\n        } else {\n            return html_id_decode(id.substring(1));\n        }\n    }\n    lineid_anchor(lineid) {\n        return \"L\".concat(lineid, this.element.id);\n    }\n    lines() {\n        return Linediff.all(this.element.firstChild);\n    }\n    line(isb, lineno, start) {\n        if (lineno == null) {\n            lineno = +isb.substring(1);\n            isb = isb.charAt(0) === \"b\";\n        }\n        return this.load().then(() => {\n            for (let ln of Linediff.all(start || this.element.firstChild)) {\n                if (ln.base_contains(isb, lineno)) {\n                    return ln;\n                } else if (ln.expansion_contains(isb, lineno)) {\n                    return ln.expand().then(start => this.line(isb, lineno, start));\n                }\n            }\n            throw null;\n        });\n    }\n    get psetinfo() {\n        if (this._psetinfo === undefined) {\n            this._psetinfo = this.element.closest(\".pa-psetinfo\");\n        }\n        return this._psetinfo;\n    }\n    get pset() {\n        return this.psetinfo.getAttribute(\"data-pa-pset\");\n    }\n    get repourl() {\n        return this.psetinfo.getAttribute(\"data-pa-repourl\");\n    }\n    scroll_position() {\n        const cr = this.element.getBoundingClientRect();\n        let top = cr.y + window.scrollY;\n        const preve = this.element.previousSibling;\n        if (preve && preve.nodeName === \"H3\") {\n            top -= preve.getBoundingClientRect().height + 8;\n        }\n        return Math.max(top - 8, 0);\n    }\n    static define_method(name, f) {\n        if (!Object.prototype.hasOwnProperty.call(Filediff.prototype, name)) {\n            Object.defineProperty(Filediff.prototype, name, {\n                value: f, enumerable: false, configurable: true, writable: true\n            });\n        }\n    }\n}\n\nexport class Linediff {\n    constructor(e) {\n        if (e.nodeType !== Node.ELEMENT_NODE || !hasClass(e, \"pa-dl\")) {\n            throw new Error;\n        }\n        this.element = e;\n    }\n    static closest(e) {\n        const el = e.closest(\".pa-dl\");\n        return el ? new Linediff(el) : null;\n    }\n    get filediff() {\n        if (this._filediff === undefined) {\n            this._filediff = Filediff.closest(this.element);\n        }\n        return this._filediff;\n    }\n    get file() {\n        return this.filediff.file;\n    }\n    get note_lineid() {\n        const e = this.element;\n        let re, lm, dash;\n        if (e.hasAttribute(\"data-landmark\")) {\n            return e.getAttribute(\"data-landmark\");\n        } else if (hasClass(e, \"pa-dlr\")\n                   && (re = e.lastChild.firstChild)\n                   && (lm = re.getAttribute(\"data-landmark\"))\n                   && (dash = lm.indexOf(\"-\")) >= 0) {\n            return (hasClass(e, \"pa-gd\") ? \"a\" : \"b\").concat(lm.substring(dash + 1));\n        } else if (hasClass(e, \"pa-gd\")) {\n            return \"a\".concat(e.firstChild.getAttribute(\"data-landmark\"));\n        } else {\n            return \"b\".concat(e.firstChild.nextSibling.getAttribute(\"data-landmark\"));\n        }\n    }\n    get linea() {\n        const e = this.element;\n        if (hasClass(e, \"pa-gc\") || (hasClass(e, \"pa-gd\") && !hasClass(e, \"pa-dlr\"))) {\n            return +e.firstChild.getAttribute(\"data-landmark\");\n        } else {\n            return this.linea_within(Infinity);\n        }\n    }\n    get lineb() {\n        const lineid = this.note_lineid;\n        if (lineid.startsWith(\"b\")) {\n            return +lineid.substring(1);\n        } else {\n            return null;\n        }\n    }\n    linea_within(bound) {\n        let e = this.element;\n        while (e && bound >= 0) {\n            if (hasClass(e, \"pa-gc\")) {\n                return +e.firstChild.getAttribute(\"data-landmark\");\n            }\n            e = e.previousSibling;\n            --bound;\n        }\n        return 0;\n    }\n    get psetinfo() {\n        return this.filediff.psetinfo;\n    }\n    get pset() {\n        return this.filediff.pset;\n    }\n    get repourl() {\n        return this.filediff.repourl;\n    }\n    get hash() {\n        const e = this.element, fd = this.filediff, uf = fd.element.id;\n        if (e.hasAttribute(\"data-landmark\")) {\n            return \"#L\".concat(e.getAttribute(\"data-landmark\"), uf);\n        } else if (hasClass(e, \"pa-gd\")) {\n            return \"#La\".concat(e.firstChild.getAttribute(\"data-landmark\"), uf);\n        } else if (hasClass(e, \"pa-gi\") || hasClass(e, \"pa-gc\")) {\n            return \"#Lb\".concat(e.firstChild.nextSibling.getAttribute(\"data-landmark\"), uf);\n        } else {\n            return null;\n        }\n    }\n    is_visible() {\n        return !!this.element.offsetParent;\n    }\n    visible_predecessor() {\n        if (!this.element.offsetParent) {\n            for (let e = this.element.previousSibling; e; e = e.previousSibling) {\n                if (hasClass(e, \"pa-dlr\")) {\n                    return new Linediff(e);\n                }\n            }\n        }\n        return this;\n    }\n    visible_source() {\n        for (let ln of Linediff.all(this, BACKWARD)) {\n            if (ln.is_visible() && ln.is_source())\n                return ln;\n        }\n        return null;\n    }\n    is_base() {\n        return /^pa-dl pa-g[idc]/.test(this.element.className);\n    }\n    base_contains(isb, lineno) {\n        const e = this.element;\n        return /^pa-dl pa-g[idc]/.test(e.className)\n            && (isb ? e.firstChild.nextSibling : e.firstChild).getAttribute(\"data-landmark\") == lineno;\n    }\n    is_source() {\n        return / pa-g[idc]/.test(this.element.className);\n    }\n    is_expandable() {\n        return this.element.hasAttribute(\"data-expandmark\");\n    }\n    expansion_contains(isb, lineno) {\n        const em = this.element.getAttribute(\"data-expandmark\"),\n            m = em ? em.match(/^a(\\d+)b(\\d+)\\+(\\d*)$/) : null;\n        if (m) {\n            const delta = m[isb ? 2 : 1] - lineno;\n            return delta >= 0 && (!m[3] || delta < m[3]);\n        } else {\n            return false;\n        }\n    }\n    expand() {\n        const e = this.element,\n            em = e.getAttribute(\"data-expandmark\"),\n            m = em ? em.match(/^a(\\d+)b(\\d+)\\+(\\d*)$/) : null;\n        if (!m || m[3] === \"0\") {\n            return new ImmediatePromise(this); // xxx\n        }\n        e.removeAttribute(\"data-expandmark\");\n        const a0 = +m[1], b0 = +m[2], args = {\n            psetinfo: this.element, file: this.file, fromline: b0\n        };\n        m[3] !== \"\" && (args.linecount = +m[3]);\n        return new Promise(resolve => {\n            $.ajax(hoturl(\"api/blob\", args), {\n                success: function (data) {\n                    if (data.ok && data.data) {\n                        const lines = data.data.replace(/\\n$/, \"\").split(\"\\n\");\n                        for (let i = lines.length - 1; i >= 0; --i) {\n                            const t = '<div class=\"pa-dl pa-gc\"><div class=\"pa-da\" data-landmark=\"'.concat(a0 + i, '\"></div><div class=\"pa-db\" data-landmark=\"', b0 + i, '\"></div><div class=\"pa-dd\"></div></div>');\n                            $(t).insertAfter(e).find(\".pa-dd\").text(lines[i]);\n                        }\n                        const next = e.nextSibling;\n                        $(e).remove();\n                        const fd = Filediff.closest(next);\n                        if (hasClass(fd.element, \"pa-highlight\")) {\n                            fd.highlight();\n                        }\n                        resolve(new Linediff(next));\n                    }\n                }\n            });\n        });\n    }\n    is_annotation() {\n        return hasClass(this.element, \"pa-gn\");\n    }\n    is_note() {\n        return hasClass(this.element, \"pa-gw\");\n    }\n    upper_bound(isb, lineno) {\n        if (lineno == null) {\n            lineno = +isb.substring(1);\n            isb = isb.charAt(0) === \"b\";\n        }\n        let match = false;\n        for (let ln of Linediff.all(this)) {\n            const e = ln.element;\n            if (match && (hasClass(e, \"pa-gx\") || hasClass(e, \"pa-dlr\"))) {\n                return ln;\n            } else if (ln.is_source()) {\n                const curlineno = +(isb ? e.firstChild.nextSibling : e.firstChild).getAttribute(\"data-landmark\");\n                if ((!curlineno && match) || lineno < curlineno) {\n                    return ln;\n                } else if (lineno === curlineno && ln.is_base()) {\n                    match = true;\n                }\n            } else if (e.hasAttribute(\"data-landmark\")) {\n                const curlm = e.getAttribute(\"data-landmark\");\n                if (curlm.charAt(0) === (isb ? \"b\" : \"a\")\n                    && lineno < +curlm.substring(1)) {\n                    return ln;\n                }\n            }\n        }\n        return null;\n    }\n\n    static get BACKWARD() {\n        return BACKWARD;\n    }\n    static get ANYFILE() {\n        return ANYFILE;\n    }\n\n    static* all(t, flags) {\n        if (t instanceof Linediff) {\n            t = t.element;\n        }\n        flags = flags || 0;\n        let p = t.parentElement;\n        const direction = flags & BACKWARD ? \"previousSibling\" : \"nextSibling\";\n        while (true) {\n            while (!t && p) {\n                if (!(flags & ANYFILE) && hasClass(p, \"pa-filediff\")) {\n                    return;\n                }\n                t = p[direction];\n                p = p.parentElement;\n            }\n            if (!t) {\n                break;\n            } else if (t.nodeType !== Node.ELEMENT_NODE) {\n                t = t[direction];\n            } else if (hasClass(t, \"pa-dg\")) {\n                p = t;\n                t = p[flags & BACKWARD ? \"lastChild\" : \"firstChild\"];\n            } else {\n                if (hasClass(t, \"pa-dl\")) {\n                    yield new Linediff(t);\n                }\n                t = t[direction];\n            }\n        }\n    }\n\n    static* range(t, lo, hi, selector) {\n        let linea = -1, lineb = -1;\n        for (let ln of Linediff.all(t)) {\n            const e = ln.element;\n            if (!hasClass(e, \"pa-dlr\")) {\n                const c = e.firstChild;\n                if (hasClass(c, \"pa-da\")) {\n                    if (c.hasAttribute(\"data-landmark\")) {\n                        linea = +c.getAttribute(\"data-landmark\");\n                    }\n                    if (c.nextSibling.hasAttribute(\"data-landmark\")) {\n                        lineb = +c.getAttribute(\"data-landmark\");\n                    }\n                } else if (e.hasAttribute(\"data-landmark\")) {\n                    const lm = e.getAttribute(\"data-landmark\");\n                    if (lm.charAt(0) === \"a\") {\n                        linea = +lm.substring(1);\n                    } else {\n                        lineb = +lm.substring(1);\n                    }\n                }\n                if (linea > hi) {\n                    break;\n                } else if (linea >= lo && (!selector || e.matches(selector))) {\n                    ln.linea = linea;\n                    ln.lineb = lineb;\n                    yield ln;\n                }\n            }\n        }\n    }\n}\n\n\nhandle_ui.on(\"pa-diff-unfold\", function (evt) {\n    const $es = evt.metaKey ? $(\".pa-diff-unfold\") : $(this),\n        fd = Filediff.by_hash(this.hash),\n        show = hasClass(fd.element, \"hidden\"),\n        direction = evt.metaKey ? true : show;\n    $es.each(function () {\n        Filediff.by_hash(this.hash).load().then(fd => fd.toggle(direction));\n    });\n    if (!evt.metaKey) {\n        $.post(hoturl(\"=api/diffconfig\", {psetinfo: fd.element, file: fd.file, collapse: show ? 0 : 1}));\n    }\n});\n\nhandle_ui.on(\"pa-diff-toggle-hide-left\", function (evt) {\n    const $es = evt.metaKey ? $(\".pa-diff-toggle-hide-left\") : $(this),\n        show = hasClass(Filediff.referenced(this).element, \"pa-hide-left\");\n    $es.each(function () { Filediff.referenced(this).toggle_show_left(show); });\n});\n\nhandle_ui.on(\"pa-filenav\", function () {\n    goto_hash(this.hash);\n});\n\nhandle_ui.on(\"pa-filenav-all\", function () {\n    for (const e of this.closest(\"nav\").querySelectorAll(\".pa-filenav\")) {\n        const fd = Filediff.by_href(e.href);\n        fd && fd.load().then(() => { fd.toggle(true); });\n    }\n});\n\nfunction goto_hash(hash) {\n    const m = hash.match(/^[^#]*#(L[ab]\\d+|)((?:U[-A-Za-z0-9_.@]+\\/|)F[-A-Za-z0-9_.@/]+)$/),\n        lineid = m && m[1] ? m[1].substring(1) : null,\n        fd = m ? Filediff.by_hash(\"#\" + m[2]) : null;\n    if (!fd) {\n        return;\n    } else if (lineid) {\n        fd.line(lineid).then(ln => {\n            fd.toggle(true);\n            const e = ln.visible_predecessor().element;\n            hasClass(e, \"pa-gd\") && fd.toggle_show_left(true);\n            addClass(e, \"pa-line-highlight\");\n            window.scrollTo(0, Math.max($(e).geometry().top - Math.max(window.innerHeight * 0.1, 24), 0));\n        }).catch(null);\n    } else {\n        fd.load().then(() => {\n            fd.toggle(true);\n            window.scrollTo(0, fd.scroll_position());\n        });\n    }\n}\n\nif (!hasClass(document.body, \"want-grgraph-hash\")) {\n    $(window).on(\"popstate\", function (event) {\n        const state = (event.originalEvent || event).state;\n        state && state.href && goto_hash(state.href);\n    }).on(\"hashchange\", function () {\n        goto_hash(location.href);\n    });\n    $(function () { goto_hash(location.href); });\n}\n\nhandle_ui.on(\"pa-gx\", function (evt) {\n    new Linediff(evt.currentTarget).expand();\n});\n\n$(Filediff.decorate_page);\n","// markdown-minihtml.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2020 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\n\nfunction skip_space(str, pos, len) {\n    let ch;\n    while (pos !== len && ((ch = str.charCodeAt(pos)) === 0x20 || ch === 0x09)) {\n        ++pos;\n    }\n    return pos;\n}\n\nfunction skip_name(str, pos, len, pos0) {\n    while (pos !== len) {\n        const ch = str.charCodeAt(pos), lch = ch | 0x20;\n        if (lch >= 0x61 && lch <= 0x7A) {\n            // always ok\n        } else if (pos0 !== pos || (ch !== 0x2D && (ch < 0x30 || ch > 0x39))) {\n            break;\n        }\n        ++pos;\n    }\n    return pos;\n}\n\nfunction parse_tag(str, pos, len) {\n    let ch;\n    const result = {tag: null, ok: false, open: null, close: null, attr: {}, pos: pos};\n    if (str.charCodeAt(pos) !== 0x3C) {\n        return result;\n    }\n    pos = skip_space(str, pos + 1, len);\n    if (pos !== len && str.charCodeAt(pos) === 0x2F) {\n        result.open = false;\n        result.close = true;\n        pos = skip_space(str, pos + 1, len);\n    }\n    const tag0 = pos;\n    pos = skip_name(str, pos, len, pos);\n    if (pos === tag0) {\n        return result;\n    } else if (result.open === null) {\n        result.open = true;\n    }\n    result.tag = str.substring(tag0, pos).toLowerCase();\n    while (true) {\n        pos = skip_space(str, pos, len);\n        ch = pos !== len ? str.charCodeAt(pos) : -1;\n        if (ch === 0x3E) {\n            result.pos = pos + 1;\n            result.ok = true;\n            return result;\n        } else if (ch === 0x2F) {\n            result.close = true;\n            ++pos;\n        } else if (result.close) {\n            return result;\n        } else if ((ch | 0x20) >= 0x61 && (ch | 0x20) <= 0x7A) {\n            const name0 = pos, name1 = skip_name(str, pos, len, pos),\n                attrname = str.substring(name0, name1).toLowerCase();\n            pos = skip_space(str, name1, len);\n            if (pos !== len && str.charCodeAt(pos) === 0x3D) {\n                pos = skip_space(str, pos + 1, len);\n                ch = pos !== len ? str.charCodeAt(pos) : -1;\n                if (ch === 0x22 || ch === 0x27) {\n                    const nextquote = str.indexOf(str.charAt(pos), pos + 1),\n                        nextnl = str.indexOf(\"\\n\", pos + 1);\n                    if (nextquote === -1 || (nextnl > 0 && nextquote > nextnl)) {\n                        return result;\n                    }\n                    result.attr[attrname] = str.substring(pos + 1, nextquote);\n                    pos = nextquote + 1;\n                } else if (ch === 0x2D || (ch >= 0x30 && ch <= 0x39) || ((ch | 0x20) >= 0x61 && (ch | 0x20) <= 0x7A)) {\n                    const val0 = pos;\n                    pos = skip_name(str, pos + 1, len, pos);\n                    result.attr[attrname] = str.substring(val0, pos);\n                } else {\n                    return result;\n                }\n            } else {\n                result.attr[attrname] = true;\n            }\n        } else {\n            return result;\n        }\n    }\n}\n\nfunction minihtml_inline(state, silent) {\n    let src = state.src, pos = state.pos, max = state.posMax;\n\n    // Check start\n    if (src.charCodeAt(pos) !== 0x3C/* < */ ||\n        pos + 2 >= max) {\n        return false;\n    }\n\n    // Quick fail on second char\n    let ch = src.charCodeAt(pos + 1) | 0x20;\n    if (ch !== 0x2f && ch !== 0x62 && ch !== 0x69 && ch !== 0x73) {\n        return false;\n    }\n\n    const tag = parse_tag(src, pos, max);\n    if (!tag.ok) {\n        return false;\n    } else if (tag.tag === \"br\") {\n        if (tag.open) {\n            const tag1 = parse_tag(src, skip_space(src, tag.pos, max), max);\n            if (tag1.ok && tag1.tag === \"br\" && !tag1.open) {\n                tag.pos = tag1.pos;\n            }\n        }\n        if (!silent) {\n            state.push('hardbreak', 'br', 0);\n        }\n    } else if ((tag.tag === \"sub\" || tag.tag === \"sup\") && !tag.close) {\n        const lt = src.indexOf(\"<\", tag.pos), nl = src.indexOf(\"\\n\", tag.pos);\n        let tag1 = lt >= tag.pos && (nl < 0 || nl > lt) ? parse_tag(src, lt, max) : null;\n        if (tag1 && tag1.ok && !tag1.open && tag1.tag === tag.tag) {\n            if (!silent) {\n                state.push(tag.tag + \"_open\", tag.tag, 1);\n                let token = state.push(\"text\", \"\", 0);\n                token.content = src.substring(tag.pos, lt);\n                state.push(tag.tag + \"_close\", tag.tag, -1);\n            }\n            tag.pos = tag1.pos;\n        } else {\n            return false;\n        }\n    } else if (tag.tag === \"img\" && tag.attr.src) {\n        let token = state.push(\"image\", \"img\", 0);\n        token.attrs = [[\"src\", tag.attr.src], [\"alt\", \"\"]];\n        if (tag.attr.title) {\n            token.attrs.push([\"title\", tag.attr.title]);\n        }\n        token.children = [];\n        token.content = tag.attr.alt || \"\";\n        if (token.content !== \"\") {\n            state.md.inline.parse(token.content, state.md, state.env, token.children);\n        }\n    } else {\n        return false;\n    }\n    state.pos = tag.pos;\n    return true;\n}\n\nexport function markdownit_minihtml(md) {\n    md.inline.ruler.after(\"autolink\", \"minihtml_inline\", minihtml_inline);\n}\n","// diff-markdown.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { Filediff } from \"./diff.js\";\nimport { hasClass, addClass, removeClass, toggleClass, handle_ui } from \"./ui.js\";\nimport { hoturl } from \"./hoturl.js\";\nimport { markdownit_minihtml } from \"./markdown-minihtml.js\";\n\nlet md, mdcontext;\n\n\nfunction hljs_line(lang, s, hlstate) {\n    try {\n        const result = hljs.highlight(lang, s, true, hlstate),\n            ns = result.value;\n        if (s.endsWith(\"\\r\\n\") && ns.endsWith(\"\\n\\n\")) {\n            result.value = ns.substring(0, ns.length - 1);\n        }\n        return result;\n    } catch {\n        return null;\n    }\n}\n\nfunction render_map(map) {\n    if (map[0] + 1 === map[1]) {\n        return String(map[1]);\n    } else {\n        return (map[0] + 1) + \"-\" + map[1];\n    }\n}\n\nfunction add_landmark(tokens, idx, options, env, self) {\n    var token = tokens[idx];\n    if (token.map && token.level === 0) {\n        token.attrSet(\"data-landmark\", render_map(token.map));\n    }\n    return self.renderToken(tokens, idx, options, env);\n}\n\nfunction add_landmark_1(tokens, idx, options, env, self) {\n    var token = tokens[idx];\n    if (token.map && token.level <= 1) {\n        token.attrSet(\"data-landmark\", render_map(token.map));\n    }\n    return self.renderToken(tokens, idx, options, env);\n}\n\nfunction fix_landmark_html(html, token) {\n    if (token.map && token.level === 0) {\n        var lm = \" data-landmark=\\\"\" + render_map(token.map) + \"\\\"\",\n            sp = html.indexOf(\" \"),\n            gt = html.indexOf(\">\");\n        if (sp > 0 && sp < gt) {\n            gt = sp;\n        }\n        html = html.substring(0, gt) + lm + html.substring(gt);\n    }\n    return html;\n}\n\nfunction modify_landmark(base) {\n    if (!base) {\n        return add_landmark;\n    } else {\n        return function (tokens, idx, options, env, self) {\n            var token = tokens[idx];\n            return fix_landmark_html(base(tokens, idx, options, env, self), token);\n        };\n    }\n}\n\nfunction modify_landmark_image(base) {\n    function fix(pi, file) {\n        return siteinfo.site_relative + \"~\" + encodeURIComponent(siteinfo.uservalue) + \"/raw/\" + pi.getAttribute(\"data-pa-pset\") + \"/\" + pi.getAttribute(\"data-pa-commit\") + \"/\" + file;\n    }\n    return function (tokens, idx, options, env, self) {\n        var token = tokens[idx],\n            srci = token.attrIndex(\"src\"),\n            src = token.attrs[srci][1],\n            pi, m, m2;\n        if (siteinfo.uservalue\n            && mdcontext\n            && (pi = mdcontext.closest(\".pa-psetinfo\"))) {\n            if (!/\\/\\//.test(src)) {\n                var fd = Filediff.closest(mdcontext),\n                    dir = fd ? fd.file.replace(/^(.*)\\/[^/]*$/, '$1') : \"\";\n                while (true) {\n                    if (src.startsWith(\"./\")) {\n                        src = src.substring(2).replace(/^\\/+/, \"\");\n                    } else if (src.startsWith(\"../\") && dir !== \"\") {\n                        src = src.substring(3).replace(/^\\/+/, \"\");\n                        dir = dir.replace(/(?:^|\\/)[^/]+\\/*$/, \"\");\n                    } else if (src.startsWith(\"../\") || src.startsWith(\"/\")) {\n                        src = null;\n                        break;\n                    } else if ((m = src.match(/(^|\\/+)[^/]+\\/\\.\\.(?:\\/+|$)(.*)$/))) {\n                        src = m[1] + m[2];\n                    } else {\n                        break;\n                    }\n                }\n                if (src) {\n                    token.attrs[srci][1] = fix(pi, dir ? dir + \"/\" + src : src);\n                } else {\n                    token.attrs[srci][1] = \"data:image/jpg,\";\n                }\n            } if ((m = src.match(/^https:\\/\\/github\\.com\\/([^/]+\\/[^/]+)\\/(?:blob|raw)\\/([^/]+)\\/(.*)$/))\n                  && (m2 = (pi.getAttribute(\"data-pa-repourl\") || \"\").match(/^(?:https:\\/\\/github\\.com\\/|git@github\\.com:)(.*?)\\/?$/))\n                  && m2[1] == m[1]\n                  && pi.getAttribute(\"data-pa-branch\") == m[2]) {\n                token.attrs[srci][1] = fix(pi, m[3]);\n            }\n        }\n        return fix_landmark_html(base(tokens, idx, options, env, self), token);\n    };\n}\n\nfunction render_landmark_fence(md) {\n    return function (tokens, idx, options, env, self) {\n        const token = tokens[idx];\n        let info = token.info ? md.utils.unescapeAll(token.info) : \"\", m;\n        if (info && info.indexOf(\" \") >= 0) {\n            if ((m = info.match(/^ *([-a-z+]+) *$/))) {\n                info = m[1];\n            } else {\n                token.content = info + \"\\n\" + token.content;\n                token.map && (token.map[0] -= 1);\n                info = \"\";\n            }\n        }\n        let lang = info ? info.trim().split(/\\s+/g)[0] : \"\";\n        if (!lang || !hljs.getLanguage(lang)) {\n            lang = null;\n        }\n\n        let xtoken = token;\n        if (lang) {\n            let i = token.attrIndex(\"class\");\n            xtoken = {attrs: token.attrs ? token.attrs.slice() : []};\n            if (i < 0) {\n                xtoken.attrs.push([\"class\", options.langPrefix + lang]);\n            } else {\n                xtoken.attrs[i][1] += \" \" + options.langPrefix + lang;\n            }\n        }\n        let xattrs = '><code'.concat(self.renderAttrs(xtoken), '>');\n\n        if (token.map && token.level === 0) {\n            // split into lines, assign landmarks\n            const x = token.content.split(/\\n/), y = [];\n            x[x.length - 1] === \"\" && x.pop();\n            const xl = x.length;\n            let i = 0, ln0 = token.map[0] + 2, hlstate = null;\n            while (lang && i !== xl) {\n                const result = hljs_line(lang, x[i] + \"\\n\", hlstate);\n                if (result) {\n                    y.push('<pre data-landmark=\"', ln0 + i,\n                           i + 1 !== xl ? '\" class=\"partial\"' : '\"',\n                           xattrs, result.value, \"</code></pre>\");\n                    hlstate = result.top;\n                    ++i;\n                } else {\n                    break;\n                }\n            }\n            while (i !== xl) {\n                y.push('<pre data-landmark=\"', ln0 + i,\n                       i + 1 !== xl ? '\" class=\"partial\"' : '\"',\n                       xattrs, x[i], \"\\n</code></pre>\");\n                ++i;\n            }\n            return y.join(\"\");\n        } else {\n            return '<pre'.concat(xattrs, md.utils.escapeHtml(token.content), '</code></pre>');\n        }\n    };\n}\n\nfunction make_markdownit() {\n    if (!md) {\n        md = markdownit({linkify: true}).use(markdownit_katex).use(markdownit_minihtml);\n        for (var x of [\"paragraph_open\", \"heading_open\", \"ordered_list_open\",\n                       \"bullet_list_open\", \"table_open\", \"blockquote_open\",\n                       \"hr\"]) {\n            md.renderer.rules[x] = modify_landmark(md.renderer.rules[x]);\n        }\n        md.renderer.rules.fence = md.renderer.rules.code_block = render_landmark_fence(md);\n        md.renderer.rules.image = modify_landmark_image(md.renderer.rules.image);\n        md.renderer.rules.list_item_open = add_landmark_1;\n    }\n    return md;\n}\n\nfunction fix_list_item(d) {\n    var dc;\n    while ((dc = d.firstChild) && dc.nodeType !== 1) {\n        d.removeChild(dc);\n    }\n    if (dc && dc.hasAttribute(\"data-landmark\")) {\n        while (dc.nextSibling && dc.nextSibling.nodeType !== 1) {\n            d.removeChild(dc.nextSibling);\n        }\n        if (dc.nextSibling) {\n            if (d.tagName === \"OL\") {\n                if (!dc.hasAttribute(\"value\")) {\n                    dc.value = d.start;\n                }\n                d.start = dc.value + 1;\n            }\n            var nd = document.createElement(d.tagName);\n            nd.appendChild(d.removeChild(dc));\n            d = nd;\n        }\n        d.setAttribute(\"data-landmark\", dc.getAttribute(\"data-landmark\"));\n    }\n    return d;\n}\n\nFilediff.define_method(\"markdown\", function () {\n    const elt = this.element;\n    if (hasClass(elt, \"pa-markdown\")\n        || hasClass(elt, \"pa-highlight\")) {\n        return;\n    }\n    const hidelm = hasClass(elt, \"pa-hide-landmarks\"),\n        daclass = hidelm ? \"pa-da hidden\" : \"pa-da\",\n        dbclass = hidelm ? \"pa-db hidden\" : \"pa-db\",\n        drclass = hidelm ? \"pa-dr pa-dhlm\" : \"pa-dr\";\n    // collect content\n    let e = elt.firstChild, l = [], lineno = 1;\n    while (e) {\n        let n = e.nextSibling;\n        if (hasClass(e, \"pa-dlr\")) {\n            elt.removeChild(e);\n        } else if (hasClass(e, \"pa-gi\") || hasClass(e, \"pa-gc\")) {\n            const this_lineno = +e.firstChild.nextSibling.getAttribute(\"data-landmark\");\n            while (lineno < this_lineno) {\n                l.push(\"\\n\");\n                ++lineno;\n            }\n            l.push(e.lastChild.textContent);\n            ++lineno;\n            addClass(e, \"hidden\");\n        }\n        e = n;\n    }\n    // render to markdown\n    let dx = document.createElement(\"div\"), d, lr;\n    mdcontext = elt;\n    dx.innerHTML = make_markdownit().render(l.join(\"\"));\n    mdcontext = null;\n    // split up and insert into order\n    e = elt.firstChild;\n    while ((d = dx.firstChild)) {\n        if (d.nodeType !== 1) {\n            dx.removeChild(d);\n            continue;\n        } else if (d.tagName === \"OL\" || d.tagName === \"UL\") {\n            d = fix_list_item(d);\n        } else if (d.tagName === \"P\"\n                   && d.firstChild.nodeType === 1\n                   && d.firstChild.tagName === \"IMG\"\n                   && d.firstChild === d.lastChild) {\n            addClass(d, \"image-container\");\n        }\n\n        const lp = document.createElement(\"div\");\n        lp.className = \"pa-dl pa-dlr\";\n        const la = document.createElement(\"div\");\n        la.className = daclass;\n        const lb = document.createElement(\"div\");\n        lb.className = dbclass;\n\n        const lm = d.getAttribute(\"data-landmark\");\n        if (lm) {\n            let l1 = parseInt(lm),\n                dash = lm.indexOf(\"-\"),\n                l2 = dash >= 0 ? parseInt(lm.substring(dash + 1)) : l1;\n            while (e) {\n                if ((hasClass(e, \"pa-gi\") || hasClass(e, \"pa-gc\"))\n                    && +e.firstChild.nextSibling.getAttribute(\"data-landmark\") >= l1) {\n                    break;\n                }\n                e = e.nextSibling;\n            }\n            lb.setAttribute(\"data-landmark\", l1);\n            let klass = 0, ee = e;\n            while (ee) {\n                if (hasClass(ee, \"pa-gi\") || hasClass(ee, \"pa-gc\")) {\n                    if (+ee.firstChild.nextSibling.getAttribute(\"data-landmark\") >= l2) {\n                        break;\n                    }\n                    klass |= hasClass(ee, \"pa-gi\") ? 1 : 2;\n                }\n                ee = ee.nextSibling;\n            }\n            lp.className += klass === 2 ? \" pa-gc\" : \" pa-gi\";\n        }\n\n        lr = document.createElement(\"div\");\n        lr.className = drclass;\n        if (d === dx.firstChild) {\n            dx.removeChild(d);\n        }\n        lr.appendChild(d);\n        while (dx.firstChild && dx.firstChild.nodeType !== 1) {\n            lr.appendChild(dx.removeChild(dx.firstChild));\n        }\n\n        lp.appendChild(la);\n        lp.appendChild(lb);\n        lp.appendChild(lr);\n        elt.insertBefore(lp, e);\n    }\n\n    if (lr) {\n        addClass(lr, \"pa-dr-last\");\n    }\n    addClass(elt, \"pa-markdown\");\n    removeClass(elt, \"need-markdown\");\n});\n\nFilediff.define_method(\"unmarkdown\", function () {\n    const elt = this.element;\n    let e = elt.firstChild;\n    while (e) {\n        var n = e.nextSibling;\n        if (hasClass(e, \"pa-dlr\")) {\n            elt.removeChild(e);\n        } else if (hasClass(e, \"pa-gi\") || hasClass(e, \"pa-gc\")) {\n            removeClass(e, \"hidden\");\n        }\n        e = n;\n    }\n    removeClass(elt, \"pa-markdown\");\n});\n\nFilediff.define_method(\"highlight\", function () {\n    const elt = this.element;\n    // compute language\n    let lang;\n    if (!(lang = elt.getAttribute(\"data-language\"))) {\n        let file = this.file;\n        if (/\\.(?:cc|cpp|hh|hpp|c\\+\\+|h\\+\\+|C|H)$/.test(file)) {\n            lang = \"c++\";\n        } else if (/\\.(?:c|h)$/.test(file)) {\n            lang = \"c\";\n        }\n        lang && elt.setAttribute(\"data-language\", lang);\n    }\n    if (!lang\n        || !hljs.getLanguage(lang)\n        || hasClass(elt, \"pa-markdown\")) {\n        return;\n    }\n    // collect content\n    const langclass = \"language-\" + lang;\n    let e = elt.firstChild, hlstatei = null, hlstated = null;\n    while (e) {\n        const type = hasClass(e, \"pa-gi\") ? 2 : (hasClass(e, \"pa-gc\") ? 3 : (hasClass(e, \"pa-gd\") ? 1 : 0));\n        if (type !== 0) {\n            const ce = e.lastChild,\n                ishl = hasClass(ce, langclass),\n                s = ishl ? ce.getAttribute(\"data-pa-text\") : ce.textContent,\n                result = hljs_line(lang, s, type & 2 ? hlstatei : hlstated);\n            if (!result) {\n                break;\n            }\n            if (type & 1) {\n                hlstated = result.top;\n            }\n            if (type & 2) {\n                hlstatei = result.top;\n            }\n            if (!ishl) {\n                ce.setAttribute(\"data-pa-text\", s);\n                ce.innerHTML = result.value;\n                addClass(ce, langclass);\n            }\n        }\n        e = e.nextSibling;\n    }\n    addClass(elt, \"pa-highlight\");\n    removeClass(elt, \"need-highlight\");\n});\n\nFilediff.define_method(\"unhighlight\", function () {\n    // compute language\n    const elt = this.element,\n        lang = elt.getAttribute(\"data-language\"),\n        langclass = lang ? \"language-\" + lang : \"\";\n    let e = elt.firstChild, et;\n    while (e) {\n        if ((et = e.lastChild)\n            && et.hasAttribute(\"data-pa-text\")\n            && (!langclass || hasClass(et, langclass))) {\n            et.innerText = et.getAttribute(\"data-pa-text\");\n            et.removeAttribute(\"data-pa-text\");\n            langclass && removeClass(et, langclass);\n        }\n        e = e.nextSibling;\n    }\n    removeClass(elt, \"pa-highlight\");\n});\n\nFilediff.add_decorator(function (fd) {\n    if (hasClass(fd.element, \"need-markdown\")) {\n        fd.markdown();\n    } else if (hasClass(fd.element, \"need-highlight\")) {\n        fd.highlight();\n    }\n});\n\n\nhandle_ui.on(\"pa-diff-toggle-markdown\", function (evt) {\n    const $es = evt.metaKey ? $(\".pa-diff-toggle-markdown\") : $(this),\n        fd = Filediff.referenced(this),\n        show = !hasClass(fd.element, \"pa-markdown\");\n    $es.each(function () {\n        const fd = Filediff.referenced(this),\n            shown = hasClass(fd.element, \"pa-markdown\");\n        if (show && !shown) {\n            fd.markdown();\n        } else if (!show && shown) {\n            fd.unmarkdown();\n        }\n        toggleClass(this, \"btn-primary\", show);\n    });\n    if (!evt.metaKey) {\n        $.post(hoturl(\"=api/diffconfig\", {psetinfo: fd.element}),\n            {file: fd.file, markdown: show ? 1 : 0});\n    }\n});\n","// render.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { escape_entities } from \"./encoders.js\";\nimport { markdownit_minihtml } from \"./markdown-minihtml.js\";\nimport { hasClass } from \"./ui.js\";\nimport { string_utf8_index } from \"./utils.js\";\n\nfunction render_class(c, format) {\n    if (c) {\n        return c.replace(/(?:^|\\s)(?:need-format|format\\d+)(?=$|\\s)/g, \"\").concat(\" format\", format).trimStart();\n    } else {\n        return \"format\" + format;\n    }\n}\n\nexport function parse_ftext(t) {\n    let fmt = 0, pos = 0;\n    while (true) {\n        const ch = t.charCodeAt(pos);\n        if (pos === 0 ? ch !== 60 : ch !== 62 && (ch < 48 || ch > 57)) {\n            return [0, t];\n        } else if (pos !== 0 && ch >= 48 && ch <= 57) {\n            fmt = 10 * fmt + ch - 48;\n        } else if (ch === 62) {\n            return pos === 1 ? [0, t] : [fmt, t.substring(pos + 1)];\n        }\n        ++pos;\n    }\n}\n\n\nconst renderers = {};\n\nfunction add_format(r) {\n    if (r.format == null || r.format === \"\" || renderers[r.format]) {\n        throw new Error(\"bad or reused format\");\n    }\n    renderers[r.format] = r;\n}\n\n\nfunction link_urls(t) {\n    var re = /((?:https?|ftp):\\/\\/(?:[^\\s<>\"&]|&amp;)*[^\\s<>\"().,:;&])([\"().,:;]*)(?=[\\s<>&]|$)/g;\n    return t.replace(re, function (m, a, b) {\n        return '<a href=\"' + a + '\" rel=\"noreferrer\">' + a + '</a>' + b;\n    });\n}\n\nfunction render0(text) {\n    var lines = text.split(/((?:\\r\\n?|\\n)(?:[-+*][ \\t]|\\d+\\.)?)/), ch;\n    for (var i = 1; i < lines.length; i += 2) {\n        if (lines[i - 1].length > 49\n            && lines[i].length <= 2\n            && (ch = lines[i + 1].charAt(0)) !== \"\"\n            && ch !== \" \"\n            && ch !== \"\\t\")\n            lines[i] = \" \";\n    }\n    text = \"<p>\" + link_urls(escape_entities(lines.join(\"\"))) + \"</p>\";\n    return text.replace(/\\r\\n?(?:\\r\\n?)+|\\n\\n+/g, \"</p><p>\");\n}\n\nfunction render0_inline(text) {\n    return link_urls(escape_entities(text));\n}\n\nadd_format({\n    format: 0,\n    render: render0,\n    render_inline: render0_inline\n});\n\nlet md, md2;\nfunction try_highlight(str, lang, langAttr, token) {\n    if (lang && hljs.getLanguage(lang)) {\n        try {\n            var hlstr = hljs.highlight(lang, str, true).value,\n                classIndex = token ? token.attrIndex(\"class\") : -1,\n                lineIndex = token ? token.attrIndex(\"data-lineno-start\") : -1;\n            if (classIndex >= 0 && /^(.*(?: |^))need-lineno((?: |$).*)$/.test(token.attrs[classIndex][1])) {\n                let n = lineIndex >= 0 ? token.attrs[lineIndex][1] : \"1\";\n                const m = n.match(/^(.*?)(\\d*)(\\D*)$/),\n                    pfx = m[1], minlen = m[2].startsWith(\"0\") ? m[2].length : 0, sfx = m[3],\n                    fmt = (n) => pfx + n.toString().padStart(minlen, \"0\") + sfx;\n                n = m[2] ? +m[2] : 1;\n                let lines = hlstr.split(/\\n/);\n                if (lines.length > 0 && lines[lines.length - 1] === \"\") {\n                    lines.pop();\n                }\n                const linestart = '<span class=\"has-lineno has-lineno-'.concat(fmt(n + lines.length - 1).length, '\" data-lineno=\"');\n                for (let i = 0; i !== lines.length; ++i, ++n) {\n                    lines[i] = linestart.concat(fmt(n), '\">', lines[i], '</span>');\n                }\n                hlstr = lines.join(\"\\n\") + \"\\n\";\n            }\n            return hlstr;\n        } catch {\n        }\n    }\n    return \"\";\n}\n\nadd_format({\n    format: 1,\n    render: function (text) {\n        if (!md) {\n            md = window.markdownit({highlight: try_highlight, linkify: true}).use(markdownit_katex).use(markdownit_minihtml);\n        }\n        return md.render(text);\n    }\n});\n\nadd_format({\n    format: 3,\n    render: function (text) {\n        if (!md2) {\n            md2 = window.markdownit({highlight: try_highlight, linkify: true, html: true, attributes: true}).use(markdownit_katex);\n        }\n        return md2.render(text);\n    }\n});\n\nadd_format({\n    format: 5,\n    render: function (text) {\n        return text;\n    }\n});\n\n\nfunction render_with(context, renderer, text) {\n    const want_inline = hasClass(context, \"format-inline\")\n            || window.getComputedStyle(context).display.startsWith(\"inline\"),\n        renderf = (want_inline && renderer.render_inline) || renderer.render,\n        html = renderf.call(context, text, context);\n    context.className = render_class(context.className, renderer.format);\n    context.innerHTML = html;\n    if (want_inline\n        && !renderer.render_inline\n        && context.children.length === 1\n        && context.firstChild.tagName === \"P\") {\n        context.firstChild.replaceWith(...context.firstChild.childNodes);\n    }\n}\n\nexport function render_onto(context, format, text) {\n    if (format === \"f\") {\n        var ft = parse_ftext(text);\n        format = ft[0];\n        text = ft[1];\n    }\n    try {\n        render_with(context, renderers[format] || renderers[0], text);\n    } catch {\n        render_with(context, renderers[0], text);\n        delete renderers[format];\n    }\n}\n\n\nfunction render_this() {\n    const format = this.hasAttribute(\"data-format\")\n            ? this.getAttribute(\"data-format\")\n            : \"f\",\n        content = this.hasAttribute(\"data-content\")\n            ? this.getAttribute(\"data-content\")\n            : this.textContent;\n    render_onto(this, format !== \"\" ? format : \"f\", content);\n}\n\nfunction on_page() {\n    $(\".need-format\").each(render_this);\n}\n\nexport const render_text = {\n    add_format: add_format,\n    on_page: on_page\n};\n\n$(on_page);\n\nexport const ftext = {\n    parse: parse_ftext,\n    unparse: function (format, text) {\n        return format || text.startsWith(\"<\") ? \"<\".concat(format || 0, \">\", text) : text;\n    }\n};\n\n\n// render_xmsg\nexport function render_xmsg(status, msg) {\n    if (typeof msg === \"string\") {\n        msg = msg === \"\" ? [] : [msg];\n    }\n    if (msg.length === 0) {\n        return [];\n    }\n    const div = document.createElement(\"div\");\n    if (status === 0 || status === 1 || status === 2) {\n        div.className = \"msg msg-\".concat([\"info\", \"warning\", \"error\"][status]);\n    } else {\n        div.className = \"msg msg-error\";\n    }\n    for (let i = 0; i !== msg.length; ++i) {\n        const p = document.createElement(\"p\");\n        p.append(msg[i]);\n        div.append(p);\n    }\n    return div;\n}\n\n\nfunction message_list_status(ml) {\n    var i, status = 0;\n    for (i = 0; i !== (ml || []).length; ++i) {\n        if (ml[i].status === -3 && status === 0) {\n            status = -3;\n        } else if (ml[i].status >= 1 && ml[i].status > status) {\n            status = ml[i].status;\n        }\n    }\n    return status;\n}\n\nexport function render_message_list(ml) {\n    var status = message_list_status(ml),\n        div = document.createElement(\"div\");\n    if (status === -3) {\n        div.className = \"msg msg-success\";\n    } else if (status >= 2) {\n        div.className = \"msg msg-error\";\n    } else if (status === 1) {\n        div.className = \"msg msg-warning\";\n    } else {\n        div.className = \"msg msg-info\";\n    }\n    div.appendChild(render_feedback_list(ml));\n    return div;\n}\n\nexport function render_feedback_list(ml) {\n    const ul = document.createElement(\"ul\");\n    ul.className = \"feedback-list\";\n    for (let i = 0; i !== (ml || []).length; ++i) {\n        append_feedback_to(ul, ml[i]);\n    }\n    return ul;\n}\n\nfunction append_feedback_to(ul, mi) {\n    var sklass, li, div;\n    if (mi.message != null && mi.message !== \"\") {\n        if (ul.tagName !== \"UL\")\n            throw new Error(\"bad append_feedback\");\n        sklass = \"\";\n        if (mi.status != null && mi.status >= -4 && mi.status <= 3)\n            sklass = [\"warning-note\", \"success\", \"urgent-note\", \"note\", \"\", \"warning\", \"error\", \"error\"][mi.status + 4];\n        div = document.createElement(\"div\");\n        if (mi.status !== -5 || !ul.firstChild) {\n            li = document.createElement(\"li\");\n            ul.appendChild(li);\n            div.className = sklass ? \"is-diagnostic format-inline is-\" + sklass : \"is-diagnostic format-inline\";\n        } else {\n            li = ul.lastChild;\n            div.className = \"msg-inform format-inline\";\n        }\n        li.appendChild(div);\n        render_onto(div, \"f\", mi.message);\n    }\n    if (mi.context) {\n        div = document.createElement(\"div\");\n        div.className = \"msg-context\";\n        var s = mi.context[0],\n            p1 = string_utf8_index(s, mi.context[1]),\n            p2 = string_utf8_index(s, mi.context[2]),\n            span = document.createElement(\"span\");\n        sklass = mi.status > 1 ? \"is-error\" : \"is-warning\";\n        span.className = (p2 > p1 + 2 ? \"context-mark \" : \"context-caret-mark \") +\n            (mi.status > 1 ? \"is-error\" : \"is-warning\");\n        span.append(s.substring(p1, p2));\n        div.append(s.substring(0, p1), span, s.substring(p2));\n        ul.lastChild.appendChild(div);\n    }\n}\n","// note.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hasClass, addClass, removeClass } from \"./ui.js\";\nimport { escape_entities } from \"./encoders.js\";\nimport { hoturl } from \"./hoturl.js\";\nimport { api_conditioner } from \"./xhr.js\";\nimport { ftext, render_onto } from \"./render.js\";\nimport { text_eq } from \"./utils.js\";\nimport { Filediff, Linediff } from \"./diff.js\";\n\n\nexport class Note {\n    constructor() {\n        this.iscomment = false;\n        this.ftext = \"\";\n        this.format = null;\n    }\n\n    empty() {\n        return this.ftext === \"\";\n    }\n\n    get file() {\n        return Filediff.closest(this.element || this.source).file;\n    }\n\n    get lineid() {\n        if (this.element) {\n            return this.element.getAttribute(\"data-landmark\");\n        } else {\n            return new Linediff(this.source).note_lineid;\n        }\n    }\n\n    get linea() {\n        return new Linediff(this.element || this.source).linea;\n    }\n\n    linea_within(bound) {\n        return new Linediff(this.element || this.source).linea_within(bound);\n    }\n\n    get editable_text() {\n        const ft = ftext.parse(this.ftext);\n        return ft[1];\n    }\n\n    static parse(x) {\n        const n = new Note;\n        if (typeof x === \"string\" && x !== \"\") {\n            x = JSON.parse(x);\n        }\n        n.assign(x);\n        return n;\n    }\n\n    assign(x) {\n        let myftext = [null, \"\"];\n        if (typeof x === \"number\") {\n            this.iscomment = false;\n            this.ftext = \"\";\n            this.users = null;\n            this.version = x;\n        } else if (Array.isArray(x)) {\n            this.iscomment = x[0];\n            this.ftext = x[1];\n            myftext = ftext.parse(x[1]);\n            this.users = x[2] || null;\n            this.version = x[3] && typeof x[3] === \"number\" ? x[3] : null;\n        }\n        this.format = myftext[0];\n\n        const elt = this.element;\n        if (elt) {\n            if (this.ftext === \"\" && this.version == null) {\n                elt.removeAttribute(\"data-pa-note\");\n            } else if (this.ftext === \"\" && this.users == null) {\n                elt.setAttribute(\"data-pa-note\", \"\" + this.version);\n            } else {\n                const a = [this.iscomment, this.ftext];\n                if (this.users != null || this.version != null) {\n                    a.push(this.users, this.version);\n                }\n                elt.setAttribute(\"data-pa-note\", JSON.stringify(a));\n            }\n        }\n    }\n\n    static at(elt) {\n        const n = Note.parse(elt.getAttribute(\"data-pa-note\"));\n        n.element = elt;\n        return n;\n    }\n\n    static closest(elt) {\n        const e = elt.closest(\".pa-dl\");\n        return e ? Note.at(e) : null;\n    }\n\n    static near(t) {\n        if (t instanceof Linediff) {\n            t = t.element;\n        }\n        let e = t;\n        while (e) {\n            if (e.nodeType !== 1) {\n                e = e.nextSibling;\n            } else if (hasClass(e, \"pa-gw\")) {\n                return Note.at(e);\n            } else if (e === t || hasClass(e, \"pa-gn\") || hasClass(e, \"pa-gx\") || hasClass(e, \"hidden\")) {\n                e = e.nextSibling;\n            } else {\n                break;\n            }\n        }\n        const n = new Note();\n        n.source = t;\n        return n;\n    }\n\n    force_element() {\n        if (!this.element) {\n            const source = new Linediff(this.source),\n                lineid = source.note_lineid,\n                insertion = source.upper_bound(lineid);\n            this.element = document.createElement(\"div\");\n            this.element.className = \"pa-dl pa-gw\";\n            this.element.setAttribute(\"data-landmark\", lineid);\n            if (this.version || this.ftext !== \"\") {\n                this.element.setAttribute(\"data-pa-note\", JSON.stringify([this.iscomment, this.ftext, this.users, this.version]));\n            }\n            let box = document.createElement(\"div\");\n            box.className = \"pa-notebox\";\n            this.element.appendChild(box);\n            this.source.parentElement.insertBefore(this.element, insertion ? insertion.element : null);\n        }\n        return this.element;\n    }\n\n    cancel_edit() {\n        if (this.element && hasClass(this.element, \"editing\")) {\n            $(this.element).find(\"textarea\").val(this.editable_text);\n        }\n        return this;\n    }\n\n    render(transition) {\n        this.force_element();\n\n        if (hasClass(this.element, \"editing\")) {\n            const $text = $(this.element).find(\"textarea\");\n            if ($text.length && !text_eq(this.editable_text, $text.val().replace(/\\s+$/, \"\"))) {\n                return false;\n            }\n            removeClass(this.element, \"editing\");\n            $(this.element).find(\":focus\").blur();\n        }\n\n        const $td = $(this.element).find(\".pa-notebox\"),\n            $content = $td.children();\n        if (transition) {\n            $content.slideUp(80).queue(function () { $content.remove(); });\n        } else {\n            $content.remove();\n        }\n\n        if (this.ftext === \"\") {\n            fix_links_at(this.element);\n            if (transition) {\n                $(this.element).children().slideUp(80);\n            } else {\n                addClass(this.element, \"hidden\");\n            }\n            return true;\n        }\n\n        const contdiv = document.createElement(\"div\");\n        contdiv.className = \"pa-notecontent clearfix\";\n        if (this.users) {\n            const authorids = $.isArray(this.users) ? this.users : [this.users],\n                authors = [];\n            for (let i in authorids) {\n                const p = siteinfo.pc ? siteinfo.pc[authorids[i]] : null;\n                if (p) {\n                    if (p.nick) {\n                        authors.push(p.nick);\n                    } else if (p.nicklen || p.lastpos) {\n                        authors.push(p.name.substr(0, p.nicklen || p.lastpos - 1));\n                    } else {\n                        authors.push(p.name);\n                    }\n                }\n            }\n            if (authors.length) {\n                const authordiv = document.createElement(\"div\");\n                authordiv.className = \"pa-note-author\";\n                authordiv.append(\"[\" + authors.join(\", \") + \"]\");\n                contdiv.append(authordiv);\n            }\n        }\n        if (!this.iscomment) {\n            const markdiv = document.createElement(\"div\");\n            markdiv.className = \"pa-gradenote-marker\";\n            contdiv.append(markdiv);\n        }\n        const notediv = document.createElement(\"div\");\n        notediv.className = \"pa-dr pa-note pa-\".concat(this.iscomment ? \"comment\" : \"grade\", \"note\");\n        contdiv.append(notediv);\n        $td.append(contdiv);\n\n        render_onto(notediv, \"f\", this.ftext);\n\n        fix_links_at(this.element);\n        if (transition) {\n            $(contdiv).hide().slideDown(80);\n        } else {\n            $td.show();\n            removeClass(this.element, \"hidden\");\n        }\n        return true;\n    }\n\n    save_ftext(ftext, iscomment) {\n        if (this.element) {\n            if (hasClass(this.element, \"pa-outstanding\")) {\n                return Promise.reject(new Error(\"Outstanding request\"));\n            }\n            addClass(this.element, \"pa-outstanding\");\n        }\n\n        const editing = this.element && hasClass(this.element, \"editing\"),\n            self = this,\n            tr = this.element || this.source,\n            fd = tr.closest(\".pa-filediff\"),\n            pi = fd.closest(\".pa-psetinfo\"),\n            grb = tr.closest(\".pa-grade-range-block\");\n\n        const data = {ftext: ftext}, linea = this.linea_within(1000);\n        if (iscomment) {\n            data.iscomment = 1;\n        }\n        if (linea) {\n            data.linea = linea;\n        }\n\n        if (grb) {\n            grb.setAttribute(\"data-pa-notes-outstanding\", +grb.getAttribute(\"data-pa-notes-outstanding\") + 1);\n        }\n\n        return new Promise(function (resolve, reject) {\n            api_conditioner(\n                hoturl(\"=api/linenote\", {\n                    psetinfo: pi, file: self.file, line: self.lineid, oldversion: self.version || 0\n                }), data\n            ).then(function (data) {\n                self.element && removeClass(self.element, \"pa-outstanding\");\n                if (data && data.ok) {\n                    self.force_element();\n                    removeClass(self.element, \"pa-save-failed\");\n                    const nd = data.linenotes[self.file];\n                    self.assign(nd && nd[self.lineid]);\n                    self.render(editing);\n                    resolve(self);\n                } else {\n                    if (self.element) {\n                        addClass(self.element, \"pa-save-failed\");\n                    }\n                    if (editing) {\n                        $(self.element).find(\".pa-save-message\").html('<strong class=\"err\">' + escape_entities(data.error || \"Failed\") + '</strong>');\n                    }\n                    reject(new Error(data.error || \"Save failed\"));\n                }\n                if (grb) {\n                    resolve_grade_range(grb);\n                }\n            });\n        });\n    }\n\n    save_text(text, iscomment) {\n        let format = this.format;\n        if (format == null) {\n            format = +document.body.getAttribute(\"data-default-format\");\n            if (isNaN(format))\n                format = 0;\n        }\n        return this.save_ftext(ftext.unparse(format, text), iscomment);\n    }\n}\n\n\nfunction set_link(tr, next_tr) {\n    let $a = $(tr).find(\".pa-note-links a\"), t;\n    if (!$a.length) {\n        $a = $('<a></a>');\n        $('<div class=\"pa-note-links\"></div>').append($a).prependTo($(tr).find(\".pa-notecontent\"));\n    }\n    if (next_tr) {\n        $a.attr(\"href\", new Linediff(next_tr).hash);\n        t = \"NEXT >\";\n    } else {\n        $a.attr(\"href\", \"\");\n        t = \"TOP\";\n    }\n    if ($a.text() !== t) {\n        $a.text(t);\n    }\n}\n\nfunction fix_links_at(tr) {\n    const trs = $(\".pa-gw\");\n    let notepos = 0;\n    while (notepos < trs.length && trs[notepos] !== tr) {\n        ++notepos;\n    }\n    if (notepos < trs.length) {\n        let prevpos = notepos - 1;\n        while (prevpos >= 0 && Note.at(trs[prevpos]).empty()) {\n            --prevpos;\n        }\n\n        let nextpos = notepos + 1;\n        while (nextpos < trs.length && Note.at(trs[nextpos]).empty()) {\n            ++nextpos;\n        }\n\n        if (prevpos >= 0) {\n            set_link(trs[prevpos], Note.at(tr).empty() ? trs[nextpos] : tr);\n        }\n        set_link(tr, trs[nextpos]);\n    }\n}\n\nfunction resolve_grade_range(grb) {\n    var count = +grb.getAttribute(\"data-pa-notes-outstanding\") - 1;\n    if (count) {\n        grb.setAttribute(\"data-pa-notes-outstanding\", count);\n    } else {\n        grb.removeAttribute(\"data-pa-notes-outstanding\");\n        $(grb).find(\".pa-grade\").each(function () {\n            $pa.gradeentry_closest(this).save_landmark_grade(grb);\n        });\n    }\n}\n","// gc.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { addClass, handle_ui, input_set_default_value } from \"./ui.js\";\nimport { event_key } from \"./ui-key.js\";\nimport { strftime, sec2text } from \"./utils.js\";\n\nlet map = {};\n\nconst color_map = {\n    \"red\": \"cR\", \"orange\": \"cO\", \"yellow\": \"cY\", \"green\": \"cG\",\n    \"blue\": \"cB\", \"purple\": \"cP\", \"gray\": \"cA\", \"grey\": \"cA\"\n};\n\nexport const GradeClass = {\n    basic_text: v => (v == null ? \"\" : \"\" + v),\n\n    basic_mount_edit: function (elt, id, opts) {\n        let sp = document.createElement(\"span\");\n        sp.className = \"pa-gradedesc\";\n        if (opts && opts.max_text) {\n            sp.append(opts.max_text);\n        } else if (this.max) {\n            sp.append('of ' + this.max);\n        }\n        const df = new DocumentFragment;\n        let e;\n        if (window.$pa.long_page) {\n            e = document.createElement(\"textarea\");\n            e.className = \"ta1 uich uii pa-gradevalue pa-gradewidth pa-fresh\";\n            e.setAttribute(\"rows\", 1);\n            e.setAttribute(\"cols\", 10000);\n            e.setAttribute(\"wrap\", \"none\");\n        } else {\n            e = document.createElement(\"input\");\n            e.type = \"text\";\n            e.className = \"uich uii pa-gradevalue pa-gradewidth pa-fresh\";\n        }\n        e.name = this.key;\n        e.id = id;\n        e.disabled = this.disabled;\n        df.append(e, \" \", sp);\n        return df;\n    },\n\n    basic_mount_show: function (elt, id) {\n        elt.id = id;\n        const es = [document.createElement(\"span\")];\n        es[0].className = \"pa-gradevalue pa-gradewidth\";\n        if (this.max && this.type !== \"letter\") {\n            es.push(\" \", document.createElement(\"span\"));\n            es[2].className = \"pa-gradedesc\";\n            es[2].append(\"of \" + this.max);\n        }\n        elt.replaceChildren(...es);\n    },\n\n    basic_unmount: function (elt) {\n        elt.remove();\n    },\n\n    basic_update_edit: function (elt, v, opts) {\n        const ve = elt.querySelector(\".pa-gradevalue\"),\n            gt = this.simple_text(v);\n        input_set_default_value(ve, gt);\n        ve.value = gt;\n        if (opts.mixed != null) {\n            opts.mixed ? ve.setAttribute(\"placeholder\", \"Mixed\") : ve.removeAttribute(\"placeholder\");\n        }\n    },\n\n    basic_configure_column: function (col) {\n        col.ge = this;\n        col.gabbr = this.abbr();\n        col.justify = this.gc.justify || \"right\";\n        col.sort_forward = this.gc.sort === \"forward\";\n        const justify = this.gc.justify || \"right\";\n        if (col.gkey === col.ptconf.total_key) {\n            col.className = this.readonly ? \"gt-total\" : \"gt-total gt-grade\";\n        } else {\n            col.className = this.readonly ? \"gt-rograde\" : \"gt-grade\";\n        }\n        col.className += justify === \"left\" ? \" l\" : \" r\";\n        if (this.table_color && color_map[this.table_color]) {\n            col.className += \" \" + color_map[this.table_color];\n        }\n        col.make_compare = sort => this.gc.make_compare.call(this, col, sort);\n        return col;\n    },\n\n    basic_make_compare: function (col) {\n        const gidx = col.gidx, erev = this.gc.sort === \"forward\" ? 1 : -1;\n        return function (a, b) {\n            const ag = a.grades && a.grades[gidx],\n                bg = b.grades && b.grades[gidx];\n            if (ag === \"\" || ag == null || bg === \"\" || bg == null) {\n                if (ag !== \"\" && ag != null) {\n                    return -erev;\n                } else if (bg !== \"\" && bg != null) {\n                    return erev;\n                }\n            } else if (ag < bg) {\n                return -1;\n            } else if (ag > bg) {\n                return 1;\n            }\n            return erev * a._sort_user.localeCompare(b._sort_user);\n        };\n    },\n\n    basic_tcell_width: function () {\n        return 3;\n    },\n\n    add: (name, x) => {\n        x.type = name;\n        x.type_tabular = x.type_tabular == null ? true : x.type_tabular;\n        x.text = x.text || GradeClass.basic_text;\n        x.simple_text = x.simple_text || x.text;\n        x.configure_column = x.configure_column || GradeClass.basic_configure_column;\n        x.tcell_width = x.tcell_width || GradeClass.basic_tcell_width;\n        x.tcell = x.tcell || x.text;\n        x.make_compare = x.make_compare || GradeClass.basic_make_compare;\n        x.mount_show = x.mount_show || GradeClass.basic_mount_show;\n        x.mount_edit = x.mount_edit || GradeClass.basic_mount_edit;\n        x.update_edit = x.update_edit || GradeClass.basic_update_edit;\n        x.unmount = x.unmount || GradeClass.basic_unmount;\n        map[name] = x;\n    },\n\n    find: name => map[name] || map.numeric\n};\n\n\nGradeClass.add(\"numeric\", {\n    mount_edit: GradeClass.basic_mount_edit\n});\n\nGradeClass.add(\"formula\", {\n    text: function (v) {\n        if (v == null || v === false) {\n            return \"\";\n        } else if (v === true) {\n            return \"✓\";\n        } else {\n            const t = v.toFixed(1);\n            return t.endsWith(\".0\") ? t.substring(0, t.length - 2) : t;\n        }\n    }\n});\n\nGradeClass.add(\"time\", {\n    text: function (v) {\n        if (v == null || v === 0) {\n            return \"\";\n        } else {\n            return strftime(\"%Y-%m-%d %H:%M\", v);\n        }\n    },\n    tcell_width: 6\n});\n\nGradeClass.add(\"duration\", {\n    text: function (v) {\n        if (v == null) {\n            return \"\";\n        } else {\n            return sec2text(v, \"quarterhour\");\n        }\n    },\n    tcell_width: 6\n});\n\nGradeClass.add(\"text\", {\n    mount_show: function (elt, id) {\n        elt.id = id;\n        addClass(elt, \"pa-textv\");\n        addClass(elt, \"pa-gradevalue\");\n    },\n    mount_edit: function (elt, id) {\n        addClass(elt, \"pa-textv\");\n        const ta = document.createElement(\"textarea\");\n        ta.className = \"uich uii pa-gradevalue need-autogrow pa-fresh\";\n        ta.name = this.key;\n        ta.id = id;\n        ta.disabled = this.disabled;\n        return ta;\n    },\n    justify: \"left\",\n    sort: \"forward\",\n    type_tabular: false\n});\n\nGradeClass.add(\"shorttext\", {\n    mount_show: function (elt, id) {\n        elt.id = id;\n        addClass(elt, \"pa-gradevalue\");\n    },\n    mount_edit: function (elt, id) {\n        const ta = document.createElement(\"textarea\");\n        ta.className = \"uich uii pa-gradevalue need-autogrow pa-fresh\";\n        ta.setAttribute(\"rows\", 1);\n        ta.name = this.key;\n        ta.id = id;\n        ta.disabled = this.disabled;\n        return ta;\n    },\n    justify: \"left\",\n    sort: \"forward\",\n    type_tabular: false\n});\n\nGradeClass.add(\"section\", {\n    text: () => \"\",\n    mount_show: function (elt, id) {\n        elt.id = id;\n        addClass(elt.closest(\".pa-p\"), \"pa-p-section\");\n    },\n    mount_edit: function (elt) {\n        addClass(elt.closest(\".pa-p\"), \"pa-p-section\");\n    },\n    update_show: function () {\n        return false;\n    },\n    update_edit: function () {\n        return false;\n    },\n    type_tabular: false\n});\n\n\nfunction sidebar_tab_traverse(e, bwd) {\n    let sb = e.closest(\".pa-sidebar\"),\n        sbtabs = sb.querySelectorAll(\".pa-sidebar-tab\"),\n        pos = Array.prototype.indexOf.call(sbtabs, e);\n    if (pos < 0) {\n        return null;\n    }\n    let allsb, sbpos;\n    while (true) {\n        pos += bwd ? -1 : 1;\n        if (pos < 0 || pos >= sbtabs.length) {\n            if (allsb == null) {\n                allsb = document.querySelectorAll(\".pa-sidebar\");\n                sbpos = Array.prototype.indexOf.call(allsb, sb);\n                if (sbpos < 0) {\n                    return null;\n                }\n            }\n            sbpos += bwd ? -1 : 1;\n            if (sbpos >= 0 && sbpos < allsb.length) {\n                sb = allsb[sbpos];\n                sbtabs = sb.querySelectorAll(\".pa-sidebar-tab\");\n                pos = bwd ? sbtabs.length : -1;\n            } else {\n                return null;\n            }\n        } else if (sbtabs[pos].offsetParent) {\n            return sbtabs[pos];\n        }\n    }\n}\n\nhandle_ui.on(\"keydown.pa-sidebar-tab\", function (event) {\n    if (event_key(event) === \"Tab\"\n        && !event.ctrlKey\n        && !event.altKey\n        && !event.metaKey) {\n        const e = sidebar_tab_traverse(this, event.shiftKey);\n        if (e) {\n            e.focus();\n            if (e.setSelectionRange) {\n                e.setSelectionRange(0, e.value.length);\n            }\n            event.preventDefault();\n        }\n    }\n});\n","// gradeentry.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { escape_entities, html_id_encode } from \"./encoders.js\";\nimport { hasClass, addClass, toggleClass, removeClass, $e,\n    input_default_value, input_set_default_value, input_differs } from \"./ui.js\";\nimport { Filediff, Linediff } from \"./diff.js\";\nimport { Note } from \"./note.js\";\nimport { GradeClass } from \"./gc.js\";\nimport { render_onto } from \"./render.js\";\n\n\nlet id_counter = 0, late_hours_entry;\nconst gradesheet_props = {\n    // must include props from GradeExport and from StudentSet::json_basics\n    \"pset\": true,\n    \"uid\": true, \"user\": true, \"anon_user\": true, \"email\": true, \"first\": true, \"last\": true,\n    \"year\": true, \"x\": true, \"dropped\": true, \"imageid\": true,\n    \"commit\": true, \"base_commit\": true, \"base_handout\": true, \"grade_commit\": true, \"emptydiff\": true, \"do_not_grade\": true,\n    \"late_hours\": true, \"auto_late_hours\": true,\n    \"student_timestamp\": true, \"grades_latest\": true,\n    \"version\": true, \"history\": true, \"total_type\": true, \"total\": true,\n    \"total_noextra\": true, \"answer_version\": true,\n    \"scores_editable\": true, \"answers_editable\": true,\n    \"linenotes\": true, \"gradercid\": true, \"has_notes\": true, \"has_nongrader_notes\": true,\n    \"repo\": true, \"repo_broken\": true, \"repo_unconfirmed\": true,\n    \"repo_too_open\": true, \"repo_handout_old\": true, \"repo_partner_error\": true,\n    \"repo_sharing\": true,\n    \"flagid\": true, \"conversation\": true, \"conversation_pfx\": true, \"at\": true\n};\n\nfunction pa_resetgrade() {\n    removeClass(this, \"pa-resetgrade\");\n    this.removeEventListener(this, pa_resetgrade, false);\n    if (!input_differs(this)) {\n        const gi = GradeSheet.closest(this),\n            gr = this.closest(\".pa-grade\");\n        queueMicrotask(function () { gi.update_at(gr); });\n    }\n}\n\nfunction title_span(ftext) {\n    const x = document.createElement(\"span\");\n    document.body.appendChild(x);\n    render_onto(x, \"f\", ftext);\n    x.remove();\n    return x;\n}\n\nexport class GradeEntry {\n    constructor(x) {\n        Object.assign(this, x);\n        this.type = this.type || \"numeric\";\n        this.gc = GradeClass.find(this.type);\n        this.disabled = !!this.disabled;\n        this.normal = true;\n        this._abbr = null;\n        this._all = null;\n    }\n\n    get type_tabular() {\n        return this.gc.type_tabular;\n    }\n\n    student_visible(gi) {\n        return this.visible === true\n            || (this.visible == null && (this.answer || gi.scores_visible));\n    }\n\n    get title_node() {\n        let t = this.title, ch;\n        if (!t) {\n            return this.key;\n        } else if (t.charCodeAt(0) === 60 /* \"<\" */\n                   && (ch = t.charCodeAt(1)) >= 48\n                   && ch <= 57) {\n            return title_span(t);\n        } else {\n            return t;\n        }\n    }\n\n    get title_html() {\n        let t = this.title, ch;\n        if (!t) {\n            return this.key;\n        } else if (t.charCodeAt(0) === 60 /* \"<\" */\n                   && (ch = t.charCodeAt(1)) >= 48\n                   && ch <= 57) {\n            return title_span(t).innerHTML;\n        } else {\n            return escape_entities(t);\n        }\n    }\n\n    get title_text() {\n        let t = this.title, ch;\n        if (!t) {\n            return this.key;\n        } else if (t.charCodeAt(0) === 60 /* \"<\" */\n                   && (ch = t.charCodeAt(1)) >= 48\n                   && ch <= 57) {\n            return title_span(t).textContext;\n        } else {\n            return t;\n        }\n    }\n\n    abbr() {\n        this._abbr || this.compute_abbr();\n        return this._abbr;\n    }\n\n    compute_abbr() {\n        const order = this._all ? this._all.order : [this.key],\n            value_order = this._all ? this._all.value_order : [this.key],\n            entries = this._all ? this._all.entries : {[this.key]: this};\n        let pabbr = {}, grade_titles = [];\n\n        for (let i = 0; i !== order.length; ++i) {\n            entries[order[i]]._abbr = \":\" + i;\n        }\n        for (let i = 0; i !== value_order.length; ++i) {\n            const k = value_order[i], ge = entries[k], t = ge.title_text;\n            grade_titles.push(t);\n            let m = t.match(/^(p)(?:art[\\s\\d]|(?=\\d))([-.a-z\\d]+)(?:[\\s:]+|$)/i)\n                || t.match(/^(q)(?:uestion[\\s\\d]|(?=\\d))([-.a-z\\d]+)(?:[\\s:]+|$)/i)\n                || t.match(/^[\\s:]*()(\\S{1,3}[\\d.]*)[^\\s\\d]*[\\s:]*/);\n            if (m) {\n                let abbr = m[1] + m[2],\n                    rest = t.substring(m[0].length),\n                    abbrx;\n                while ((abbrx = pabbr[abbr])) {\n                    if (abbrx !== true\n                        && (m = abbrx[1].match(/^(\\S{1,3}[\\d.]*)\\S*[\\s:]*(.*)$/))) {\n                        abbrx[0]._abbr += m[1];\n                        pabbr[abbrx[0]._abbr] = [abbrx[0], m[2]];\n                        pabbr[abbr] = abbrx = true;\n                    }\n                    if ((m = rest.match(/^(\\S{1,3}[\\d.]*)[^\\s\\d]*[\\s:]*(.*)$/))) {\n                        abbr += m[1];\n                        rest = m[2];\n                    } else {\n                        if (abbrx !== true) {\n                            abbr += \":\" + i;\n                        }\n                        break;\n                    }\n                }\n                ge._abbr = abbr;\n                pabbr[abbr] = [ge, rest];\n            }\n        }\n    }\n\n    render(gi, mode) {\n        if (mode == null) {\n            mode = !this.readonly\n                && (this.answer ? gi.answers_editable : gi.scores_editable) ? 2 : 0;\n        }\n        const id = \"pe-ge\" + ++id_counter,\n            pge = document.createElement(\"div\"),\n            le = document.createElement(\"label\"),\n            pde = document.createElement(mode === 2 ? \"form\" : \"div\"),\n            hidden = this.student_visible(gi) ? \"\" : \" pa-p-hidden\";\n        pge.className = \"pa-grade pa-p\".concat(mode ? \" e\" : \"\", this.answer ? \" pa-ans\" : \"\", hidden);\n        pge.setAttribute(\"data-pa-grade\", this.key);\n        le.className = \"pa-pt\";\n        le.htmlFor = id;\n        le.innerHTML = this.title_html;\n        pge.appendChild(le);\n        if (this.description) {\n            const de = document.createElement(\"div\");\n            de.className = \"pa-pdesc pa-dr\";\n            render_onto(de, \"f\", this.description);\n            pge.appendChild(de);\n        }\n        pde.className = mode === 2 ? \"ui-submit pa-pv\" : \"pa-pv\";\n        pge.appendChild(pde);\n        this.mount_at(pde, id, mode);\n        return pge;\n    }\n\n    mount_at(pde, id, edit) {\n        let t;\n        if (edit) {\n            t = this.gc.mount_edit.call(this, pde, id);\n        } else {\n            t = this.gc.mount_show.call(this, pde, id);\n        }\n        if (typeof t === \"string\") {\n            pde.innerHTML = t;\n        } else if (t instanceof Node) {\n            pde.replaceChildren(t);\n        }\n        if (edit) {\n            $(pde).find(\".need-autogrow\").autogrow();\n        }\n    }\n\n    update_edit(pde, v, opts) {\n        const ve = pde.querySelector(\".pa-gradevalue\"),\n            vt = this.simple_text(v);\n\n        // “grade is above max” message\n        if (this.max) {\n            const has_max = pde.nextSibling && pde.nextSibling.classList.contains(\"pa-gradeabovemax\");\n            if (!v || v <= this.max) {\n                has_max && pde.parentElement.removeChild(pde.nextSibling);\n            } else if (!has_max) {\n                const e = document.createElement(\"div\");\n                e.classList = \"pa-pvnote pa-gradeabovemax\";\n                e.textContent = \"Grade is above max\";\n                pde.parentElement.insertBefore(e, pde.nextSibling);\n            }\n        }\n\n        // “autograde differs” message\n        let gd = pde.querySelector(\".pa-gradediffers\");\n        if (opts.autograde == null || v === opts.autograde) {\n            gd && gd.remove();\n        } else {\n            const txt = (this.key === \"late_hours\" ? \"auto-late hours\" : \"autograde\") +\n                \" is \" + this.text(opts.autograde);\n            if (!gd) {\n                pde.appendChild((gd = $e(\"span\", \"pa-gradediffers\")));\n            }\n            if (gd.textContent !== txt) {\n                gd.textContent = txt;\n            }\n        }\n\n        // do not update if user has edited\n        if (hasClass(pde, \"pa-dirty\")) {\n            return;\n        }\n\n        // update on blur if element is focused\n        if (ve && ve.type !== \"hidden\" && ve.matches(\":focus\")) {\n            if (!hasClass(ve, \"pa-resetgrade\")\n                && vt !== input_default_value(ve)) {\n                addClass(ve, \"pa-resetgrade\");\n                ve.addEventListener(\"blur\", pa_resetgrade, false);\n            }\n            return;\n        }\n\n        // grade value: update value if reset or fresh;\n        // update default value always\n        const fresh = ve && hasClass(ve, \"pa-fresh\"),\n            reset = opts.reset || fresh;\n        if (reset || !ve) {\n            this.gc.update_edit.call(this, pde, v, opts);\n        }\n        if (ve) {\n            input_set_default_value(ve, vt);\n        }\n\n        // landmark\n        if (this.landmark) {\n            this.update_landmark(pde);\n        }\n\n        // UI: sidebar tabbing, autogrow\n        if (ve && opts.sidebar) {\n            ve.tabIndex = -1;\n            ve.classList.add(\"uikd\", \"pa-sidebar-tab\");\n        }\n        if (fresh) {\n            removeClass(ve, \"pa-fresh\");\n        }\n        $(pde).find(\"input, textarea\").autogrow();\n    }\n\n    update_show(pde, v, opts) {\n        const ve = pde.classList.contains(\"pa-gradevalue\")\n            ? pde\n            : pde.querySelector(\".pa-gradevalue\");\n        let hidden;\n        if (this.gc.update_show) {\n            hidden = this.gc.update_show.call(this, ve, v, opts);\n        } else {\n            let gt = this.text(v);\n            hidden = gt === \"\" && (!this.max || this.required) && /*???*/ !this.answer;\n            if (!hidden) {\n                if (gt === \"\") {\n                    gt = \"—\";\n                }\n                if (ve.textContent !== gt) {\n                    ve.textContent = gt;\n                }\n            }\n        }\n        if (hidden != null) {\n            const clg = pde.closest(\".pa-grade\");\n            toggleClass(clg, this.description ? \"pa-hidden-description\" : \"hidden\", hidden);\n        }\n        this.landmark && this.update_landmark(pde);\n    }\n\n    update_at(elt, v, opts) {\n        let pde = elt.firstChild;\n        while (!hasClass(pde, \"pa-pv\")) {\n            pde = pde.nextSibling;\n        }\n        if (hasClass(elt, \"e\")) {\n            this.update_edit(pde, v, opts);\n        } else {\n            this.update_show(pde, v, opts);\n        }\n    }\n\n    update_landmark(pde) {\n        const gl = pde.closest(\".pa-gradelist\");\n        if (!gl || !hasClass(gl, \"want-landmark-links\")) {\n            return;\n        }\n        let pgbr = pde.querySelector(\".pa-gradeboxref\");\n        if (this.landmark ? pgbr && pgbr.getAttribute(\"data-landmark\") === this.landmark : !pgbr) {\n            return;\n        }\n        const m = /^(.*):(\\d+)$/.exec(this.landmark);\n        if (m && Filediff.by_file(m[1])) {\n            const pi = pde.closest(\".pa-psetinfo\"),\n                directory = pi.getAttribute(\"data-pa-directory\") || \"\",\n                filename = m[1].startsWith(directory) ? m[1].substring(directory.length) : m[1];\n            pgbr || pde.append((pgbr = $e(\"span\", \"pa-gradeboxref\")));\n            pgbr.setAttribute(\"data-landmark\", this.landmark);\n            pgbr.replaceChildren(\"@\", $e(\"a\", {href: \"#La\".concat(m[2], \"F\", html_id_encode(m[1]))}, filename + \":\" + m[2]));\n        } else {\n            pgbr && pgbr.remove();\n        }\n    }\n\n    unmount_at(elt) {\n        this.gc.unmount.call(this, elt);\n    }\n\n    text(v) {\n        return this.gc.text.call(this, v);\n    }\n\n    simple_text(v) {\n        return this.gc.simple_text.call(this, v);\n    }\n\n    configure_column(col) {\n        return this.gc.configure_column.call(this, col);\n    }\n\n    tcell_width() {\n        const w = this.gc.tcell_width || 3;\n        return typeof w === \"function\" ? w.call(this) : w;\n    }\n\n    tcell(v) {\n        return this.gc.tcell.call(this, v);\n    }\n\n    landmark_lines(t, selector) {\n        const m = (this.landmark_range ? /:(\\d+):(\\d+)$/.exec(this.landmark_range) : null);\n        if (!m) {\n            throw new Error(\"bad landmark_lines\");\n        }\n        const lo = +m[1];\n        let fd = t instanceof Linediff ? t.element : t, lm;\n        while (!hasClass(fd, \"pa-filediff\")\n               && (!(lm = fd.getAttribute(\"data-pa-landmark\"))\n                   || lm.charAt(0) !== \"a\"\n                   || parseInt(lm.substring(1)) > lo)) {\n            fd = fd.parentElement;\n        }\n        return Linediff.range(fd, +m[1], +m[2], selector);\n    }\n\n    landmark_grade(t) {\n        let sum = null;\n\n        for (let ln of this.landmark_lines(t, \".pa-gw\")) {\n            const note = Note.at(ln.element);\n            let m, gch;\n            if (note.text\n                && ((m = /^[\\s❮→]*(\\+)(\\d+(?:\\.\\d+)?|\\.\\d+)((?![.,]\\w|[\\w%$*])\\S*?)[.,;:❯]?(?:\\s|$)/.exec(note.text))\n                    || (m = /^[\\s❮→]*()(\\d+(?:\\.\\d+)?|\\.\\d+)(\\/[\\d.]+(?![.,]\\w|[\\w%$*/])\\S*?)[.,;:❯]?(?:\\s|$)/.exec(note.text)))) {\n                if (sum === null) {\n                    sum = 0.0;\n                }\n                sum += parseFloat(m[2]);\n                gch = escape_entities(this.title_text).concat(\": \", escape_entities(m[1]), \"<b>\", escape_entities(m[2]), \"</b>\", escape_entities(m[3]));\n            }\n            let $nd = $(ln.element).find(\".pa-note-gradecontrib\");\n            if (!$nd.length && gch) {\n                $nd = $('<div class=\"pa-note-gradecontrib\"></div>').insertBefore($(ln.element).find(\".pa-note\"));\n            }\n            gch ? $nd.html(gch) : $nd.remove();\n        }\n\n        if (this.round && sum != null) {\n            if (this.round === \"up\") {\n                sum = Math.ceil(sum);\n            } else if (this.round === \"down\") {\n                sum = Math.floor(sum);\n            } else {\n                sum = Math.round(sum);\n            }\n        }\n\n        const gh = t.closest(\".pa-grade\") || t.closest(\".pa-grade-range-block\");\n        let gnv = gh.querySelector(\".pa-notes-grade\");\n        if (sum === null) {\n            gnv.remove();\n        } else {\n            if (!gnv) {\n                const gs = hasClass(gh, \"pa-grade\") ? gh : gh.querySelector(\".pa-grade\");\n                let e = gs.firstChild;\n                while (e && !hasClass(e, \"pa-pv\")) {\n                    e = e.nextSibling;\n                }\n                e = e.firstChild;\n                while (e && (e.nodeType !== 1 || hasClass(e, \"pa-gradewidth\") || hasClass(e, \"pa-gradedesc\"))) {\n                    e = e.nextSibling;\n                }\n                gnv = $e(\"button\", {type: \"button\", \"class\": \"link uic uikd pa-notes-grade\"});\n                this.lastChild.insertBefore(gnv, e);\n            }\n            gnv.textContent = \"Notes grade \" + sum;\n        }\n\n        return sum;\n    }\n\n    save_landmark_grade(t) {\n        const sum = this.landmark_grade(t);\n\n        const gv = t.querySelector(\".pa-gradevalue\");\n        if (gv) {\n            const sumstr = sum === null ? \"\" : \"\" + sum,\n                gval = $(gv).val();\n            if (gval == gv.getAttribute(\"data-pa-notes-grade\")\n                && sumstr != gval) {\n                $(gv).val(sumstr).change();\n            }\n            gv.setAttribute(\"data-pa-notes-grade\", sumstr);\n        }\n\n        return sum;\n    }\n\n    value_order_in(gi) {\n        const i = gi.vpos[this.key];\n        return i != null ? i : null;\n    }\n\n    value_in(gi) {\n        const i = gi.grades ? gi.vpos[this.key] : null;\n        return i != null ? gi.grades[i] : null;\n    }\n\n    autovalue_in(gi) {\n        const i = gi.autogrades ? gi.vpos[this.key] : null;\n        return i != null ? gi.autogrades[i] : null;\n    }\n\n    has_later_value_in(gi) {\n        return this.answer\n            && gi.grades_latest\n            && this.key in gi.grades_latest\n            && this.value_in(gi) !== gi.grades_latest[this.key];\n    }\n\n    static closest(elt) {\n        const e = elt.closest(\".pa-grade\"),\n            gi = GradeSheet.closest(e);\n        return gi.entries[e.getAttribute(\"data-pa-grade\")];\n    }\n\n    static late_hours() {\n        late_hours_entry = late_hours_entry || new LateHoursEntry;\n        return late_hours_entry;\n    }\n}\n\nclass LateHoursEntry extends GradeEntry {\n    constructor() {\n        super({key: \"late_hours\", title: \"late hours\"});\n        this.normal = false;\n    }\n    value_in(gi) {\n        return gi.late_hours;\n    }\n    autovalue_in(gi) {\n        return gi.auto_late_hours;\n    }\n}\n\nexport class GradeSheet {\n    constructor(x) {\n        this.entries = {};\n        this.parent = null;\n        this.root = this;\n        if (x) {\n            this.assign(x);\n        }\n    }\n\n    make_child() {\n        const gi = new GradeSheet;\n        Object.assign(gi, this);\n        gi.parent = gi.root = this;\n        return gi;\n    }\n\n    set_entry(ge) {\n        if (this.entries !== this.root.entries) { throw new Error(\"!\"); }\n        this.entries[ge.key] = ge;\n        ge._all = this.root;\n    }\n\n    assign(x) {\n        const old_value_order = this.value_order;\n        if (x.entries) {\n            for (let i in x.entries) {\n                this.set_entry(new GradeEntry(x.entries[i]));\n            }\n        }\n        if (x.order) {\n            this.order = x.order;\n        }\n        if (x.fixed_value_order && !this.parent) {\n            this.fixed_value_order = x.fixed_value_order;\n        }\n        this.value_order = this.fixed_value_order || this.order;\n        if (this.value_order !== old_value_order) {\n            this.vpos = {};\n            for (let i = 0; i !== this.value_order.length; ++i) {\n                this.vpos[this.value_order[i]] = i;\n            }\n            if (old_value_order) {\n                this.grades = this.autogrades = this.maxtotal = null;\n            }\n        }\n        if (x.grades) {\n            this.grades = this.merge_grades(this.grades, x.grades, x);\n        }\n        if (x.autogrades) {\n            this.autogrades = this.merge_grades(this.autogrades, x.autogrades, x);\n        }\n        if (\"scores_visible\" in x) {\n            if (this.parent) {\n                if ((this.scores_visible_pinned = x.scores_visible != null)) {\n                    this.scores_visible = x.scores_visible;\n                } else {\n                    this.scores_visible = this.parent.scores_visible;\n                }\n            } else {\n                this.scores_visible = x.scores_visible;\n            }\n        }\n        for (let k in x) {\n            if (gradesheet_props[k])\n                this[k] = x[k];\n        }\n        return this;\n    }\n\n    merge_grades(myg, ing, x) {\n        let inorder = x.fixed_value_order || x.order || this.value_order;\n        if (!myg && inorder === this.value_order) {\n            return ing;\n        } else {\n            myg = myg || [];\n            for (let i in inorder) {\n                const j = this.vpos[inorder[i]];\n                if (j != null) {\n                    while (myg.length <= j) {\n                        myg.push(null);\n                    }\n                    myg[j] = ing[i];\n                }\n            }\n            return myg;\n        }\n    }\n\n    xentry(key) {\n        const ge = this.entries[key];\n        if (ge) {\n            return ge;\n        } else if (key === \"late_hours\") {\n            return GradeEntry.late_hours();\n        } else {\n            return null;\n        }\n    }\n\n    *value_entries() {\n        for (const key of this.value_order) {\n            yield this.entries[key];\n        }\n    }\n\n    remount_at(elt, mode) {\n        const ge = this.xentry(elt.getAttribute(\"data-pa-grade\"));\n        if (ge) {\n            let pde = elt.firstChild, id;\n            while (!hasClass(pde, \"pa-pv\")) {\n                pde.tagName === \"LABEL\" && (id = pde.htmlFor);\n                pde = pde.nextSibling;\n            }\n            while (pde.nextSibling) {\n                elt.removeChild(pde.nextSibling);\n            }\n            if (typeof mode === \"boolean\") {\n                mode = mode ? 2 : 0;\n            }\n            const pdx = document.createElement(mode === 2 ? \"form\" : \"div\");\n            pdx.className = mode === 2 ? \"ui-submit pa-pv\" : \"pa-pv\";\n            toggleClass(elt, \"e\", mode !== 0);\n            elt.replaceChild(pdx, pde);\n            mode === 2 && removeClass(elt, \"hidden\");\n            ge.mount_at(pdx, id, mode !== 0);\n            $(pde).find(\"input, textarea\").unautogrow();\n        }\n    }\n\n    update_at(elt, opts) {\n        const ge = this.xentry(elt.getAttribute(\"data-pa-grade\"));\n        // find value to assign\n        let gval = ge.value_in(this);\n        if (ge.has_later_value_in(this)) {\n            const label = elt.firstChild;\n            if (label.classList.contains(\"pa-grade-latest\")) {\n                gval = this.grades_latest[ge.key];\n            } else if (!label.classList.contains(\"uic\")) {\n                label.classList.add(\"pa-grade-earlier\", \"uic\", \"need-tooltip\");\n                label.setAttribute(\"aria-label\", \"Toggle latest version\");\n            }\n        }\n        // perform update\n        const xopts = {gradesheet: this, autograde: ge.autovalue_in(this)};\n        if (opts) {\n            Object.assign(xopts, opts);\n        }\n        ge.update_at(elt, gval, xopts);\n    }\n\n    grade_total(noextra) {\n        let total = null;\n        for (let i = 0; i !== this.value_order.length; ++i) {\n            const ge = this.entries[this.value_order[i]];\n            if (ge && ge.in_total && (!noextra || !ge.is_extra)) {\n                const gv = this.grades && this.grades[i];\n                if (gv != null) {\n                    total = (total || 0) + gv;\n                }\n            }\n        }\n        return total !== null ? Math.round(total * 1000) / 1000 : total;\n    }\n\n    get grade_maxtotal() {\n        if (this.maxtotal == null) {\n            let maxtotal = 0;\n            for (let i = 0; i !== this.value_order.length; ++i) {\n                const ge = this.entries[this.value_order[i]];\n                if (ge && ge.in_total && !ge.is_extra && ge.max\n                    && (!ge.required\n                        || this.scores_editable\n                        || (this.grades && this.grades[i] !== null))) {\n                    maxtotal += ge.max;\n                }\n            }\n            this.maxtotal = Math.round(maxtotal * 1000) / 1000;\n        }\n        return this.maxtotal;\n    }\n\n    file_anchor(file) {\n        if (hasClass(document.body, \"pa-multiuser\")) {\n            return \"U\".concat(html_id_encode(this.user), \"/F\", html_id_encode(file));\n        } else {\n            return \"F\" + html_id_encode(file);\n        }\n    }\n\n    get has_sections() {\n        for (let i = 0; i !== this.order.length; ++i) {\n            const ge = this.entries[this.order[i]];\n            if (ge.type === \"section\") {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    has(f) {\n        for (let i = 0; i !== this.value_order.length; ++i) {\n            const gei = this.entries[this.value_order[i]];\n            if (f(gei, this))\n                return true;\n        }\n        return false;\n    }\n\n    section_has(ge, f) {\n        let start = this.vpos[ge.key];\n        while (start != null && start < this.value_order.length) {\n            const gei = this.entries[this.value_order[start]];\n            if (gei !== ge && gei.type === \"section\") {\n                break;\n            } else if (f(gei, this)) {\n                return true;\n            }\n            ++start;\n        }\n        return false;\n    }\n\n    section_wants_sidebar(ge) {\n        let answer = 0;\n        return this.scores_editable && this.section_has(ge, gei => {\n            answer |= gei.answer ? 1 : 2;\n            return answer === 3;\n        });\n    }\n\n    static store(element, x) {\n        if (!hasClass(element, \"pa-psetinfo\")) {\n            throw new Error(\"bad GradeSheet.store\");\n        }\n        const gi = GradeSheet.closest(element);\n        gi.assign(x);\n        window.$pa.loadgrades.call(element);\n    }\n\n    static closest(element) {\n        element = element.closest(\".pa-psetinfo\");\n        if (!element) {\n            return null;\n        }\n        if (element.pa__gradesheet) {\n            return element.pa__gradesheet;\n        }\n        let gi;\n        if (hasClass(element, \"pa-psetinfo-partial\")\n            && (gi = GradeSheet.closest(element.parentElement))) {\n            gi = gi.make_child();\n        }\n        gi = gi || new GradeSheet;\n        if (element.hasAttribute(\"data-pa-gradeinfo\")) {\n            try {\n                let x = JSON.parse(element.getAttribute(\"data-pa-gradeinfo\") || \"{}\");\n                gi.assign(x);\n            } catch {\n            }\n        }\n        Object.defineProperty(element, \"pa__gradesheet\", {\n            value: gi, configurable: true, writable: true\n        });\n        return gi;\n    }\n}\n","// note-edit.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { escape_entities, regexp_quote } from \"./encoders.js\";\nimport { hoturl } from \"./hoturl.js\";\nimport { hasClass, addClass, removeClass, handle_ui } from \"./ui.js\";\nimport { event_key, event_modkey } from \"./ui-key.js\";\nimport { Linediff } from \"./diff.js\";\nimport { Note } from \"./note.js\";\nimport { GradeSheet } from \"./gradeentry.js\";\nimport { ftext, render_onto } from \"./render.js\";\nimport { tooltip } from \"./tooltip.js\";\n\n\nlet curline, down_event, scrolled_x, scrolled_y, scrolled_at;\n\nfunction locate(e) {\n    while (e && e.tagName !== \"TEXTAREA\" && e.tagName !== \"A\") {\n        if (hasClass(e, \"pa-dl\")) {\n            for (let ln of Linediff.all(e)) {\n                if (ln.is_note()) {\n                    return ln;\n                } else if (ln.element !== e && ln.is_visible() && !ln.is_annotation()) {\n                    break;\n                }\n            }\n            return new Linediff(e);\n        }\n        e = e.parentElement;\n    }\n    return null;\n}\n\nfunction render_form($tr, note, transition) {\n    $tr.removeClass(\"hidden\").addClass(\"editing\");\n    var $td = $tr.find(\".pa-notebox\");\n    if (transition) {\n        $tr.css(\"display\", \"\").children().css(\"display\", \"\");\n        var $content = $td.children();\n        $content.slideUp(80).queue(function () { $content.remove(); });\n    }\n\n    let gi = GradeSheet.closest(curline.element),\n        format = note ? note.format : null;\n    if (format == null) {\n        format = document.body.getAttribute(\"data-default-format\");\n    }\n    let t = '<form method=\"post\" action=\"'.concat(\n        escape_entities(hoturl(\"=api/linenote\", {psetinfo: gi.element, file: curline.file, line: curline.note_lineid, oldversion: (note && note.version) || 0, format: format})),\n        '\" enctype=\"multipart/form-data\" accept-charset=\"UTF-8\" class=\"ui-submit pa-noteform\">',\n        '<textarea class=\"pa-note-entry need-autogrow\" name=\"note\"></textarea>',\n        '<div class=\"aab aabr pa-note-aa justify-content-between\">',\n        '<div class=\"aabutr order-100\"><button class=\"btn-primary\" type=\"submit\">Save comment</button></div>',\n        '<div class=\"aabutr order-99\"><button type=\"button\" name=\"cancel\">Cancel</button></div>',\n        '<div class=\"aabut\"><button type=\"button\" class=\"btn ui pa-load-note-suggestions\">↡</button></div>');\n    if (!gi.scores_visible) {\n        t += '<div class=\"aabut\"><label class=\"checki\"><input type=\"checkbox\" name=\"iscomment\" value=\"1\" class=\"checkc\">Show immediately</label></div>';\n    }\n    t += '<div class=\"aabut flex-grow-1\"></div>';\n    var $form = $(t + '</div></form>').appendTo($td);\n\n    var $ta = $form.find(\"textarea\");\n    if (note && note.ftext !== null) {\n        const text = note.editable_text;\n        $ta.text(text);\n        $ta[0].setSelectionRange && $ta[0].setSelectionRange(text.length, text.length);\n    }\n    $ta.autogrow().keydown(textarea_keydown);\n    $form.find(\"input[name=iscomment]\").prop(\"checked\", !!(note && note.iscomment));\n    $form.find(\"button[name=cancel]\").click(cancel);\n    $form.on(\"submit\", function () {\n        pa_save_my_note(this.closest(\".pa-dl\"));\n    });\n    if (transition) {\n        $ta.focus();\n        $form.hide().slideDown(100);\n    }\n}\n\nfunction set_scrolled_at(evt) {\n    if (evt && evt.screenX != null) {\n        scrolled_at = evt.timeStamp;\n        scrolled_x = evt.screenX;\n        scrolled_y = evt.screenY;\n    }\n}\n\nfunction arrowcapture(evt) {\n    let key, modkey;\n    if ((evt.type === \"mousemove\"\n         && scrolled_at\n         && ((Math.abs(evt.screenX - scrolled_x) <= 1 && Math.abs(evt.screenY - scrolled_y) <= 1)\n             || evt.timeStamp - scrolled_at <= 500))\n        || ((evt.type === \"keydown\" || evt.type === \"keyup\")\n            && event_key.is_modifier(evt))) {\n        return;\n    } else if (evt.type !== \"keydown\"\n               || ((key = event_key(evt)) !== \"ArrowUp\"\n                   && key !== \"ArrowDown\"\n                   && key !== \"Enter\")\n               || ((modkey = event_modkey(evt))\n                   && (modkey !== event_modkey.META || key !== \"Enter\"))\n               || !curline) {\n        return uncapture();\n    }\n\n    let ln = curline.visible_source();\n    if (ln && (key === \"ArrowDown\" || key === \"ArrowUp\")) {\n        removeClass(ln.element, \"live\");\n        let start = ln;\n        const flags = Linediff.ANYFILE + (key === \"ArrowDown\" ? 0 : Linediff.BACKWARD);\n        ln = null;\n        for (let lnx of Linediff.all(start, flags)) {\n            if (lnx.element !== start.element && lnx.is_visible() && lnx.is_source()) {\n                ln = lnx;\n                break;\n            }\n        }\n    }\n    if (ln) {\n        curline = ln;\n        evt.preventDefault();\n        set_scrolled_at(evt);\n        if (key === \"Enter\") {\n            make_linenote();\n        } else {\n            const wf = ln.element.closest(\".pa-with-fixed\");\n            $(ln.element).addClass(\"live\").scrollIntoView(wf ? {marginTop: wf.firstChild.offsetHeight} : null);\n        }\n        return true;\n    } else {\n        return uncapture();\n    }\n}\n\nfunction capture(tr, keydown) {\n    if (!hasClass(tr, \"pa-gw\")) {\n        addClass(tr, \"live\");\n    }\n    $(\".pa-filediff\").removeClass(\"live\");\n    $(document).off(\".pa-linenote\");\n    $(document).on((keydown ? \"keydown.pa-linenote \" : \"\") + \"mousemove.pa-linenote mousedown.pa-linenote\", arrowcapture);\n}\n\nfunction uncapture() {\n    $(\".pa-dl.live\").removeClass(\"live\");\n    $(\".pa-filediff\").addClass(\"live\");\n    $(document).off(\".pa-linenote\");\n}\n\nfunction unedit(note) {\n    const done = note.render(true),\n        ctr = curline && curline.visible_source();\n    ctr && capture(ctr.element, true);\n    return done;\n}\n\nfunction pa_save_my_note(elt) {\n    if (!hasClass(elt, \"pa-gw\")) {\n        throw new Error(\"bad `elt` in pa_save_my_note\");\n    } else if (!hasClass(elt, \"pa-outstanding\")) {\n        const f = $(elt).find(\"form\")[0],\n            text = f.elements.note.value,\n            iscomment = f.elements.iscomment && f.elements.iscomment.checked;\n        $(f).find(\".pa-save-message\").remove();\n        $(f).find(\".aab\").append('<div class=\"aabut pa-save-message\">Saving…</div>');\n        Note.at(elt).save_text(text, iscomment).then(() => {\n            const ctr = curline ? curline.visible_source() : null;\n            ctr && capture(ctr.element, true);\n        });\n    }\n}\n\nfunction cancel() {\n    unedit(Note.closest(this).cancel_edit());\n    return true;\n}\n\nfunction textarea_keydown(evt) {\n    if (event_key(evt) === \"Escape\" && !event_modkey(evt) && unedit(Note.closest(this))) {\n        return false;\n    } else if (event_key(evt) === \"Enter\" && event_modkey(evt) === event_modkey.META) {\n        $(this).closest(\"form\").submit();\n        return false;\n    } else {\n        return true;\n    }\n}\n\nfunction nearby(dx, dy) {\n    return (dx * dx) + (dy * dy) < 144;\n}\n\nfunction pa_linenote(event) {\n    var dl = event.target.closest(\".pa-dl\");\n    if (event.button !== 0\n        || !dl\n        || hasClass(dl, \"pa-gx\")\n        || event.target.matches(\"button, a, textarea, input, label\")\n        || event.target.closest(\".pa-note-suggestions\")) {\n        return;\n    }\n    var line = locate(event.target),\n        t = new Date().getTime();\n    if (event.type === \"mousedown\" && line) {\n        if (curline\n            && curline.element === line.element\n            && down_event\n            && nearby(down_event[0] - event.clientX, down_event[1] - event.clientY)\n            && t - down_event[2] <= 500) {\n            // skip\n        } else {\n            curline = line;\n            down_event = [event.clientX, event.clientY, t, false];\n        }\n    } else if (event.type === \"mouseup\" && line) {\n        if (curline\n            && curline.element === line.element\n            && down_event\n            && nearby(down_event[0] - event.clientX, down_event[1] - event.clientY)\n            && !down_event[3]) {\n            curline = line;\n            down_event[3] = true;\n            make_linenote(event);\n        }\n    } else if (event.type === \"click\" && line) {\n        curline = line;\n        make_linenote(event);\n    } else {\n        curline = down_event = null;\n    }\n}\n\nfunction make_linenote(event) {\n    const note = Note.near(curline), tr = note.force_element();\n    set_scrolled_at(event);\n    if (hasClass(tr, \"editing\")) {\n        if (unedit(note)) {\n            event && event.stopPropagation();\n            return true;\n        } else {\n            var $ta = $(tr).find(\"textarea\").focus();\n            $ta[0].setSelectionRange && $ta[0].setSelectionRange(0, $ta.val().length);\n            return false;\n        }\n    } else {\n        render_form($(tr), note, true);\n        capture(curline.element, false);\n        return false;\n    }\n}\n\nhandle_ui.on(\"pa-editablenotes\", pa_linenote);\n\n\nfunction my_note_feedback(ln) {\n    const uid = siteinfo.user.cid;\n    if (ln.like && ln.like.indexOf(uid) >= 0) {\n        return 1;\n    } else if (ln.dislike && ln.dislike.indexOf(uid) >= 0) {\n        return -1;\n    } else {\n        return 0;\n    }\n}\n\nfunction display_note_suggestions(form, ns) {\n    let $f = $(form).find(\".pa-note-suggestions\");\n    if (!$f.length) {\n        const sugui = document.createElement(\"div\"),\n            search = document.createElement(\"input\");\n        sugui.className = \"pa-note-suggestions mt-4\";\n        search.type = \"search\";\n        search.className = \"uikd uii pa-search-suggestions mb-3\";\n        search.placeholder = \"Search…\";\n        sugui.append(search);\n        $(sugui).insertBefore($(form).find(\".pa-note-aa\"));\n        $f = $(sugui);\n    }\n    for (const n of ns) {\n        const mf = my_note_feedback(n),\n            li = document.createElement(\"div\"),\n            gf = (n.like || []).length - (n.dislike || []).length;\n        li.className = \"pa-note-suggestion\".concat(mf < 0 || (mf === 0 && gf < 0) ? \" dim\" : \"\");\n        li.setAttribute(\"data-content\", n.ftext);\n        $f[0].appendChild(li);\n        const bbox = document.createElement(\"div\"),\n            b1 = document.createElement(\"button\"),\n            b2 = document.createElement(\"button\"),\n            tx = document.createElement(\"div\");\n        bbox.className = \"btnbox small\";\n        bbox.append(b1, b2);\n        tx.className = \"flex-grow-1\";\n        li.append(bbox, tx);\n        b1.type = b2.type = \"button\";\n        b1.className = \"ui pa-use-suggestion like\".concat(mf > 0 ? \" taken\" : \"\");\n        b1.setAttribute(\"aria-label\", \"Use\");\n        b1.textContent = \"✔️\";\n        b2.className = \"ui pa-use-suggestion dislike\".concat(mf < 0 ? \" taken\" : \"\");\n        b2.setAttribute(\"aria-label\", \"Downrank\");\n        b2.textContent = \"➖\";\n        render_onto(tx, \"f\", n.ftext);\n        tooltip.call(b1);\n        tooltip.call(b2);\n    }\n}\n\nfunction my_note_compare(/*linea*/) {\n    return function (a, b) {\n        if (a.status !== b.status) {\n            return a.status > b.status ? -1 : 1;\n        } else if (a.ftext.substring(0, 3) === b.ftext.substring(0, 3)) {\n            return a.ftext.localeCompare(b.ftext);\n        } else {\n            const af = ftext.parse(a.ftext), bf = ftext.parse(b.ftext);\n            return af.localeString(bf);\n        }\n    };\n}\n\nfunction note_suggestions(form, notelist) {\n    let oldindex = $(form).data(\"paNoteSuggestionIndex\") || 0;\n    display_note_suggestions(form, notelist.slice(oldindex, notelist.length));\n    $(form).data(\"paNoteSuggestionIndex\", notelist.length)\n        .find(\".pa-load-note-suggestions\")\n        .prop(\"disabled\", true);\n}\n\nhandle_ui.on(\"pa-load-note-suggestions\", function () {\n    const form = this.closest(\"form\");\n    let notelist = $(form).data(\"paNoteSuggestions\");\n    if (notelist) {\n        note_suggestions(form, notelist);\n    } else {\n        const ld = Linediff.closest(this),\n            args = {file: ld.file, pset: ld.pset},\n            gi = GradeSheet.closest(this);\n        if (!gi || !gi.base_commit || gi.base_handout) {\n            args.linea = ld.linea;\n        } else if (gi.user && gi.commit) {\n            let x = ld.lineb;\n            if (x !== null) {\n                args.u = gi.user;\n                args.line = \"b\" + x;\n                args.commit = gi.commit;\n            }\n        }\n        this.disabled = true;\n        $.ajax(hoturl(\"api/linenotesuggest\", args), {\n            success: function (data) {\n                if (data.ok) {\n                    notelist = data.notelist || [];\n                    for (const note of notelist) {\n                        const mf = my_note_feedback(note),\n                            gf = (note.like || []).length - (note.dislike || []).length;\n                        if (mf > 0 && gf > 1) {\n                            note.status = 3;\n                        } else if (mf > 0) {\n                            note.status = 2;\n                        } else if (mf === 0 && gf > 0) {\n                            note.status = 1;\n                        } else if (mf === 0 && gf === 0) {\n                            note.status = 0;\n                        } else if (mf === -1 && gf >= 0) {\n                            note.status = -1;\n                        } else {\n                            note.status = -2;\n                        }\n                    }\n                    notelist.sort(my_note_compare(data.linea || 0));\n                    $(form).data(\"paNoteSuggestions\", notelist);\n                    note_suggestions(form, notelist);\n                }\n            }\n        });\n    }\n});\n\nfunction linenotemark(context, mark) {\n    const ld = Linediff.closest(context);\n    $.ajax(hoturl(\"=api/linenotemark\", {file: ld.file, linea: ld.linea, mark: mark, pset: ld.pset}),\n        { data: { ftext: context.getAttribute(\"data-content\") }, method: \"POST\" });\n}\n\nhandle_ui.on(\"pa-use-suggestion\", function () {\n    const e = this.closest(\".pa-note-suggestion\"),\n        f = e.closest(\"form\");\n    if (this.classList.contains(\"like\")) {\n        linenotemark(e, \"like\");\n        f.elements.note.value = ftext.parse(e.getAttribute(\"data-content\"))[1];\n    } else {\n        linenotemark(e, \"dislike\");\n        e.remove();\n    }\n});\n\nhandle_ui.on(\"pa-search-suggestions\", function (event) {\n    if (event.type === \"input\") {\n        const el = this.closest(\".pa-note-suggestions\");\n        let patterns = \"\";\n        for (const str of this.value.split(/\\s+/)) {\n            str !== \"\" && (patterns = patterns.concat(\"(?=.*\", regexp_quote(str), \")\"));\n        }\n        const regex = patterns ? new RegExp(patterns, \"i\") : null;\n        for (let ne = el.firstChild; ne; ne = ne.nextSibling) {\n            if (ne.classList.contains(\"pa-note-suggestion\")) {\n                const hidden = regex && !regex.test(ne.getAttribute(\"data-content\"));\n                ne.classList.toggle(\"hidden\", hidden);\n            }\n        }\n    } else if (event.type === \"keydown\"\n               && !(event_modkey(event) & (event_modkey.SHIFT | event_modkey.ALT))\n               && event_key(event) === \"Enter\") {\n        event.preventDefault();\n    }\n});\n","// render-terminal.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hasClass } from \"./ui.js\";\nimport { render_text } from \"./render.js\";\nimport { Filediff } from \"./diff.js\";\n\n\nconst ansistyle_map = {\n    \"0\": false, \"1\": {b: true}, \"2\": {f: true}, \"3\": {i: true},\n    \"4\": {u: true}, \"5\": {bl: true}, \"7\": {rv: true}, \"8\": {x: true},\n    \"9\": {s: true}, \"21\": {du: true}, \"22\": {b: false, f: false},\n    \"23\": {i: false}, \"24\": {u: false}, \"25\": {bl: false}, \"27\": {rv: false},\n    \"28\": {x: false}, \"29\": {s: false}, \"30\": {fg: 0}, \"31\": {fg: 1},\n    \"32\": {fg: 2}, \"33\": {fg: 3}, \"34\": {fg: 4}, \"35\": {fg: 5},\n    \"36\": {fg: 6}, \"37\": {fg: 7}, \"38\": \"fg\", \"39\": {fg: false},\n    \"40\": {bg: 0}, \"41\": {bg: 1}, \"42\": {bg: 2}, \"43\": {bg: 3},\n    \"44\": {bg: 4}, \"45\": {bg: 5}, \"46\": {bg: 6}, \"47\": {bg: 7},\n    \"48\": \"bg\", \"49\": {bg: false}, \"90\": {fg: 8}, \"91\": {fg: 9},\n    \"92\": {fg: 10}, \"93\": {fg: 11}, \"94\": {fg: 12}, \"95\": {fg: 13},\n    \"96\": {fg: 14}, \"97\": {fg: 15},\n    \"100\": {bg: 8}, \"101\": {bg: 9}, \"102\": {bg: 10}, \"103\": {bg: 11},\n    \"104\": {bg: 12}, \"105\": {bg: 13}, \"106\": {bg: 14}, \"107\": {bg: 15}\n}, ansistyle_keymap = {\n    \"b\": 1, \"f\": 2, \"i\": 3, \"u\": 4, \"bl\": 5, \"rv\": 7, \"x\": 8, \"s\": 9,\n    \"du\": 21\n};\n\nfunction ansistyle_parse(dst, style) {\n    if (arguments.length === 1) {\n        style = dst;\n        dst = null;\n    }\n    if (!style || style === \"\\x1b[m\" || style === \"\\x1b[0m\") {\n        return null;\n    }\n    let a;\n    if (style.charAt(0) === \"\\x1b\") {\n        a = style.substring(2, style.length - 1).split(\";\");\n    } else {\n        a = style.split(\";\");\n    }\n    for (let i = 0; i < a.length; ++i) {\n        const cmp = ansistyle_map[parseInt(a[i])];\n        if (cmp === false) {\n            dst = null;\n        } else if (!cmp) {\n            /* do nothing */\n        } else if (typeof cmp === \"object\") {\n            for (let j in cmp) {\n                if (cmp[j] !== false) {\n                    dst = dst || {};\n                    dst[j] = cmp[j];\n                } else if (dst) {\n                    delete dst[j];\n                }\n            }\n        } else if (cmp === \"fg\" || cmp === \"bg\") {\n            let r, g, b;\n            dst = dst || {};\n            if (i + 4 < a.length && parseInt(a[i+1]) === 2) {\n                r = parseInt(a[i+2]);\n                g = parseInt(a[i+3]);\n                b = parseInt(a[i+4]);\n                if (r <= 255 && g <= 255 && b <= 255) {\n                    dst[cmp] = [r, g, b];\n                }\n                i += 4;\n            } else if (i + 2 < a.length && parseInt(a[i+1]) === 5) {\n                const c = parseInt(a[i+2]);\n                if (c <= 15) {\n                    dst[cmp] = c;\n                } else if (c <= 0xe7) {\n                    b = (c - 16) % 6;\n                    g = ((c - 16 - b) / 6) % 6;\n                    r = (c - 16 - b - 6 * g) / 36;\n                    dst[cmp] = [r * 51, g * 51, b * 51];\n                } else if (c <= 255) {\n                    b = Math.round((c - 0xe8) * 255 / 23);\n                    dst[cmp] = [b, b, b];\n                }\n                i += 2;\n            }\n        }\n    }\n    return dst && $.isEmptyObject(dst) ? null : dst;\n}\n\nfunction ansistyle_unparse(dst) {\n    if (!dst) {\n        return \"\\x1b[m\";\n    }\n    const a = [];\n    for (let key in ansistyle_keymap) {\n        if (dst[key])\n            a.push(ansistyle_keymap[key]);\n    }\n    if (dst.fg) {\n        if (typeof dst.fg === \"number\") {\n            a.push(dst.fg < 8 ? 30 + dst.fg : 90 + dst.fg - 8);\n        } else {\n            a.push(38, 2, dst.fg[0], dst.fg[1], dst.fg[2]);\n        }\n    }\n    if (dst.bg) {\n        if (typeof dst.bg === \"number\") {\n            a.push(dst.bg < 8 ? 40 + dst.bg : 100 + dst.bg - 8);\n        } else {\n            a.push(48, 2, dst.bg[0], dst.bg[1], dst.bg[2]);\n        }\n    }\n    return \"\\x1b[\" + a.join(\";\") + \"m\";\n}\n\nfunction ansistyle_combine(a1, a2) {\n    if (/^\\x1b\\[[\\d;]*m$/.test(a2)) {\n        return ansistyle_unparse(ansistyle_parse(ansistyle_parse(null, a1), a2));\n    } else {\n        return a1;\n    }\n}\n\nfunction ansistyle_hexcolor(r, g, b) {\n    return \"#\".concat(r < 16 ? 0 : \"\", r.toString(16), g < 16 ? 0 : \"\", g.toString(16), b < 16 ? 0 : \"\", b.toString(16));\n}\n\nfunction ansistyle_render(text, style) {\n    if (typeof text === \"string\") {\n        text = document.createTextNode(text);\n    } else if (text instanceof jQuery) {\n        text = text[0];\n    }\n    if (!style || style === \"\\x1b[m\"\n        || (typeof style === \"string\" && !(style = ansistyle_parse(style)))) {\n        return text;\n    }\n    const node = document.createElement(\"span\");\n    for (let key in ansistyle_keymap) {\n        if (style[key])\n            node.classList.add(\"ansi\" + key);\n    }\n    if (style.fg) {\n        if (typeof style.fg === \"number\") {\n            node.classList.add(\"ansifg\" + style.fg);\n        } else {\n            node.style.color = ansistyle_hexcolor(style.fg[0], style.fg[1], style.fg[2]);\n        }\n    }\n    if (style.bg) {\n        if (typeof style.bg === \"number\") {\n            node.classList.add(\"ansibg\" + style.bg);\n        } else {\n            node.style.backgroundColor = ansistyle_hexcolor(style.bg[0], style.bg[1], style.bg[2]);\n        }\n    }\n    node.appendChild(text);\n    return node;\n}\n\nexport function render_terminal(container, string, options) {\n    var return_html = false;\n    if (typeof container === \"string\") {\n        options = string;\n        string = container;\n        container = document.createElement(\"div\");\n        return_html = true;\n    }\n\n    if (options && options.clear) {\n        container.removeAttribute(\"data-pa-terminal-style\");\n        container.removeAttribute(\"data-pa-outputpart\");\n        while (container.firstChild) {\n            container.removeChild(container.firstChild);\n        }\n    }\n\n    var styles = container.getAttribute(\"data-pa-terminal-style\"),\n        fragment = null;\n\n    function addlinepart(node, text, link) {\n        var n = ansistyle_render(text, styles);\n        if (link != null && link !== \"\") {\n            var a = document.createElement(\"a\");\n            a.href = link;\n            a.className = \"qh\";\n            if (n.nodeName === \"SPAN\") {\n                while (n.firstChild) {\n                    a.appendChild(n.firstChild);\n                }\n                n.appendChild(a);\n                node.append(n);\n            } else {\n                a.append(n);\n                node.append(a);\n            }\n        } else {\n            node.append(n);\n        }\n    }\n\n    function addfragment(node) {\n        if (!fragment) {\n            fragment = document.createDocumentFragment();\n        }\n        fragment.appendChild(node);\n    }\n\n    function clean_cr(line) {\n        var lineend = /\\n$/.test(line);\n        if (lineend && line.indexOf(\"\\r\") === line.length - 1)\n            return line.substring(0, line.length - 2) + \"\\n\";\n        var curstyle = styles || \"\\x1b[m\",\n            parts = (lineend ? line.substr(0, line.length - 1) : line).split(/\\r/),\n            r = [];\n        for (let partno = 0; partno < parts.length; ++partno) {\n            var g = [], glen = 0, clearafter = null;\n            var lsplit = parts[partno].split(/(\\x1b\\[[\\d;]*m|\\x1b\\[0?K)/);\n            for (var j = 0; j < lsplit.length; j += 2) {\n                if (lsplit[j] !== \"\") {\n                    g.push(curstyle, lsplit[j]);\n                    glen += lsplit[j].length;\n                }\n                if (j + 1 < lsplit.length) {\n                    if (lsplit[j + 1].endsWith(\"K\")) {\n                        clearafter = glen;\n                    } else {\n                        curstyle = ansistyle_combine(curstyle, lsplit[j + 1]);\n                    }\n                }\n            }\n            // glen: number of characters to overwrite\n            var rpos = 0;\n            while (rpos < r.length && glen >= r[rpos + 1].length) {\n                glen -= r[rpos + 1].length;\n                rpos += 2;\n            }\n            while (rpos < r.length && glen < r[rpos + 1].length && clearafter === null) {\n                g.push(r[rpos], r[rpos + 1].substr(glen));\n                glen = 0;\n                rpos += 2;\n            }\n            r = g;\n        }\n        r.push(curstyle);\n        lineend && r.push(\"\\n\");\n        return r.join(\"\");\n    }\n\n    function add_file_link(node, prefix, file, line, link) {\n        let m;\n        while ((m = file.match(/^(\\x1b\\[[\\d;]*m|\\x1b\\[\\d*K)([^]*)$/))) {\n            styles = ansistyle_combine(styles, m[1]);\n            file = m[2];\n        }\n        let filematch = Filediff.by_file(file);\n        if (!filematch && options && options.directory) {\n            file = options.directory + file;\n            filematch = Filediff.by_file(file);\n        }\n        if (filematch) {\n            if (prefix.length) {\n                addlinepart(node, prefix);\n            }\n            var a = document.createElement(\"a\");\n            a.href = \"#\" + filematch.lineid_anchor(\"b\" + line);\n            a.className = \"qh pa-goto\";\n            a.append(link.substring(prefix.length).replace(/(?:\\x1b\\[[\\d;]*m|\\x1b\\[\\d*K)/g, \"\"));\n            addlinepart(node, a);\n            return true;\n        }\n        return false;\n    }\n\n    function render_line(line, node) {\n        var m, mm, isnew = !node, displaylen = 0;\n        if (isnew)\n            node = document.createElement(\"span\");\n\n        if (/\\r/.test(line))\n            line = clean_cr(line);\n\n        while ((m = line.match(/^(\\x1b\\[[\\d;]*m|\\x1b\\[\\d*K)([^]*)$/))) {\n            styles = ansistyle_combine(styles, m[1]);\n            line = m[2];\n        }\n\n        if (((m = line.match(/^([ \\t]*)([^:\\s]+):(\\d+)(?=:)/))\n             || (m = line.match(/^([ \\t]*)file \"(.*?)\", line (\\d+)/i)))\n            && add_file_link(node, m[1], m[2], m[3], m[0])) {\n            displaylen = m[0].length;\n            line = line.substr(displaylen);\n        }\n\n        var render, link = \"\";\n        while (line !== \"\") {\n            render = line;\n            if ((m = line.match(/^(.*?)(\\x1b\\[[\\d;]*m|\\x1b\\[\\d*K|\\x1b\\]8;;|\\x1bc)([^]*)$/))) {\n                if (m[1] === \"\") {\n                    if (m[2] === \"\\x1b]8;;\") {\n                        if ((mm = m[3].match(/^(.*?)(?:[\\x1b\\x07])([^]*)$/))) {\n                            link = mm[1];\n                            line = mm[2];\n                        } else {\n                            line = \"\";\n                        }\n                    } else if (m[2] === \"\\x1bc\") {\n                        node.replaceChildren();\n                        line = m[3];\n                    } else {\n                        styles = ansistyle_combine(styles, m[2]);\n                        line = m[3];\n                    }\n                    continue;\n                }\n                render = m[1];\n            }\n            if (displaylen + render.length > 133\n                || (displaylen + render.length == 133 && render.charAt(132) !== \"\\n\")) {\n                render = render.substr(0, 132 - displaylen);\n                addlinepart(node, render, link);\n                node.className = \"pa-rl-continues\";\n                isnew && addfragment(node);\n                node = document.createElement(\"span\");\n                isnew = true;\n                displaylen = 0;\n            } else {\n                addlinepart(node, render, link);\n                displaylen += render.length;\n            }\n            line = line.substr(render.length);\n        }\n        isnew && addfragment(node);\n    }\n\n    // hide newline on last line\n    var lines, lastfull;\n    if (typeof string === \"string\") {\n        lines = string.split(/^/m);\n        if (lines.length && lines[lines.length - 1] === \"\") {\n            lines.pop();\n        }\n        lastfull = lines.length && lines[lines.length - 1].endsWith(\"\\n\");\n    } else {\n        lines = [];\n        lastfull = true;\n        fragment = string;\n    }\n\n    var node = container.lastChild, cursor = null;\n    if (node\n        && node.lastChild\n        && hasClass(node.lastChild, \"pa-runcursor\")) {\n        cursor = node.lastChild;\n        node.removeChild(cursor);\n    }\n\n    if (node\n        && (string = node.getAttribute(\"data-pa-outputpart\")) !== null\n        && string !== \"\"\n        && lines.length) {\n        while (node.firstChild) {\n            node.removeChild(node.firstChild);\n        }\n        lines[0] = string + lines[0];\n        node.removeAttribute(\"data-pa-outputpart\");\n    } else {\n        if (node && (lines.length || fragment)) {\n            node.appendChild(document.createTextNode(\"\\n\"));\n            node.removeAttribute(\"data-pa-outputpart\");\n        }\n        node = null;\n    }\n\n    var laststyles = styles, i, j, last;\n    for (i = 0; i < lines.length; i = j) {\n        laststyles = styles;\n        last = lines[i];\n        for (j = i + 1; !last.endsWith(\"\\n\") && j < lines.length; ++j) {\n            last += lines[j];\n        }\n        if (j == lines.length && lastfull) {\n            last = last.substring(0, last.length - 1);\n        }\n        render_line(last, i ? null : node);\n    }\n\n    if (options && options.cursor && !container.lastChild && !fragment) {\n        addfragment(\"\");\n    }\n\n    if (fragment) {\n        container.appendChild(fragment);\n    }\n\n    var len = container.childNodes.length;\n    if (len >= 4000) {\n        i = container.firstChild;\n        while (i.tagName === \"DIV\" && i.className === \"pa-rl-group\") {\n            i = i.nextSibling;\n            --len;\n        }\n        var div = null, divlen = 0;\n        while (i && (j = i.nextSibling)) {\n            if (!div\n                || (divlen >= 4000 && len >= 2000)) {\n                div = document.createElement(\"div\");\n                div.className = \"pa-rl-group\";\n                container.insertBefore(div, i);\n                divlen = 0;\n            }\n            container.removeChild(i);\n            div.appendChild(i);\n            i = j;\n            ++divlen;\n            --len;\n        }\n    }\n\n    if (options && options.cursor) {\n        if (!cursor) {\n            cursor = document.createElement(\"span\");\n            cursor.className = \"pa-runcursor\";\n        }\n        container.lastChild.appendChild(cursor);\n    }\n\n    if (!lastfull && container.lastChild) {\n        styles = laststyles;\n        container.lastChild.setAttribute(\"data-pa-outputpart\", last);\n    }\n\n    if (styles != null) {\n        container.setAttribute(\"data-pa-terminal-style\", styles);\n    } else {\n        container.removeAttribute(\"data-pa-terminal-style\");\n    }\n\n    if (return_html) {\n        return container.innerHTML;\n    }\n}\n\nrender_text.add_format({\n    format: 2,\n    render: function (text) {\n        return render_terminal(text);\n    }\n});\n","// grade-ui.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hoturl } from \"./hoturl.js\";\nimport { api_conditioner } from \"./xhr.js\";\nimport { GradeSheet } from \"./gradeentry.js\";\nimport { handle_ui } from \"./ui.js\";\n\nexport function grades_fetch(p) {\n    api_conditioner(hoturl(\"api/grade\", {psetinfo: p}), null, \"GET\")\n        .then(function (data) {\n            if (data && data.ok) {\n                GradeSheet.store(p, data);\n            }\n        });\n}\n\nfunction toggle_grade_history() {\n    const gelt = this.closest(\".pa-grade\");\n    this.classList.toggle(\"pa-grade-latest\");\n    this.classList.toggle(\"pa-grade-earlier\");\n    GradeSheet.closest(this).update_at(gelt);\n}\n\nhandle_ui.on(\"pa-grade-latest\", toggle_grade_history);\nhandle_ui.on(\"pa-grade-earlier\", toggle_grade_history);\n","// run.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { wstorage, sprintf, strftime } from \"./utils.js\";\nimport { $e, hasClass, addClass, removeClass, fold61, handle_ui } from \"./ui.js\";\nimport { event_key, event_modkey } from \"./ui-key.js\";\nimport { render_terminal } from \"./render-terminal.js\";\nimport { grades_fetch } from \"./grade-ui.js\";\n\nfunction make_xterm_write_handler(write) {\n    return function (event) {\n        if (event.type === \"keydown\") {\n            let key = event_key(event), mod = event_modkey(event);\n            if (key.length === 1) {\n                if ((mod & 0xE) === 0 && event_key.printable(event)) {\n                    // keep `key`\n                } else if ((mod & 0xE) === event_modkey.CTRL\n                           && key >= \"a\"\n                           && key <= \"z\") {\n                    key = String.fromCharCode(key.charCodeAt(0) - 96);\n                } else if ((mod & 0xE) === event_modkey.META\n                           && key == \"v\") {\n                    navigator.clipboard.readText().then(tx => write(tx));\n                    event.preventDefault();\n                    return;\n                } else {\n                    key = \"\";\n                }\n            } else {\n                // send escape sequences compatible with xterm256-color terminfo\n                if (key === \"Enter\" && !mod) {\n                    key = \"\\r\";\n                } else if (key === \"Escape\" && !mod) {\n                    key = \"\\x1b\";\n                } else if (key === \"Backspace\" && !mod) {\n                    key = \"\\x7f\";\n                } else if (key === \"Tab\" && !mod) {\n                    key = \"\\x09\";\n                } else if (key === \"ArrowUp\" && !mod) {\n                    key = \"\\x1bOA\";\n                } else if (key === \"ArrowDown\" && !mod) {\n                    key = \"\\x1bOB\";\n                } else if (key === \"ArrowRight\" && !mod) {\n                    key = \"\\x1bOC\";\n                } else if (key === \"ArrowLeft\" && !mod) {\n                    key = \"\\x1bOD\";\n                } else if (key === \"PageUp\" && !mod) {\n                    key = \"\\x1b[5~\";\n                } else if (key === \"PageDown\" && !mod) {\n                    key = \"\\x1b[6~\";\n                } else {\n                    key = \"\";\n                }\n            }\n            if (key !== \"\") {\n                write(key);\n                event.preventDefault();\n            }\n        }\n        return false;\n    };\n}\n\nfunction trim_data_to_offset(data, offset) {\n    const re = /^([\\x00-\\x7F]*)([\\u0080-\\u07FF]*)([\\u0800-\\uD7FF\\uE000-\\uFFFF]*)((?:[\\uD800-\\uDBFF][\\uDC00-\\uDFFF])*)/y;\n    let matchIndex = 0;\n    while (matchIndex < data.data.length && data.offset < offset) {\n        re.lastIndex = matchIndex;\n        const m = data.data.match(re);\n        if (!m) {\n            break;\n        }\n        if (m[1].length) {\n            const n = Math.min(offset - data.offset, m[1].length);\n            matchIndex += n;\n            data.offset += n;\n        }\n        if (m[2].length) {\n            const n = Math.min(offset - data.offset, m[2].length * 2);\n            matchIndex += n / 2;\n            data.offset += n;\n        }\n        if (m[3].length) {\n            const n = Math.min(offset - data.offset, m[3].length * 3);\n            matchIndex += n / 3;\n            data.offset += n;\n        }\n        if (m[4].length) {\n            const n = Math.min(offset - data.offset, m[4].length * 2);\n            matchIndex += n / 2; // surrogate pairs\n            data.offset += n;\n        }\n    }\n    data.data = data.data.substring(matchIndex);\n}\n\nfunction utf8_length(str) {\n    const re = /^([\\x00-\\x7F]*)([\\u0080-\\u07FF]*)([\\u0800-\\uD7FF\\uE000-\\uFFFF]*)((?:[\\uD800-\\uDBFF][\\uDC00-\\uDFFF])*)/y;\n    let matchIndex = 0, offset = 0;\n    while (matchIndex < str.length) {\n        re.lastIndex = matchIndex;\n        const m = str.match(re);\n        if (!m) {\n            break;\n        }\n        if (m[1].length) {\n            matchIndex += m[1].length;\n            offset += m[1].length;\n        }\n        if (m[2].length) {\n            matchIndex += m[2].length;\n            offset += m[2].length * 2;\n        }\n        if (m[3].length) {\n            matchIndex += m[3].length;\n            offset += m[3].length * 3;\n        }\n        if (m[4].length) {\n            matchIndex += m[4].length;\n            offset += m[4].length * 2; // surrogate pairs\n        }\n    }\n    return offset;\n}\n\nexport function run(button, opts) {\n    const form = button.closest(\"form\"),\n        category = button.getAttribute(\"data-pa-run-category\") || button.value,\n        psetinfo = button.closest(\".pa-psetinfo\"),\n        directory = psetinfo ? psetinfo.getAttribute(\"data-pa-directory\") : \"\",\n        therun = document.getElementById(\"pa-run-\" + category),\n        therunout = therun.closest(\".pa-runout\"),\n        thepre = $(therun).find(\"pre\");\n    let thexterm,\n        checkt,\n        kill_checkt,\n        queueid = opts.queueid || null,\n        eventsource = null,\n        sendtimeout = null;\n\n    therunout && removeClass(therunout, \"hidden\");\n    removeClass(therun, \"need-run\");\n    fold61(therun, therunout, true);\n\n    if (opts.unfold && therun.hasAttribute(\"data-pa-timestamp\")) {\n        checkt = +therun.getAttribute(\"data-pa-timestamp\");\n    } else if (opts.timestamp) {\n        checkt = opts.timestamp;\n    }\n\n    if (hasClass(therun, \"pa-run-active\")) {\n        return true;\n    }\n    addClass(therun, \"pa-run-active\");\n    if (!checkt) {\n        therun.removeAttribute(\"data-pa-timestamp\");\n    }\n\n    if (!checkt && !opts.noclear) {\n        thepre.html(\"\");\n        addClass(thepre[0].parentElement, \"pa-run-short\");\n        thepre[0].removeAttribute(\"data-pa-terminal-style\");\n        $(therun).children(\".pa-runrange\").remove();\n    } else if (therun.lastChild) {\n        $(therun.lastChild).find(\"span.pa-runcursor\").remove();\n    }\n\n    function stop_button(on) {\n        const h3 = therunout ? therunout.firstChild : null;\n        if (h3 && h3.tagName === \"H3\") {\n            const btn = $(h3).find(\".pa-runstop\");\n            if (on && !btn.length) {\n                $(\"<button class=\\\"btn btn-danger pa-runstop\\\" type=\\\"button\\\">Stop</button>\").click(stop).appendTo(h3);\n            } else if (!on && btn.length) {\n                btn.remove();\n            }\n        }\n    }\n\n    function terminal_char_width(min, max) {\n        const x = $('<span style=\"position:absolute\">0</span>').appendTo(thepre),\n            w = Math.trunc(thepre.width() / x.width() / 1.33);\n        x.remove();\n        return Math.max(min, Math.min(w, max));\n    }\n\n    if (therun.getAttribute(\"data-pa-xterm-js\")\n        && therun.getAttribute(\"data-pa-xterm-js\") !== \"false\"\n        && window.Terminal) {\n        removeClass(thepre[0].parentElement, \"pa-run-short\");\n        addClass(thepre[0].parentElement, \"pa-run-xterm-js\");\n        const cols = +therun.getAttribute(\"data-pa-columns\"),\n            rows = +therun.getAttribute(\"data-pa-rows\"),\n            fontsize = +therun.getAttribute(\"data-pa-font-size\"),\n            args = {\n                cols: !cols || cols < 0 || cols != cols ? terminal_char_width(80, 132) : cols,\n                rows: !rows || rows < 0 || rows != rows ? 25 : rows\n            };\n        if (fontsize && fontsize > 0 && fontsize == fontsize) {\n            args.fontSize = fontsize;\n        }\n        thexterm = new Terminal(args);\n        thexterm.open(thepre[0]);\n        thexterm.attachCustomKeyEventHandler(make_xterm_write_handler(write));\n        if (opts.focus) {\n            thexterm.focus();\n        }\n    }\n\n    function scroll_therun() {\n        if (!thexterm\n            && (hasClass(therun, \"pa-run-short\")\n                || therun.hasAttribute(\"data-pa-runbottom\"))) {\n            requestAnimationFrame(function () {\n                if (therun.scrollHeight > therun.clientHeight) {\n                    removeClass(therun, \"pa-run-short\");\n                }\n                if (therun.hasAttribute(\"data-pa-runbottom\")) {\n                    therun.scrollTop = Math.max(therun.scrollHeight - therun.clientHeight, 0);\n                }\n            });\n        }\n    }\n\n    if (!therun.hasAttribute(\"data-pa-opened\")) {\n        therun.setAttribute(\"data-pa-opened\", \"true\");\n        if (!thexterm) {\n            therun.setAttribute(\"data-pa-runbottom\", \"true\");\n            therun.addEventListener(\"scroll\", function () {\n                requestAnimationFrame(function () {\n                    if (therun.scrollTop + therun.clientHeight >= therun.scrollHeight - 10)\n                        therun.setAttribute(\"data-pa-runbottom\", \"true\");\n                    else\n                        therun.removeAttribute(\"data-pa-runbottom\");\n                });\n            });\n            scroll_therun();\n        }\n    }\n\n    let ibuffer = \"\", // initial buffer; holds data before any results arrive\n        preamble_offset = null,\n        offset = 0, backoff = 50, times = null;\n\n    function hide_cursor() {\n        if (thexterm) {\n            thexterm.write(\"\\x1b[?25l\"); // “hide cursor” escape\n        } else if (therun.lastChild) {\n            $(therun.lastChild).find(\".pa-runcursor\").remove();\n        }\n    }\n\n    function done(complete) {\n        removeClass(therun, \"pa-run-active\");\n        if (complete !== false) {\n            hide_cursor();\n            if (button.hasAttribute(\"data-pa-run-grade\")) {\n                grades_fetch(psetinfo); // XXX not on replay\n            }\n            opts.done_function && opts.done_function();\n        }\n        send_after(-1);\n    }\n\n    function append(str, done) {\n        if (thexterm) {\n            thexterm.write(str, done);\n        } else {\n            render_terminal(thepre[0], str, {cursor: true, directory: directory});\n            done && Promise.resolve(true).then(done);\n        }\n    }\n\n    function append_data(str, data, done) {\n        if (ibuffer !== null) { // haven't started generating output\n            ibuffer += str;\n            const pos = ibuffer.indexOf(\"\\n\\n\");\n            if (pos < 0) {\n                return; // not ready yet\n            }\n            preamble_offset = utf8_length(ibuffer.substr(0, pos + 2));\n            let tsmsg = opts.noclear ? \"\" : \"\\x1bc\";\n            if (data && data.timestamp) {\n                tsmsg += \"\\x1b[38;5;108;3m...started \" + strftime(\"%l:%M:%S%P %e %b %Y\", new Date(data.timestamp * 1000)) + \"\\x1b[m\\r\\n\";\n            }\n            str = tsmsg + ibuffer.substr(pos + 2);\n            ibuffer = null;\n        }\n        if (str !== \"\") {\n            append(str, done);\n        }\n    }\n\n    function parse_times(times) {\n        let a = [0, 0], p = 0;\n        while (p < times.length) {\n            let n = times.indexOf(\"\\n\", p + 1), c;\n            if (n < 0) {\n                n = times.length;\n            }\n            const ch = times.charCodeAt(p);\n            if ((ch === 43 /* + */ || (ch >= 48 && ch <= 57 /* 0-9 */))\n                && (c = times.indexOf(\",\", p)) >= 0\n                && c < n) {\n                let time = +times.substring(p, c),\n                    offset = +times.substring(c + 1, n);\n                if (ch === 43) {\n                    time += a[a.length - 2];\n                }\n                if (times.charCodeAt(c + 1) === 43) {\n                    offset += a[a.length - 1];\n                }\n                a.push(time, offset);\n            }\n            p = n + 1;\n        }\n        return a;\n    }\n\n    function set_time_data(data, at_end) {\n        let tpos, tstart, tlast, timeout, running,\n            partial_outstanding = false, partial_time;\n        if (times) {\n            return;\n        } else if (data.offset !== 0) {\n            throw new Error(\"fuck\");\n        }\n\n        let factor = data.time_factor;\n        {\n            const runspeed = wstorage.site_json(false, \"pa-runspeed-\" + category);\n            if (runspeed && runspeed[1] >= (new Date).getTime() - 86400000) {\n                factor = runspeed[0];\n            } else if (runspeed) {\n                wstorage.site_json(false, \"pa-runspeed-\" + category, null);\n            }\n            if (factor < 0.1 || factor > 10) {\n                factor = 1;\n            }\n        }\n\n        times = data.time_data;\n        if (typeof times === \"string\") {\n            times = parse_times(times);\n        }\n\n        let ebutton, erange, etime, espeed;\n        if (times.length > 2) {\n            therun.prepend($e(\"div\", \"pa-runrange\",\n                (ebutton = $e(\"button\", {type: \"button\", \"class\": \"pa-runrange-play\"})),\n                (erange = $e(\"input\", {type: \"range\", \"class\": \"pa-runrange-range\", min: 0, max: times[times.length -2]})),\n                (etime = $e(\"span\", \"pa-runrange-time\")),\n                $e(\"span\", {title: \"Slow\", \"class\": \"pa-runrange-speed-slow\"}, \"🐢\"),\n                (espeed = $e(\"input\", {type: \"range\", \"class\": \"pa-runrange-speed\", min: \"0.1\", max: 10, step: \"0.1\"})),\n                $e(\"span\", {title: \"Fast\", \"class\": \"pa-runrange-speen-fast\"}, \"🐇\")));\n            erange.addEventListener(\"input\", function () {\n                running = false;\n                addClass(ebutton, \"paused\");\n                f(+this.value);\n            }, false);\n            ebutton.addEventListener(\"click\", function () {\n                if (hasClass(ebutton, \"paused\")) {\n                    removeClass(ebutton, \"paused\");\n                    running = true;\n                    tstart = (new Date).getTime();\n                    if (tlast < times[times.length - 2])\n                        tstart -= tlast / factor;\n                    f(null);\n                } else {\n                    addClass(ebutton, \"paused\");\n                    running = false;\n                }\n            }, false);\n            espeed.addEventListener(\"input\", function () {\n                factor = +this.value;\n                wstorage.site(false, \"pa-runspeed-\" + category, [factor, (new Date).getTime()]);\n                if (running) {\n                    tstart = (new Date).getTime() - tlast / factor;\n                    f(null);\n                }\n            }, false);\n            espeed.value = factor;\n        }\n\n        data = {\n            data: data.data,\n            end_offset: data.end_offset,\n            size: data.size || data.end_offset,\n            timestamp: data.timestamp\n        };\n\n        function set_time() {\n            if (erange) {\n                erange.value = tlast;\n                etime.textContent = sprintf(\"%d:%02d.%03d\", Math.trunc(tlast / 60000), Math.trunc(tlast / 1000) % 60, Math.trunc(tlast) % 1000);\n            }\n        }\n\n        function load_more() {\n            if (!partial_outstanding) {\n                partial_outstanding = true;\n                send({offset: data.end_offset}, function (xdata) {\n                    if (xdata.ok && xdata.offset === data.end_offset) {\n                        data.data += xdata.data;\n                        data.end_offset = xdata.end_offset;\n                    } else if (!xdata.ok) {\n                        data.size = data.end_offset;\n                    }\n                    partial_outstanding = false;\n                    partial_time && f(partial_time);\n                });\n            }\n        }\n\n        function add_data() {\n            if (ibuffer !== null) {\n                const nlnl = data.data.indexOf(\"\\n\\n\");\n                append_data(data.data.substring(0, nlnl + 2), data);\n                // ... which sets `ibuffer = null`\n            }\n        }\n\n        function tpos_offset(tpos) {\n            if (tpos < times.length) {\n                return preamble_offset + times[tpos + 1];\n            } else {\n                return data.size;\n            }\n        }\n\n        function tpos_lower_bound(l, r, time) {\n            while (l < r) {\n                const m = l + (((r - l) >> 1) & ~1);\n                if (time <= times[m]) {\n                    r = m;\n                } else {\n                    l = m + 2;\n                }\n            }\n            return l;\n        }\n\n        function offset_lower_bound(offset) {\n            let l = 0, r = times.length;\n            while (l < r) {\n                const m = l + (((r - l) >> 1) & ~1);\n                if (offset <= times[m + 1]) {\n                    r = m;\n                } else {\n                    l = m + 2;\n                }\n            }\n            return l;\n        }\n\n        function f(time) {\n            if (time === null) {\n                if (running) {\n                    time = ((new Date).getTime() - tstart) * factor;\n                } else {\n                    return;\n                }\n            }\n\n            // find `npos`, the new time position\n            let npos = tpos;\n            if (npos >= times.length || time < times[npos]) {\n                npos = 0;\n            }\n            if (npos + 2 < times.length && time >= times[npos]) {\n                npos = tpos_lower_bound(npos, times.length, time);\n            }\n            while (npos < times.length && time >= times[npos]) {\n                npos += 2;\n            }\n\n            // reset buffer if new time position is less than current\n            if (npos < tpos) {\n                ibuffer = \"\";\n                tpos = 0;\n            }\n            if (ibuffer !== null) {\n                add_data();\n            }\n\n            // range of data [boffset, eoffset) to feed to xterm.js\n            let boffset = tpos_offset(tpos), eoffset = tpos_offset(npos);\n\n            // flow control: give xterm.js 8MB of data at a time\n            const maxdata = 8 << 20;\n            if (boffset + maxdata < eoffset) {\n                let lpos = tpos;\n                while (lpos < npos) {\n                    const m = lpos + (((npos - lpos) >> 1) & ~1);\n                    if (boffset + maxdata < times[m + 1] + preamble_offset) {\n                        npos = m;\n                        eoffset = tpos_offset(m);\n                    } else {\n                        lpos = m + 2;\n                    }\n                }\n            }\n\n            // maybe load more data\n            if (data.end_offset < data.size) {\n                if (eoffset > data.end_offset) {\n                    partial_time = time;\n                    load_more();\n                    return;\n                } else if (eoffset > data.end_offset - (1 << 20)) {\n                    load_more();\n                }\n            }\n\n            tlast = npos < times.length ? Math.min(time, times[npos]) : time;\n            partial_time = time > tlast ? time : null;\n            if (partial_time) {\n                const moffset = Math.min(boffset + (4 << 20), eoffset);\n                append_data(data.data.substring(boffset, moffset), data, () => { f(partial_time) });\n                boffset = moffset;\n            }\n            append_data(data.data.substring(boffset, eoffset), data);\n            scroll_therun();\n            set_time();\n\n            tpos = npos;\n            if (timeout) {\n                timeout = clearTimeout(timeout);\n            }\n            if (running && !partial_time) {\n                if (tpos < times.length) {\n                    timeout = setTimeout(f, Math.min(100, (times[tpos] - (tpos ? times[tpos - 2] : 0)) / factor), null);\n                } else {\n                    ebutton && addClass(ebutton, \"paused\");\n                    hide_cursor();\n                }\n            }\n        }\n\n        if (at_end) {\n            tpos = times.length;\n            tlast = times[tpos - 2];\n            running = false;\n            ebutton && addClass(ebutton, \"paused\");\n            set_time();\n        } else {\n            tpos = 0;\n            tlast = 0;\n            tstart = (new Date).getTime();\n            running = true;\n            if (times.length) {\n                if (therun.getAttribute(\"data-pa-start\") === \"alternate-screen\") {\n                    const nlnl = data.data.indexOf(\"\\n\\n\"),\n                        altscr = data.data.indexOf(\"\\x1b[?1049h\"),\n                        xtpos = altscr > nlnl ? offset_lower_bound(altscr - nlnl - 2) : -1;\n                    if (xtpos >= 0 && xtpos < times.length) {\n                        tstart -= times[xtpos] / factor;\n                    }\n                }\n                f(null);\n            }\n        }\n    }\n\n    let send_out = 0, send_args = {};\n\n    function succeed_eventsource(msge) {\n        let ok = false;\n        if (msge && msge.data) {\n            try {\n                let json = JSON.parse(msge.data);\n                if (json\n                    && typeof json === \"object\"\n                    && json.data != null\n                    && json.offset != null) {\n                    json.offset += preamble_offset;\n                    json.end_offset += preamble_offset;\n                    if (json.ok == null) {\n                        json.ok = true;\n                    }\n                    if (json.offset <= offset) {\n                        succeed(json);\n                    } else {\n                        send({write: \"\"});\n                    }\n                    ok = true;\n                }\n            } catch {\n            }\n        }\n        ok || error_eventsource();\n    }\n\n    function error_eventsource() {\n        if (eventsource) {\n            eventsource.close();\n            eventsource = false;\n            send();\n        }\n    }\n\n    function send_after(ms) {\n        if (sendtimeout) {\n            clearTimeout(sendtimeout);\n        }\n        if (ms >= 0) {\n            sendtimeout = setTimeout(send_from_timeout, ms);\n        } else {\n            sendtimeout = null;\n        }\n    }\n\n    function send_from_timeout() {\n        sendtimeout = null;\n        send();\n    }\n\n    function succeed(data) {\n        if (queueid) {\n            thepre.find(\"span.pa-runqueue\").remove();\n        }\n        if (data && data.onqueue) {\n            queueid = data.queueid;\n            let t = \"On queue, \".concat(data.nahead, (data.nahead == 1 ? \" job\" : \" jobs\"), \" ahead\");\n            if (data.headage) {\n                let headage = data.headage;\n                if (headage > 10) {\n                    headage = Math.round(headage / 5 + 0.5) * 5;\n                }\n                t = t.concat(\", oldest began about \", headage, (headage == 1 ? \" second\" : \" seconds\"), \" ago\");\n            }\n            const span = document.createElement(\"span\");\n            span.className = \"pa-runqueue\";\n            span.append(t);\n            thepre[0].insertBefore(span, thepre[0].lastChild);\n            send_after(10000);\n            return;\n        }\n\n        stop_button(data && (data.status == null || data.status === \"working\") && !data.done);\n\n        if (!data || !data.ok) {\n            let x = \"Unknown error\";\n            if (data && data.loggedout) {\n                x = \"You have been logged out (perhaps due to inactivity). Please reload this page.\";\n            } else if (data) {\n                if (data.error_text) {\n                    x = data.error_text;\n                } else if (data.error && data.error !== true) {\n                    x = data.error;\n                } else if (data.message) {\n                    x = data.message;\n                }\n                if (data.errorcode === 1001 // ERRORCODE_RUNCONFLICT\n                    && data.conflict_timestamp) {\n                    kill_checkt = data.conflict_timestamp;\n                }\n            }\n            append(\"\\x1b[1;3;31m\" + x + \"\\x1b[m\\r\\n\");\n            scroll_therun();\n            return done();\n        } else if (data.done) {\n            done(false);\n        }\n\n        if (data.eventsource\n            && data.status === \"working\"\n            && eventsource == null) {\n            eventsource = new EventSource(window.siteinfo.base.concat(\"runevents/v1/\", data.eventsource));\n            eventsource.onmessage = succeed_eventsource;\n            eventsource.onerror = error_eventsource;\n        }\n\n        if (!checkt && data.timestamp) {\n            checkt = data.timestamp;\n            therun.setAttribute(\"data-pa-timestamp\", data.timestamp);\n        }\n\n        // Skip data up to UTF-8 `offset`\n        if (data.data\n            && data.offset < offset) {\n            trim_data_to_offset(data, offset);\n            if (data.offset < offset) {\n                send_after(0);\n                return;\n            }\n        }\n\n        // Stay on alternate screen when done (rather than clearing it)\n        let m;\n        if (data.data\n            && !data.partial\n            && data.done\n            && (m = data.data.match(/\\x1b\\[\\?1049l(?:[\\r\\n]|\\x1b\\[\\?1l|\\x1b\\[23;0;0t|\\x1b>)*$/))) {\n            data.data = data.data.substring(0, data.data.length - m[0].length);\n        }\n\n        // Pure replay -> set_time_data\n        if (data.done\n            && data.time_data != null\n            && ibuffer === \"\") {\n            // Parse timing data\n            set_time_data(data);\n            return;\n        }\n\n        // Append data\n        if (data.data != null\n            && data.offset === offset\n            && data.end_offset >= offset) {\n            offset = data.end_offset;\n            append_data(data.data, data);\n            backoff = 100;\n        }\n\n        if (data.result) {\n            if (!data.done || data.partial) {\n                throw new Error(\"data.result must only be present on last\");\n            }\n            if (ibuffer !== null) {\n                append_data(\"\\n\\n\", data);\n            }\n            append_data(data.result, data);\n        }\n        if (!data.data && !data.result) {\n            backoff = Math.min(backoff * 2, 500);\n        }\n\n        scroll_therun();\n        if (data.status === \"old\") {\n            send_after(2000);\n        } else if (!data.done || data.partial) {\n            send_after(backoff);\n        } else {\n            done();\n            if (data.timed && !hasClass(therun.firstChild, \"pa-runrange\")) {\n                send({offset: 0}, succeed_add_times);\n            }\n        }\n    }\n\n    function succeed_add_times(data) {\n        --send_out;\n        if (data.data && data.done && data.time_data != null) {\n            set_time_data(data, true);\n        }\n    }\n\n    function send(args, success) {\n        if (args && args.stop) {\n            send_args.stop = 1;\n        }\n        if (args && args.write != null) {\n            send_args.write = (send_args.write || \"\").concat(args.write);\n        }\n        if ((send_args.write && send_out > 0)\n            || (!send_args.stop && send_args.write == null && eventsource)) {\n            return;\n        }\n\n        let a = {};\n        if (!form.elements.run) {\n            a.run = category;\n        }\n        a.offset = offset;\n        if (args && args.offset != null) {\n            a.offset = args.offset;\n        }\n        if (checkt) {\n            a.check = checkt;\n        } else if (args && args.stop && kill_checkt) {\n            a.check = kill_checkt;\n        }\n        if (queueid) {\n            a.queueid = queueid;\n        }\n        Object.assign(a, send_args);\n        delete send_args.write;\n        delete send_args.stop;\n        ++send_out;\n\n        jQuery.ajax(form.getAttribute(\"action\"), {\n            data: $(form).serializeWith(a),\n            type: \"POST\", cache: false, dataType: \"json\", timeout: 30000,\n            success: function (data) {\n                --send_out;\n                (success || succeed)(data);\n                send_args.write && send();\n            },\n            error: function () {\n                $(form).find(\".ajaxsave61\").html(\"Failed\");\n                removeClass(therun, \"pa-run-active\");\n            }\n        });\n    }\n\n    function stop() {\n        send({stop: 1});\n    }\n\n    function write(value) {\n        send({write: value});\n    }\n\n    if (opts.headline && opts.noclear && thepre[0].firstChild) {\n        append(\"\\r\\n\\r\\n\");\n    }\n    if (opts.headline) {\n        append(\"\\x1b[1;37m\" + opts.headline + \"\\x1b[m\\r\\n\");\n    }\n    if (opts.unfold && therun.getAttribute(\"data-pa-content\")) {\n        append(therun.getAttribute(\"data-pa-content\"));\n    }\n    if (opts.focus) {\n        $(therunout).scrollIntoView();\n    }\n    therun.removeAttribute(\"data-pa-content\");\n    scroll_therun();\n\n    send();\n    return false;\n}\n\n\nhandle_ui.on(\"pa-runner\", function () {\n    run(this, {focus: true});\n});\n\nhandle_ui.on(\"pa-run-show\", function () {\n    const parent = this.closest(\".pa-runout\"),\n        name = parent.id.substring(4),\n        therun = document.getElementById(\"pa-run-\" + name);\n    if (therun.hasAttribute(\"data-pa-timestamp\") && hasClass(therun, \"need-run\")) {\n        const thebutton = jQuery(\".pa-runner[value='\" + name + \"']\")[0];\n        run(thebutton, {unfold: true});\n    } else {\n        fold61(therun, jQuery(\"#run-\" + name));\n    }\n});\n","// run-settings.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2020 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { handle_ui } from \"./ui.js\";\n\nfunction add(name, value) {\n    var $j = $(\"#pa-runsettings\"), num = $j.find(\".n\").length;\n    while ($j.find(\"[data-runsetting-num=\" + num + \"]\").length)\n        ++num;\n    var $x = $(\"<div class=\\\"pa-p\\\" data-runsetting-num=\\\"\" + num + \"\\\"><div class=\\\"pa-pt\\\"></div><div class=\\\"pa-pv\\\"><input name=\\\"n\" + num + \"\\\" class=\\\"uich pa-runconfig ignore-diff n\\\" size=\\\"30\\\" placeholder=\\\"Name\\\"> &nbsp; <input name=\\\"v\" + num + \"\\\" class=\\\"uich pa-runconfig ignore-diff v\\\" size=\\\"40\\\" placeholder=\\\"Value\\\"></div></div>\");\n    if (name) {\n        $x.find(\".n\").val(name);\n        $x.find(\".v\").val(value);\n    }\n    $j.append($x);\n    if (!name)\n        $x.find(\".n\").focus();\n}\n\nfunction save() {\n    var $j = $(\"#pa-runsettings .pa-p\"), j = {}, i, k, v;\n    for (i = 0; i != $j.length; ++i) {\n        k = $.trim($($j[i]).find(\".n\").val());\n        v = $.trim($($j[i]).find(\".v\").val());\n        if (k != \"\")\n            j[k] = v;\n    }\n    $.ajax($j.closest(\"form\").attr(\"action\"), {\n        data: {runsettings: j},\n        type: \"POST\", cache: false,\n        dataType: \"json\"\n    });\n}\n\nexport function run_settings_load(j) {\n    var $j = $(\"#pa-runsettings\"), $n = $j.find(\".n\"), i, x;\n    $n.attr(\"data-outstanding\", \"1\");\n    for (x in j) {\n        for (i = 0; i != $n.length && $.trim($($n[0]).val()) != x; ++i)\n            /* nada */;\n        if (i == $n.length)\n            add(x, j[x]);\n        else if ($.trim($j.find(\"[name=v\" + i + \"]\").val()) != j[x]) {\n            $j.find(\"[name=v\" + i + \"]\").val(j[x]);\n            $($n[i]).removeAttr(\"data-outstanding\");\n        }\n    }\n    for (i = 0; i != $n.length; ++i)\n        if ($($n[i]).attr(\"data-outstanding\"))\n            $(\"[data-runsetting-num=\" + $($n[i]).attr(\"name\").substr(1) + \"]\").remove();\n}\n\nhandle_ui.on(\"pa-runconfig\", function () {\n    if (this.name === \"define\") {\n        add();\n    } else {\n        save();\n    }\n});\n","// svgpathutil.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2020 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { log_jserror } from \"./utils-errors.js\";\n\n\nexport function eval_function_path(x) {\n    var l = 0, r = this.getTotalLength(), m, pt;\n    if (l != r) {\n        while (r - l > 0.5) {\n            m = l + (r - l) / 2;\n            pt = this.getPointAtLength(m);\n            if (pt.x >= x + 0.25)\n                r = m;\n            else if (pt.x >= x - 0.25)\n                return pt.y;\n            else\n                l = m;\n        }\n        pt = this.getPointAtLength(r === m ? l : r);\n        if (pt.x >= x - 0.25 && pt.x <= x + 0.25)\n            return pt.y;\n    }\n    return null;\n}\n\n\nconst PATHSEG_ARGMAP = {\n    m: 2, M: 2, z: 0, Z: 0, l: 2, L: 2, h: 1, H: 1, v: 1, V: 1, c: 6, C: 6,\n    s: 4, S: 4, q: 4, Q: 4, t: 2, T: 2, a: 7, A: 7, b: 1, B: 1\n};\nlet normalized_path_cache = {},\n    normalized_path_cache_size = 0,\n    normalized_path_complaint = false;\n\nfunction svg_path_number_of_items(s) {\n    if (s instanceof SVGPathElement)\n        s = s.getAttribute(\"d\");\n    if (normalized_path_cache[s])\n        return normalized_path_cache[s].length;\n    else\n        return s.replace(/[^A-DF-Za-df-z]+/g, \"\").length;\n}\n\nfunction make_svg_path_parser(s) {\n    if (s instanceof SVGPathElement)\n        s = s.getAttribute(\"d\");\n    s = s.split(/([a-zA-Z]|[-+]?(?:\\d+\\.?\\d*|\\.\\d+)(?:[Ee][-+]?\\d+)?)/);\n    var i = 1, e = s.length, next_cmd;\n    return function () {\n        var a = null, ch;\n        while (i < e) {\n            ch = s[i];\n            if (ch >= \"A\") {\n                if (a)\n                    break;\n                a = [ch];\n                next_cmd = ch;\n                if (ch === \"m\" || ch === \"M\" || ch === \"z\" || ch === \"Z\")\n                    next_cmd = (ch === \"m\" || ch === \"z\" ? \"l\" : \"L\");\n            } else {\n                if (!a && next_cmd)\n                    a = [next_cmd];\n                else if (!a || a.length === PATHSEG_ARGMAP[a[0]] + 1)\n                    break;\n                a.push(+ch);\n            }\n            i += 2;\n        }\n        return a;\n    };\n}\n\nfunction normalize(s) {\n    if (s instanceof SVGPathElement)\n        s = s.getAttribute(\"d\");\n    if (normalized_path_cache[s])\n        return normalized_path_cache[s];\n\n    var res = [],\n        cx = 0, cy = 0, cx0 = 0, cy0 = 0, copen = false,\n        cb = 0, sincb = 0, coscb = 1,\n        i, dx, dy,\n        parser = make_svg_path_parser(s), a, ch, preva;\n    while ((a = parser())) {\n        ch = a[0];\n        // special commands: bearing, closepath\n        if (ch === \"b\" || ch === \"B\") {\n            cb = ch === \"b\" ? cb + a[1] : a[1];\n            coscb = Math.cos(cb);\n            sincb = Math.sin(cb);\n            continue;\n        } else if (ch === \"z\" || ch === \"Z\") {\n            preva = res.length ? res[res.length - 1] : null;\n            if (copen) {\n                if (cx != cx0 || cy != cy0)\n                    res.push([\"L\", cx, cy, cx0, cy0]);\n                res.push([\"Z\"]);\n                copen = false;\n            }\n            cx = cx0, cy = cy0;\n            continue;\n        }\n\n        // normalize command 1: remove horiz/vert\n        if (PATHSEG_ARGMAP[ch] == 1) {\n            if (a.length == 1)\n                a = [\"L\"]; // all data is missing\n            else if (ch === \"h\")\n                a = [\"l\", a[1], 0];\n            else if (ch === \"H\")\n                a = [\"L\", a[1], cy];\n            else if (ch === \"v\")\n                a = [\"l\", 0, a[1]];\n            else if (ch === \"V\")\n                a = [\"L\", cx, a[1]];\n        }\n\n        // normalize command 2: relative -> absolute\n        ch = a[0];\n        if (ch >= \"a\" && !cb) {\n            for (i = ch !== \"a\" ? 1 : 6; i < a.length; i += 2) {\n                a[i] += cx;\n                a[i+1] += cy;\n            }\n        } else if (ch >= \"a\") {\n            if (ch === \"a\")\n                a[3] += cb;\n            for (i = ch !== \"a\" ? 1 : 6; i < a.length; i += 2) {\n                dx = a[i], dy = a[i + 1];\n                a[i] = cx + dx * coscb + dy * sincb;\n                a[i+1] = cy + dx * sincb + dy * coscb;\n            }\n        }\n        ch = a[0] = ch.toUpperCase();\n\n        // normalize command 3: use cx0,cy0 for missing data\n        while (a.length < PATHSEG_ARGMAP[ch] + 1)\n            a.push(cx0, cy0);\n\n        // normalize command 4: shortcut -> full\n        if (ch === \"S\") {\n            dx = dy = 0;\n            if (preva && preva[0] === \"C\")\n                dx = cx - preva[3], dy = cy - preva[4];\n            a = [\"C\", cx + dx, cy + dy, a[1], a[2], a[3], a[4]];\n            ch = \"C\";\n        } else if (ch === \"T\") {\n            dx = dy = 0;\n            if (preva && preva[0] === \"Q\")\n                dx = cx - preva[1], dy = cy - preva[2];\n            a = [\"Q\", cx + dx, cy + dy, a[1], a[2]];\n            ch = \"Q\";\n        }\n\n        // process command\n        if (!copen && ch !== \"M\") {\n            if (res.length !== 0 && res[res.length - 1][0] !== \"Z\")\n                res.push([\"M\"]);\n            copen = true;\n        }\n        if (ch === \"M\") {\n            cx0 = a[1];\n            cy0 = a[2];\n            copen = false;\n        } else if (ch === \"L\") {\n            res.push([\"L\", cx, cy, a[1], a[2]]);\n        } else if (ch === \"C\") {\n            res.push([\"C\", cx, cy, a[1], a[2], a[3], a[4], a[5], a[6]]);\n        } else if (ch === \"Q\") {\n            res.push([\"C\", cx, cy,\n                      cx + 2 * (a[1] - cx) / 3, cy + 2 * (a[2] - cy) / 3,\n                      a[3] + 2 * (a[1] - a[3]) / 3, a[4] + 2 * (a[2] - a[4]) / 3,\n                      a[3], a[4]]);\n        } else {\n            // XXX should render \"A\" as a bezier\n            if (++normalized_path_complaint == 1)\n                log_jserror(\"bad normalize \" + ch);\n            res.push(a);\n        }\n\n        preva = a;\n        cx = a[a.length - 2];\n        cy = a[a.length - 1];\n    }\n\n    if (normalized_path_cache_size >= 1000) {\n        normalized_path_cache = {};\n        normalized_path_cache_size = 0;\n    }\n    normalized_path_cache[s] = res;\n    ++normalized_path_cache_size;\n    return res;\n}\n\n\nfunction pathNodeMayBeNearer(pathNode, point, dist) {\n    function oob(l, t, r, b) {\n        return l - point[0] >= dist || point[0] - r >= dist\n            || t - point[1] >= dist || point[1] - b >= dist;\n    }\n    // check bounding rectangle of path\n    if (\"clientX\" in point) {\n        var bounds = pathNode.getBoundingClientRect(),\n            dx = point[0] - point.clientX, dy = point[1] - point.clientY;\n        if (bounds && oob(bounds.left + dx, bounds.top + dy,\n                          bounds.right + dx, bounds.bottom + dy)) {\n            return false;\n        }\n    }\n    // check path\n    var npsl = normalize(pathNode);\n    var l, t, r, b;\n    for (var i = 0; i !== npsl.length; ++i) {\n        var item = npsl[i];\n        if (item[0] === \"L\") {\n            l = Math.min(item[1], item[3]);\n            t = Math.min(item[2], item[4]);\n            r = Math.max(item[1], item[3]);\n            b = Math.max(item[2], item[4]);\n        } else if (item[0] === \"C\") {\n            l = Math.min(item[1], item[3], item[5], item[7]);\n            t = Math.min(item[2], item[4], item[6], item[8]);\n            r = Math.max(item[1], item[3], item[5], item[7]);\n            b = Math.max(item[2], item[4], item[6], item[8]);\n        } else if (item[0] === \"Z\" || item[0] === \"M\") {\n            continue;\n        } else {\n            return true;\n        }\n        if (!oob(l, t, r, b)) {\n            return true;\n        }\n    }\n    return false;\n}\n\nfunction path_x_distance2_buckets(pathNode, point) {\n    var npsl = normalize(pathNode);\n    function pdist(l, t, r, b) {\n        var xd = point[0] < l ? l - point[0] : (point[0] > r ? point[0] - r : 0),\n            yd = point[1] < t ? t - point[1] : (point[1] > b ? point[1] - b : 0);\n        return Math.max(xd, yd);\n    }\n    var xmin = Infinity, xmax = -Infinity, width = 24, i, item;\n    for (i = 0; i !== npsl.length; ++i) {\n        item = npsl[i];\n        if (item[0] === \"L\") {\n            xmin = Math.min(xmin, item[1], item[3]);\n            xmax = Math.max(xmax, item[1], item[3]);\n        } else if (item[0] === \"C\") {\n            xmin = Math.min(xmin, item[1], item[3], item[5], item[7]);\n            xmax = Math.max(xmax, item[1], item[3], item[5], item[7]);\n        }\n    }\n    xmin -= width;\n    xmax += width;\n    var n = Math.max(Math.ceil((xmax - xmin) / width), 1),\n        a = new Array(n + 1),\n        l, t, r, b, d;\n    a.fill(Infinity);\n    for (i = 0; i !== npsl.length; ++i) {\n        item = npsl[i];\n        if (item[0] === \"L\") {\n            l = Math.min(item[1], item[3]);\n            t = Math.min(item[2], item[4]);\n            r = Math.max(item[1], item[3]);\n            b = Math.max(item[2], item[4]);\n        } else if (item[0] === \"C\") {\n            l = Math.min(item[1], item[3], item[5], item[7]);\n            t = Math.min(item[2], item[4], item[6], item[8]);\n            r = Math.max(item[1], item[3], item[5], item[7]);\n            b = Math.max(item[2], item[4], item[6], item[8]);\n        } else {\n            continue;\n        }\n        d = pdist(l, t, r, b);\n        l = Math.floor((l - xmin) / width);\n        r = Math.ceil((r - xmin) / width);\n        while (l <= r) {\n            a[l] = Math.min(a[l], d);\n            ++l;\n        }\n    }\n    for (i = 0; i !== a.length; ++i) {\n        if (a[i] < Infinity)\n            a[i] = a[i] * a[i];\n    }\n    a.xmin = xmin;\n    a.xmax = xmax;\n    a.width = width;\n    a.point = point;\n    return a;\n}\n\nexport function closest_point(pathNode, point, inbest) {\n    // originally from Mike Bostock http://bl.ocks.org/mbostock/8027637\n    if (inbest && !pathNodeMayBeNearer(pathNode, point, inbest.distance)) {\n        return inbest;\n    }\n\n    var pathLength = pathNode.getTotalLength(),\n        pathSegments = svg_path_number_of_items(pathNode),\n        precision = Math.max(pathLength / pathSegments / 8, 4),\n        best, bestLength, sl,\n        bestDistance2 = inbest ? (inbest.distance + 0.01) * (inbest.distance + 0.01) : Infinity;\n\n    function check(pLength) {\n        var p = pathNode.getPointAtLength(pLength),\n            dx = point[0] - p.x, dy = point[1] - p.y,\n            d2 = dx * dx + dy * dy;\n        if (d2 < bestDistance2) {\n            best = [p.x, p.y];\n            bestLength = pLength;\n            bestDistance2 = d2;\n        }\n        return p;\n    }\n\n    if (pathSegments > 20) {\n        // big-step/small-step\n        var xdb = path_x_distance2_buckets(pathNode, point),\n            xmin = xdb.xmin, width = xdb.width, p, xx;\n        for (sl = 0; sl < pathLength; ) {\n            p = check(sl);\n            xx = Math.floor((p.x - xmin) / width);\n            if (xdb[xx] > bestDistance2\n                && xdb[xx-1] > bestDistance2\n                && xdb[xx+1] > bestDistance2)\n                sl += width;\n            else\n                sl += precision;\n        }\n    } else {\n        // linear scan for coarse approximation\n        for (sl = 0; sl < pathLength; sl += precision)\n            check(sl);\n    }\n    // edge condition: always check both ends\n    check(pathLength);\n\n    // binary search for precise estimate\n    do {\n        sl = bestLength - precision / 2;\n        sl > 0 && check(sl);\n        sl += precision;\n        sl < pathLength && check(sl);\n        precision /= 2;\n    } while (precision > 0.5);\n\n    if (best) {\n        best.distance = Math.sqrt(bestDistance2);\n        best.pathNode = pathNode;\n        best.pathLength = bestLength;\n    }\n    if (best && (!inbest || best.distance <= inbest.distance + 0.01)) {\n        return best;\n    } else {\n        return inbest;\n    }\n}\n\nexport function tangent_angle(pathNode, length) {\n    var length0 = Math.max(0, length - 0.25);\n    if (length0 == length)\n        length += 0.25;\n    var p0 = pathNode.getPointAtLength(length0),\n        p1 = pathNode.getPointAtLength(length);\n    return Math.atan2(p1.y - p0.y, p1.x - p0.x);\n}\n\nexport function event_to_point(element, event) {\n    // borrowed from D3\n    var svg = element.ownerSVGElement || element, point;\n    if (svg.createSVGPoint) {\n        point = svg.createSVGPoint();\n        point.x = event.clientX;\n        point.y = event.clientY;\n        point = point.matrixTransform(element.getScreenCTM().inverse());\n    } else {\n        var rect = element.getBoundingClientRect();\n        point = {x: event.clientX - rect.left - element.clientLeft,\n                 y: event.clientY - rect.top - element.clientTop};\n    }\n    var result = [point.x, point.y];\n    result.clientX = event.clientX;\n    result.clientY = event.clientY;\n    return result;\n}\n","// ui-history.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2020 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nexport let push_history_state;\n\nif (\"pushState\" in window.history) {\n    push_history_state = function (href) {\n        var state;\n        if (!history.state) {\n            state = {href: location.href};\n            $(document).trigger(\"collectState\", [state]);\n            history.replaceState(state, document.title, state.href);\n        }\n        if (href) {\n            state = {href: href};\n            $(document).trigger(\"collectState\", [state]);\n            history.pushState(state, document.title, state.href);\n        }\n        return true;\n    };\n} else {\n    push_history_state = function () { return false; };\n}\n","// intervalseq.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2020 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nexport default class IntervalSeq {\n    constructor() {\n        this.is = [];\n    }\n    lower(x) {\n        var is = this.is, l = 0, r = is.length;\n        while (l < r) {\n            var m = l + ((r - l) >> 2) * 2;\n            if (is[m] > x)\n                r = m;\n            else if (x > is[m + 1])\n                l = m + 2;\n            else /* is[m] <= x <= is[m + 1] */\n                return m;\n        }\n        return l;\n    }\n    contains(x) {\n        var i = this.lower(x);\n        return i < this.is.length && x >= this.is[i];\n    }\n    overlaps(lo, hi) {\n        var i = this.lower(lo);\n        return i < this.is.length && hi >= this.is[i];\n    }\n    add(lo, hi) {\n        var is = this.is, i = this.lower(lo);\n        if (i >= is.length || lo < is[i])\n            is.splice(i, 0, lo, lo);\n        var j = i;\n        while (j + 2 < is.length && hi >= is[j + 2])\n            j += 2;\n        if (j !== i)\n            is.splice(i + 1, j - i);\n        is[i + 1] = Math.max(is[i + 1], hi);\n    }\n    clear() {\n        this.is = [];\n    }\n}\n","// gradegraph.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport * as svgutil from \"./svgpathutil.js\";\nimport IntervalSeq from \"./intervalseq.js\";\nimport { sprintf } from \"./utils.js\";\nimport { hasClass, addClass } from \"./ui.js\";\n\nfunction mksvg(tag) {\n    return document.createElementNS(\"http://www.w3.org/2000/svg\", tag);\n}\n\nexport class GradeGraph {\n    constructor(parent, d, plot_type) {\n        const $parent = $(parent);\n\n        let mainplot = \"all\";\n        if (plot_type.indexOf(\"extension\") >= 0) {\n            mainplot = \"extension\";\n        } else if (plot_type.indexOf(\"noextra\") >= 0) {\n            mainplot = \"noextra\";\n        }\n        const dd = d.series[mainplot] || d.series.all,\n            ddmin = dd.min();\n        let xmin = ddmin < 0 ? ddmin - 1 : 0;\n        if (d.entry && d.entry.type === \"letter\") {\n            xmin = Math.min(65, ddmin < 0 ? ddmin : Math.max(ddmin - 5, 0));\n        }\n        this.min = xmin;\n        this.max = dd.max();\n        if (d.maxtotal) {\n            this.max = Math.max(this.max, d.maxtotal);\n        }\n        if (this.min == this.max) {\n            xmin = this.min = this.min - 1;\n            this.max += 1;\n        }\n        this.total = d.maxtotal;\n        this.cutoff = dd.cutoff;\n\n        this.svg = mksvg(\"svg\");\n        this.gg = mksvg(\"g\");\n        this.gx = mksvg(\"g\");\n        this.gy = mksvg(\"g\");\n        this.xl = this.xt = true;\n        this.yl = this.yt = plot_type.substring(0, 3) !== \"pdf\";\n        this.tw = $parent.width();\n        this.th = $parent.height();\n        this.svg.setAttribute(\"preserveAspectRatio\", \"none\");\n        this.svg.setAttribute(\"width\", this.tw);\n        this.svg.setAttribute(\"height\", this.th);\n        this.svg.setAttribute(\"overflow\", \"visible\");\n        this.svg.appendChild(this.gg);\n        this.gx.setAttribute(\"class\", \"pa-gg-axis pa-gg-xaxis\");\n        this.svg.appendChild(this.gx);\n        this.gy.setAttribute(\"class\", \"pa-gg-axis pa-gg-yaxis\");\n        this.svg.appendChild(this.gy);\n        this.maxp = 0;\n        this.hoveranno = null;\n        this.hoveron = false;\n        $parent.html(this.svg);\n\n        const digits = mksvg(\"text\");\n        digits.appendChild(document.createTextNode(\"888\"));\n        this.gx.appendChild(digits);\n        var domr = digits.getBBox();\n        this.xdw = domr.width / 3;\n        this.xdh = domr.height;\n        this.gx.removeChild(digits);\n\n        this.xlw = this.xdw * (this.max > 0 ? Math.floor(Math.log10(this.max)) + 1 : 1);\n\n        this.mt = Math.ceil(Math.max(this.yl ? this.xdh / 2 : 0, 2));\n        this.mr = Math.ceil(this.xl ? this.xlw / 2 : 0);\n        this.mb = (this.xt ? 5 : 0) + (this.xl ? this.xdh + 3 : 0);\n        if (this.yl) {\n            const h = this.th - this.mt - Math.max(this.mb, Math.ceil(this.xdh / 2));\n            if (h > this.xdh) {\n                var minyaxis = $parent.hasClass(\"pa-grgraph-min-yaxis\");\n                if (minyaxis) {\n                    this.yfmt = \"%.0r%%\";\n                } else {\n                    this.yfmt = \"%.0r\";\n                }\n                const labelcap = h / this.xdh;\n                this.ymax = 100;\n                if (labelcap > 15) {\n                    this.ylu = 10;\n                } else if (labelcap > 5) {\n                    this.ylu = 25;\n                } else if (labelcap > 3) {\n                    this.ylu = 50;\n                } else {\n                    this.ylu = 100;\n                }\n                this.ml = (this.yt ? 5 : 0) + 5 + (minyaxis ? 4.2 : 3) * this.xdw;\n\n                if (!$parent.hasClass(\"pa-grgraph-min-yaxis\")) {\n                    this.yltext = mksvg(\"text\");\n                    this.yltext.appendChild(document.createTextNode(\"% of grades\"));\n                    this.gy.appendChild(this.yltext);\n                    domr = this.yltext.getBBox();\n                    if (domr.width <= 0.875 * h) {\n                        this.ml += this.xdw * 0.5 + this.xdh;\n                    } else {\n                        this.gy.removeText(this.yltext);\n                        this.yltext = null;\n                    }\n                }\n\n                this.mb = Math.max(this.mb, Math.ceil(this.xdh / 2));\n            } else {\n                this.yl = false;\n                this.ml = 0;\n                this.mt = 2;\n            }\n        } else {\n            this.ml = this.yt ? 5 : 0;\n        }\n        if (this.xl) {\n            this.ml = Math.max(this.ml, Math.ceil(this.xdw / 2));\n        }\n\n        this.gw = this.tw - this.ml - this.mr;\n        var gh = this.gh = this.th - this.mt - this.mb;\n        const xfactor = this.gw / Math.max(this.max - this.min, 0.001);\n        this.xax = function (x) {\n            return (x - xmin) * xfactor;\n        };\n        this.yax = function (y) {\n            return gh - y * gh;\n        };\n        this.unxax = function (ax) {\n            return (ax / xfactor) + xmin;\n        };\n        this.unyax = function (ay) {\n            return -(ay - gh) / gh;\n        };\n        if (d.entry && d.entry.type) {\n            const gt = window.pa_grade_types[d.entry.type];\n            if (gt && gt.tics)\n                this.xtics = gt.tics.call(gt);\n        }\n        if (this.max - this.min > 900) {\n            this.xfmt = \"%.0r\";\n        } else if (this.max - this.min > 10) {\n            this.xfmt = \"%.1r\";\n        } else {\n            this.xfmt = \"%.3r\";\n        }\n\n        this.gg.setAttribute(\"transform\", \"translate(\" + this.ml + \",\" + this.mt + \")\");\n        this.gx.setAttribute(\"transform\", \"translate(\" + this.ml + \",\" + (this.mt + this.gh + (this.xt ? 2 : -5)) + \")\");\n        this.gy.setAttribute(\"transform\", \"translate(\" + (this.ml + (this.yt ? -2 : 5)) + \",\" + this.mt + \")\");\n\n        this.hlcurve = null;\n        this.hlcurve_series = null;\n        this.hlcurve_priority = null;\n        this.hlcurve_ucdf = null;\n    }\n    numeric_xaxis() {\n        // determine number\n        const ndigit_max = Math.floor(Math.log10(this.max)) + 1,\n            labelw = this.xdw * (ndigit_max + 0.5),\n            labelcap = this.gw / labelw;\n\n        const unitbase = Math.pow(10, Math.max(0, ndigit_max - 2)),\n            nunits = (this.max - this.min) / unitbase;\n        let unit;\n        if (labelcap > nunits * 4 && unitbase > 1) {\n            unit = unitbase / 2;\n        } else if (labelcap > nunits * 2) {\n            unit = unitbase;\n        } else if (labelcap > nunits * (unitbase <= 1 ? 0.75 : 1)) {\n            unit = 2 * unitbase;\n        } else if (unitbase > 1 && labelcap > nunits * 0.6) {\n            unit = 2.5 * unitbase;\n        } else if (labelcap > nunits * 0.3) {\n            unit = 5 * unitbase;\n        } else {\n            unit = 10 * unitbase;\n        }\n\n        const d = [];\n        let x = Math.floor(this.min / unit) * unit, total_done = false;\n        while (x < this.max + unit) {\n            let xx = x, draw = this.xl;\n            if (this.total) {\n                if (xx > this.total\n                    && xx - unit < this.total\n                    && !total_done) {\n                    xx = this.total;\n                    x -= unit;\n                }\n                if (xx == this.total) {\n                    total_done = true;\n                }\n            }\n            x += unit;\n            if (xx < this.min) {\n                continue;\n            }\n            if (xx > this.max) {\n                xx = this.max;\n            }\n\n            const xxv = this.xax(xx);\n            d.push(\"M\", xxv, \",0v5\");\n\n            if ((this.total\n                 && xx != this.total\n                 && Math.abs(xxv - this.xax(this.total)) < labelw)\n                || (xx != this.max\n                    && xx != this.total\n                    && Math.abs(xxv - this.xax(this.max)) < labelw)) {\n                draw = false;\n            }\n\n            if (draw) {\n                const e = mksvg(\"text\");\n                e.appendChild(document.createTextNode(xx));\n                e.setAttribute(\"x\", xxv);\n                e.setAttribute(\"y\", this.xdh + 3);\n                this.gx.appendChild(e);\n            }\n        }\n\n        if (this.xt) {\n            const e = mksvg(\"path\");\n            e.setAttribute(\"d\", d.join(\"\"));\n            e.setAttribute(\"fill\", \"none\");\n            e.setAttribute(\"stroke\", \"black\");\n            this.gx.appendChild(e);\n        }\n    }\n    xtics_xaxis() {\n        // determine number\n        let label_restrictions = new IntervalSeq,\n            tic_restrictions = new IntervalSeq,\n            d = [];\n\n        for (let i = 0; i !== this.xtics.length; ++i) {\n            let xt = this.xtics[i];\n            if (xt.x < this.min || xt.x > this.max) {\n                continue;\n            }\n            let xxv = this.xax(xt.x);\n            if (xt.notic || !tic_restrictions.contains(xxv)) {\n                if (!xt.notic) {\n                    d.push(\"M\", xxv, \",0v5\");\n                    tic_restrictions.add(xxv - 3, xxv + 3);\n                }\n\n                if (this.xl && xt.text) {\n                    let lw = this.xdw * (xt.label_space || xt.text.length + 0.5) * 0.5;\n                    if (!label_restrictions.overlaps(xxv - lw, xxv + lw)) {\n                        const e = mksvg(\"text\");\n                        e.appendChild(document.createTextNode(xt.text));\n                        e.setAttribute(\"x\", xxv);\n                        e.setAttribute(\"y\", this.xdh + 3);\n                        this.gx.appendChild(e);\n                        lw = this.xdw * (xt.text.length + 0.5) * 0.5;\n                        label_restrictions.add(xxv - lw, xxv + lw);\n                    }\n                }\n            }\n        }\n\n        if (this.xt) {\n            const e = mksvg(\"path\");\n            e.setAttribute(\"d\", d.join(\"\"));\n            e.setAttribute(\"fill\", \"none\");\n            e.setAttribute(\"stroke\", \"black\");\n            this.gx.appendChild(e);\n        }\n    }\n    xaxis() {\n        if (this.xtics) {\n            this.xtics_xaxis();\n        } else {\n            this.numeric_xaxis();\n        }\n    }\n    yaxis() {\n        const d = [];\n        let y = 0;\n        while (y <= this.ymax && this.yl) {\n            const e = mksvg(\"text\");\n            e.appendChild(document.createTextNode(sprintf(this.yfmt, y)));\n            e.setAttribute(\"x\", -8);\n            e.setAttribute(\"y\", this.yax(y / this.ymax) + 0.25 * this.xdh);\n            this.gy.appendChild(e);\n\n            d.push(\"M-5,\", this.yax(y / this.ymax), \"h5\");\n\n            y += this.ylu;\n        }\n\n        if (this.yt) {\n            const e = mksvg(\"path\");\n            e.setAttribute(\"d\", d.join(\"\"));\n            e.setAttribute(\"fill\", \"none\");\n            e.setAttribute(\"stroke\", \"black\");\n            this.gy.appendChild(e);\n        }\n\n        if (this.yltext) {\n            this.yltext.setAttribute(\"transform\", \"translate(\" + (-this.ml + this.xdh) + \",\" + this.yax(0.5) + \") rotate(-90)\");\n            this.yltext.setAttribute(\"text-anchor\", \"middle\");\n        }\n    }\n    container() {\n        return this.svg.closest(\".pa-grgraph\");\n    }\n    _add_curve(path, series, prio) {\n        if (prio == null) {\n            prio = 0;\n        }\n        if (this.hlcurve_priority == null || this.hlcurve_priority <= prio) {\n            this.hlcurve = path;\n            this.hlcurve_series = series;\n            this.hlcurve_priority = prio;\n            this.hlcurve_ucdf = null;\n        }\n    }\n    append_cdf(d, klass, prio) {\n        const cdf = d.cdf, data = [], nr = 1 / d.n,\n              cutoff = this.cutoff || 0, xmin = this.min;\n        let i = 0;\n        if (cutoff) {\n            while (i < cdf.length && cdf[i+1] < cutoff * d.n) {\n                i += 2;\n            }\n        }\n        for (; i < cdf.length; i += 2) {\n            if (data.length !== 0) {\n                const x = Math.max(xmin, cdf[i] - Math.min(1, cdf[i] - cdf[i-2]) / 2);\n                data.push(\"H\", this.xax(x));\n            } else {\n                data.push(\"M\", this.xax(Math.max(xmin, cdf[i] - 0.5)), \",\", this.yax(cutoff));\n            }\n            data.push(\"V\", this.yax(cdf[i+1] * nr));\n        }\n        if (data.length !== 0) {\n            data.push(\"H\", this.xax(Math.max(this.max, cdf[cdf.length-2])));\n        }\n        const path = mksvg(\"path\");\n        path.setAttribute(\"d\", data.join(\"\"));\n        path.setAttribute(\"fill\", \"none\");\n        path.setAttribute(\"class\", klass);\n        this.gg.appendChild(path);\n        this._add_curve(path, d, prio);\n        return path;\n    }\n    append_pdf(kde, klass, prio) {\n        if (kde.maxp === 0) {\n            return null;\n        }\n        const data = [], bins = kde.kde, nrdy = 0.9 / this.maxp,\n            xax = this.xax, yax = this.yax;\n        // adapted from d3-shape by Mike Bostock\n        const xs = [0, 0, 0, 0], ys = [0, 0, 0, 0],\n            la = [0, 0, 0, 0], la2 = [0, 0, 0, 0],\n            epsilon = 1e-6;\n        function point(i2) {\n            const i0 = (i2 + 2) % 4, i1 = (i2 + 3) % 4, i3 = (i2 + 1) % 4;\n            let x1 = xs[i1], y1 = ys[i1], x2 = xs[i2], y2 = ys[i2];\n            if (la[i1] > epsilon) {\n                let a = 2 * la2[i1] + 3 * la[i1] * la[i2] + la2[i2],\n                    n = 3 * la[i1] * (la[i1] + la[i2]);\n                x1 = (x1 * a - xs[i0] * la2[i2] + xs[i2] * la2[i1]) / n;\n                y1 = (y1 * a - ys[i0] * la2[i2] + ys[i2] * la2[i1]) / n;\n            }\n            if (la[i3] > epsilon) {\n                let b = 2 * la2[i3] + 3 * la[i3] * la[i2] + la2[i2],\n                    m = 3 * la[i3] * (la[i3] + la[i2]);\n                x2 = (x2 * b - xs[i3] * la2[i2] + xs[i1] * la2[i3]) / m;\n                y2 = (y2 * b - ys[i3] * la2[i2] + ys[i1] * la2[i3]) / m;\n            }\n            data.push(\"C\", x1, y1, x2, y2, xs[i2], ys[i2]);\n        }\n        for (let i = 0; i !== bins.length; ++i) {\n            const x = xax(this.min + i * kde.binwidth),\n                y = yax(bins[i] * nrdy);\n            if (i === 0) {\n                data.push(\"M\", x, y);\n                xs[3] = xs[0] = x;\n                ys[3] = ys[0] = y;\n            } else {\n                const i1 = (i + 3) % 4, i2 = i % 4;\n                xs[i2] = x;\n                ys[i2] = y;\n\n                const dx = xs[i1] - x, dy = ys[i1] - y;\n                la2[i2] = Math.sqrt(dx * dx + dy * dy);\n                la[i2] = Math.sqrt(la2[i2]);\n                if (i > 1) {\n                    point(i1);\n                }\n\n                if (i === bins.length - 1) {\n                    var i3 = (i + 1) % 4;\n                    xs[i3] = x;\n                    ys[i3] = y;\n                    la2[i3] = 0;\n                    la[i3] = 0;\n                    point(i2);\n                }\n            }\n        }\n        const path = mksvg(\"path\");\n        path.setAttribute(\"d\", data.join(\" \"));\n        path.setAttribute(\"fill\", \"none\");\n        path.setAttribute(\"class\", klass);\n        this.gg.appendChild(path);\n        this._add_curve(path, kde.series, prio);\n        return path;\n    }\n    remove_if(predicate) {\n        let e = this.gg.firstChild;\n        while (e) {\n            const next = e.nextSibling;\n            if (predicate.call(e)) {\n                this.gg.removeChild(e);\n            }\n            e = next;\n        }\n    }\n    highlight(d, predicate, klass) {\n        if (!this.hlcurve || !this.hlcurve_series.cdfu) {\n            return null;\n        }\n        const ispdf = hasClass(this.hlcurve, \"pa-gg-pdf\"),\n            cdf = this.hlcurve_series.cdf,\n            cdfu = this.hlcurve_series.cdfu,\n            data = [];\n        let nr, nrgh, i, ui, xv, yv, yc;\n        if (ispdf) {\n            nr = 0.9 / (this.maxp * d.n);\n        } else {\n            nr = 1 / d.n;\n        }\n        nrgh = nr * this.gh;\n        for (i = ui = 0; i !== cdf.length; i += 2) {\n            for (yc = 0; ui !== cdf[i + 1]; ++ui) {\n                if (predicate(cdfu[ui], d))\n                    ++yc;\n            }\n            if (yc) {\n                xv = this.xax(cdf[i]);\n                if (ispdf) {\n                    yv = svgutil.eval_function_path.call(this.hlcurve, xv);\n                } else {\n                    yv = this.yax(cdf[i+1] * nr);\n                }\n                if (yv != null) {\n                    data.push(\"M\", xv, \",\", yv, \"v\", yc * nrgh);\n                }\n            }\n        }\n        if (data.length) {\n            const path = mksvg(\"path\");\n            path.setAttribute(\"d\", data.join(\"\"));\n            path.setAttribute(\"fill\", \"none\");\n            path.setAttribute(\"class\", klass);\n            this.gg.appendChild(path);\n            addClass(this.gg, \"pa-gg-has-hl\");\n            return path;\n        } else {\n            return null;\n        }\n    }\n    typed_annotation(klass) {\n        const dot = mksvg(\"circle\");\n        dot.setAttribute(\"class\", \"pa-gg-mark hl-\" + (klass || \"main\"));\n        dot.setAttribute(\"r\", !klass || klass === \"main\" ? 5 : 3.5);\n        return dot;\n    }\n    star_annotation(rs, start, n, klass) {\n        if (start == null) {\n            start = Math.PI / 2;\n        }\n        if (n == null) {\n            n = 5;\n        }\n        var star = mksvg(\"path\");\n        star.setAttribute(\"class\", klass);\n        var d = [\"M\"], cos = Math.cos, sin = Math.sin, delta = Math.PI / n;\n        for (var i = 0; i < 2 * n; ++i) {\n            d.push(rs[i & 1] * cos(start), \" \", rs[i & 1] * sin(start), i ? \" \" : \"L\");\n            start += delta;\n        }\n        d.push(\"z\");\n        star.setAttribute(\"d\", d.join(\"\"));\n        return star;\n    }\n    annotate(x, elt, after) {\n        if (this.hlcurve) {\n            var xv = this.xax(x), yv = svgutil.eval_function_path.call(this.hlcurve, xv);\n            if (yv === null && this.cutoff)\n                yv = this.yax(this.cutoff);\n            if (yv !== null) {\n                elt = elt || this.typed_annotation();\n                elt.setAttribute(\"transform\", \"translate(\" + xv + \",\" + yv + \")\");\n                this.gg.insertBefore(elt, after || null);\n                return true;\n            }\n        }\n        return false;\n    }\n    user_x(uid) {\n        let ucdf = this.hlcurve_ucdf;\n        if (!ucdf) {\n            if (!this.hlcurve_series || !this.hlcurve_series.cdfu) {\n                return undefined;\n            }\n            const cdf = this.hlcurve_series.cdf,\n                cdfu = this.hlcurve_series.cdfu;\n            this.hlcurve_ucdf = ucdf = {};\n            let i = 0;\n            for (let ui = 0; ui !== cdfu.length; ++ui) {\n                while (ui >= cdf[i + 1]) {\n                    i += 2;\n                }\n                ucdf[cdfu[ui]] = cdf[i];\n            }\n        }\n        return ucdf[uid];\n    }\n    highlight_users() {\n        if (!this.hlcurve_series || !this.hlcurve_series.cdfu) {\n            return;\n        }\n\n        this.last_highlight = this.last_highlight || {};\n        const attrs = this.container().attributes, desired = {};\n        for (let i = 0; i !== attrs.length; ++i) {\n            if (attrs[i].name.startsWith(\"data-pa-highlight\")) {\n                let type;\n                if (attrs[i].name === \"data-pa-highlight\") {\n                    type = \"main\";\n                } else {\n                    type = attrs[i].name.substring(18);\n                }\n                desired[type] = attrs[i].value;\n                this.last_highlight[type] = this.last_highlight[type] || \"\";\n            }\n        }\n\n        for (let type in this.last_highlight) {\n            var uids = desired[type] || \"\";\n            if (this.last_highlight[type] === uids) {\n                continue;\n            }\n\n            const uidm = {}, uidx = uids.split(/\\s+/);\n            for (const uid of uidx) {\n                if (uid !== \"\")\n                    uidm[uid] = 1;\n            }\n\n            var el = this.gg.firstChild, elnext;\n            var klass = \"pa-gg-mark hl-\" + type;\n            while (el && (!hasClass(el, \"pa-gg-mark\") || el.className.animVal < klass)) {\n                el = el.nextSibling;\n            }\n\n            while (el && el.className.animVal === klass) {\n                elnext = el.nextSibling;\n                const uid = +el.getAttribute(\"data-pa-uid\");\n                if (uidm[uid]) {\n                    uidm[uid] = 2;\n                } else {\n                    this.gg.removeChild(el);\n                }\n                el = elnext;\n            }\n\n            for (const uid in uidm) {\n                if (uidm[uid] !== 1) {\n                    continue;\n                }\n                const x = this.user_x(uid);\n                if (x != null) {\n                    const e = this.typed_annotation(type);\n                    e.setAttribute(\"data-pa-uid\", uid);\n                    this.annotate(x, e, el);\n                }\n            }\n\n            this.last_highlight[type] = uids;\n        }\n    }\n    hover() {\n        const that = this;\n        function closer_mark(hlpaths, pt, bestDistance2) {\n            let hlpt = null;\n            for (const hlp of hlpaths) {\n                const m = hlp.getAttribute(\"transform\").match(/^translate\\(([-+\\d.]+),([-+\\d.]+)\\)$/);\n                if (m) {\n                    const dx = +m[1] - pt[0], dy = +m[2] - pt[1],\n                        distance2 = dx * dx + dy * dy;\n                    if (distance2 < bestDistance2) {\n                        hlpt = [+m[1], +m[2]];\n                        hlpt.pathNode = hlp;\n                        bestDistance2 = distance2;\n                    }\n                }\n            }\n            hlpt && (hlpt.distance = Math.sqrt(bestDistance2));\n            return hlpt;\n        }\n        function handle(event) {\n            let pt = {distance: 20}, xfmt = that.xfmt;\n            if (event.type !== \"mousemove\") {\n                that.hoveron = event.type !== \"mouseleave\";\n            }\n            if (that.hoveron) {\n                const loc = svgutil.event_to_point(that.svg, event),\n                    paths = that.gg.querySelectorAll(\".pa-gg-pdf, .pa-gg-cdf\");\n                loc[0] -= that.ml;\n                loc[1] -= that.mt;\n                for (var p of paths) {\n                    pt = svgutil.closest_point(p, loc, pt);\n                }\n                if (pt.pathNode) {\n                    const hlpt = closer_mark(that.gg.querySelectorAll(\".pa-gg-mark.hl-main\"), pt, 36)\n                        || closer_mark(that.gg.querySelectorAll(\".pa-gg-mark:not(.hl-main)\"), pt, 25);\n                    if (hlpt) {\n                        pt = hlpt;\n                        if (xfmt === \"%.0r\" || xfmt === \"%.1f\") {\n                            xfmt = \"%.2r\";\n                        }\n                    }\n                }\n            }\n            let ha = that.hoveranno;\n            if (pt.pathNode) {\n                if (!ha) {\n                    ha = that.hoveranno = [that.star_annotation([4, 10], null, null, \"pa-gg-hover-mark\")];\n                    that.gg.appendChild(ha[0]);\n\n                    var e = mksvg(\"path\");\n                    e.setAttribute(\"d\", \"M0,0v5\");\n                    e.setAttribute(\"fill\", \"none\");\n                    e.setAttribute(\"stroke\", \"black\");\n                    that.gx.appendChild(e);\n                    ha.push(e);\n\n                    e = mksvg(\"rect\");\n                    e.setAttribute(\"class\", \"pa-gg-hover-box\");\n                    e.setAttribute(\"y\", 5);\n                    e.setAttribute(\"height\", that.xdh + 1.5);\n                    e.setAttribute(\"rx\", 3);\n                    that.gx.appendChild(e);\n                    ha.push(e);\n\n                    e = mksvg(\"text\");\n                    e.appendChild(document.createTextNode(\"\"));\n                    e.setAttribute(\"class\", \"pa-gg-hover-text\");\n                    e.setAttribute(\"y\", that.xdh + 3);\n                    that.gx.appendChild(e);\n                    ha.push(e);\n\n                    e = mksvg(\"text\");\n                    e.appendChild(document.createTextNode(\"\"));\n                    e.setAttribute(\"class\", \"pa-gg-anno-name\");\n                    e.setAttribute(\"text-anchor\", \"end\");\n                    e.setAttribute(\"dx\", -8);\n                    that.gg.appendChild(e);\n                    ha.push(e);\n\n                    if (that.yl) {\n                        e = mksvg(\"path\");\n                        e.setAttribute(\"d\", \"M-5,0h5\");\n                        e.setAttribute(\"fill\", \"none\");\n                        e.setAttribute(\"stroke\", \"black\");\n                        that.gy.appendChild(e);\n                        ha.push(e);\n\n                        e = mksvg(\"rect\");\n                        e.setAttribute(\"class\", \"pa-gg-hover-box\");\n                        e.setAttribute(\"height\", that.xdh + 1);\n                        e.setAttribute(\"rx\", 3);\n                        that.gy.appendChild(e);\n                        ha.push(e);\n\n                        e = mksvg(\"text\");\n                        e.appendChild(document.createTextNode(\"\"));\n                        e.setAttribute(\"class\", \"pa-gg-hover-text\");\n                        e.setAttribute(\"x\", -8);\n                        that.gy.appendChild(e);\n                        ha.push(e);\n                    }\n                }\n                ha[0].setAttribute(\"transform\", \"translate(\" + pt[0] + \",\" + pt[1] + \")\");\n\n                ha[1].setAttribute(\"transform\", \"translate(\" + pt[0] + \",0)\");\n                ha[3].setAttribute(\"x\", pt[0]);\n                ha[3].firstChild.data = sprintf(xfmt, that.unxax(pt[0]));\n                var bb = ha[3].getBBox();\n                ha[2].setAttribute(\"x\", pt[0] - bb.width / 2 - 2);\n                ha[2].setAttribute(\"width\", bb.width + 4);\n\n                let ptconf, s, name;\n                if (pt.pathNode.hasAttribute(\"data-pa-uid\")\n                    && (ptconf = this.closest(\"form\").pa__ptconf)\n                    && (s = ptconf.uidmap[pt.pathNode.getAttribute(\"data-pa-uid\")])\n                    && (name = ptconf.render_tooltip_name(s))) {\n                    ha[4].firstChild.data = name;\n                    ha[4].setAttribute(\"x\", pt[0]);\n                    ha[4].setAttribute(\"y\", pt[1]);\n                } else {\n                    ha[4].firstChild.data = \"\";\n                }\n\n                if (that.yl) {\n                    ha[5].setAttribute(\"transform\", \"translate(0,\" + pt[1] + \")\");\n                    ha[7].setAttribute(\"y\", pt[1] + 0.25 * that.xdh);\n                    ha[7].firstChild.data = sprintf(that.yfmt, that.unyax(pt[1]) * that.ymax);\n                    bb = ha[7].getBBox();\n                    ha[6].setAttribute(\"x\", -bb.width - 10);\n                    ha[6].setAttribute(\"y\", pt[1] - (that.xdh + 2) / 2);\n                    ha[6].setAttribute(\"width\", bb.width + 4);\n                }\n            } else if (ha) {\n                that.gg.removeChild(ha[0]);\n                that.gx.removeChild(ha[1]);\n                that.gx.removeChild(ha[2]);\n                that.gx.removeChild(ha[3]);\n                that.gg.removeChild(ha[4]);\n                if (that.yl) {\n                    that.gy.removeChild(ha[5]);\n                    that.gy.removeChild(ha[6]);\n                    that.gy.removeChild(ha[7]);\n                }\n                that.hoveranno = null;\n            }\n        }\n        this.svg.addEventListener(\"mouseenter\", handle, false);\n        this.svg.addEventListener(\"mousemove\", handle, false);\n        this.svg.addEventListener(\"mouseleave\", handle, false);\n    }\n}\n","// gradestats.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nclass GradeSeries {\n    constructor(d) {\n        this.n = d.n;\n        this.cdf = d.cdf;\n        this.cdfu = d.cdfu || null;\n        this.mean = d.mean || null;\n        this.median = d.median || null;\n        this.stddev = d.stddev || null;\n        this.cutoff = d.cutoff || null;\n    }\n    min() {\n        return this.cdf.length ? this.cdf[0] : 0;\n    }\n    max() {\n        return this.cdf.length ? this.cdf[this.cdf.length - 2] : 0;\n    }\n    count_at(x) {\n        const cdf = this.cdf;\n        let l = 0, r = cdf.length;\n        while (l < r) {\n            const m = l + ((r - l) >> 2) * 2;\n            if (cdf[m] >= x) {\n                r = m;\n            } else {\n                l = m + 2;\n            }\n        }\n        return cdf[l+1];\n    }\n}\n\nexport class GradeKde {\n    constructor(series, gi, hfrac, nbins) {\n        const maxg = gi.max, ming = gi.min,\n            H = (maxg - ming) * hfrac, iH = 1 / H;\n        function epanechnikov(x) {\n            if (x >= -H && x <= H) {\n                x *= iH;\n                return 0.75 * iH * (1 - x * x);\n            } else {\n                return 0;\n            }\n        }\n        const bins = [];\n        for (let i = 0; i !== nbins + 1; ++i) {\n            bins.push(0);\n        }\n        const cdf = series.cdf, dx = (maxg - ming) / nbins, idx = 1 / dx;\n        for (let i = 0; i < cdf.length; i += 2) {\n            const y = cdf[i+1] - (i === 0 ? 0 : cdf[i-1]);\n            let x1 = Math.floor((cdf[i] - ming - H) * idx);\n            const x2 = Math.ceil((cdf[i] - ming + H) * idx);\n            while (x1 < x2) {\n                const x = Math.max(-1, Math.min(nbins + 1, x1));\n                if (x >= 0 && x <= nbins) {\n                    bins[x] += epanechnikov(x1 * dx - cdf[i] + ming) * y;\n                }\n                ++x1;\n            }\n        }\n        let maxp = 0;\n        if (series.n) {\n            const nr = 1 / series.n;\n            for (let i = 0; i !== nbins + 1; ++i) {\n                bins[i] *= nr;\n                maxp = Math.max(maxp, bins[i]);\n            }\n        }\n        this.series = series;\n        this.kde = bins;\n        this.maxp = maxp;\n        this.binwidth = dx;\n    }\n}\n\n// pset psetid all extension noextra extension_noextra maxtotal entry\nexport class GradeStats {\n    constructor(d) {\n        this.pset = d.pset;\n        this.psetid = d.psetid;\n        this.maxtotal = d.maxtotal || null;\n        this.entry = d.entry || null;\n        this.series = {};\n        for (let i in d.series) {\n            this.series[i] = new GradeSeries(d.series[i]);\n        }\n    }\n}\n","// grgraph-ui.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hasClass, addClass, removeClass, handle_ui } from \"./ui.js\";\nimport { hoturl } from \"./hoturl.js\";\nimport { wstorage } from \"./utils.js\";\nimport { GradeGraph } from \"./grgraph.js\";\nimport { GradeKde, GradeStats } from \"./gradestats.js\";\n\n\nfunction mksvg(tag) {\n    return document.createElementNS(\"http://www.w3.org/2000/svg\", tag);\n}\n\nfunction draw_grgraph() {\n    const self = this, d = $(self).data(\"paGradeData\");\n    if (!d) {\n        addClass(self, \"hidden\");\n        $(self).removeData(\"paGradeGraph\").off(\"redrawgraph\");\n        return;\n    }\n\n    const pi = self.closest(\".pa-psetinfo\"),\n        user_extension = !pi || pi.hasAttribute(\"data-pa-user-extension\");\n\n    // compute plot types\n    const plot_types = [];\n    if (d.series.extension && pi && user_extension) {\n        plot_types.push(\"cdf-extension\", \"pdf-extension\");\n    }\n    plot_types.push(\"cdf\", \"pdf\");\n    if (d.series.extension && !pi) {\n        plot_types.push(\"cdf-extension\", \"pdf-extension\");\n    }\n    if (d.series.noextra) {\n        plot_types.push(\"cdf-noextra\", \"pdf-noextra\");\n    }\n    plot_types.push(\"all\");\n    self.setAttribute(\"data-pa-gg-types\", plot_types.join(\" \"));\n\n    // compute this plot type\n    let plot_type = self.getAttribute(\"data-pa-gg-type\");\n    if (!plot_type) {\n        plot_type = wstorage(true, \"pa-gg-type\");\n    }\n    if (!plot_type) {\n        let plotarg = wstorage(false, \"pa-gg-type\");\n        if (plotarg && plotarg[0] === \"{\") {\n            try {\n                plotarg = JSON.parse(plotarg);\n                // remember previous plot choice for up to two hours\n                if (typeof plotarg.type === \"string\"\n                    && typeof plotarg.at === \"number\"\n                    && plotarg.at >= new Date().getTime() - 7200000) {\n                    plot_type = plotarg.type;\n                }\n            } catch {\n            }\n        }\n    }\n    if (!plot_type || plot_type === \"default\") {\n        plot_type = plot_types[0];\n    }\n    if (plot_types.indexOf(plot_type) < 0) {\n        if (plot_type.substring(0, 3) === \"pdf\") {\n            plot_type = plot_types[1];\n        } else {\n            plot_type = plot_types[0];\n        }\n    }\n    self.setAttribute(\"data-pa-gg-type\", plot_type);\n    $(self).removeClass(\"cdf pdf all cdf-extension pdf-extension all-extension cdf-noextra pdf-noextra all-noextra hidden\").addClass(plot_type);\n\n    const want_all = plot_type.substring(0, 3) === \"all\",\n        want_extension = plot_type.indexOf(\"-extension\") >= 0\n            || (want_all && user_extension && d.extension),\n        want_noextra = plot_type.indexOf(\"-noextra\") >= 0\n            || (want_all && d.series.noextra && !want_extension);\n\n    let $plot = $(self).find(\".pa-plot\");\n    if (!$plot.length) {\n        $plot = $(self);\n    }\n\n    const grgr = new GradeGraph($plot[0], d, plot_type);\n    $(self).data(\"paGradeGraph\", grgr);\n\n    if (grgr.total && grgr.total < grgr.max) {\n        let total = mksvg(\"line\");\n        total.setAttribute(\"x1\", grgr.xax(grgr.total));\n        total.setAttribute(\"y1\", grgr.yax(0));\n        total.setAttribute(\"x2\", grgr.xax(grgr.total));\n        total.setAttribute(\"y2\", grgr.yax(1));\n        total.setAttribute(\"class\", \"pa-gg-anno-total\");\n        grgr.gg.appendChild(total);\n    }\n\n    // series\n    const kde_nbins = Math.ceil((grgr.max - grgr.min) / 2), kde_hfactor = 0.08, kdes = {};\n    if (plot_type === \"pdf-extension\") {\n        kdes.extension = new GradeKde(d.series.extension, grgr, kde_hfactor, kde_nbins);\n    } else if (plot_type === \"pdf-noextra\") {\n        kdes.noextra = new GradeKde(d.series.noextra, grgr, kde_hfactor, kde_nbins);\n    } else if (plot_type === \"pdf\") {\n        kdes.main = new GradeKde(d.series.all, grgr, kde_hfactor, kde_nbins);\n    }\n    for (let i in kdes) {\n        grgr.maxp = Math.max(grgr.maxp, kdes[i].maxp);\n    }\n\n    if (plot_type === \"pdf-noextra\") {\n        grgr.append_pdf(kdes.noextra, \"pa-gg-pdf pa-gg-noextra\");\n    } else if (plot_type === \"pdf\") {\n        grgr.append_pdf(kdes.main, \"pa-gg-pdf\");\n    } else if (plot_type === \"pdf-extension\") {\n        grgr.append_pdf(kdes.extension, \"pa-gg-pdf pa-gg-extension\");\n    } else if (plot_type === \"cdf-noextra\"\n               || (plot_type === \"all\" && d.series.noextra)) {\n        grgr.append_cdf(d.series.noextra, \"pa-gg-cdf pa-gg-noextra\");\n    }\n    if (plot_type === \"cdf\"\n        || plot_type === \"all\") {\n        grgr.append_cdf(d.series.all, \"pa-gg-cdf\", 1);\n    }\n    if (plot_type === \"cdf-extension\"\n        || (plot_type === \"all\" && d.series.extension && user_extension)) {\n        grgr.append_cdf(d.series.extension, \"pa-gg-cdf pa-gg-extension\");\n    }\n\n    // cutoff\n    if (grgr.cutoff && plot_type.substring(0, 3) !== \"pdf\") {\n        const cutoff = mksvg(\"rect\");\n        cutoff.setAttribute(\"x\", grgr.xax(0));\n        cutoff.setAttribute(\"y\", grgr.yax(grgr.cutoff));\n        cutoff.setAttribute(\"width\", grgr.xax(grgr.max));\n        cutoff.setAttribute(\"height\", grgr.yax(0) - grgr.yax(grgr.cutoff));\n        cutoff.setAttribute(\"fill\", \"rgba(255,0,0,0.1)\");\n        grgr.gg.appendChild(cutoff);\n    }\n\n    // load user grade\n    const sheet = pi ? pi.pa__gradesheet : null,\n        total = sheet ? sheet.grade_total(want_noextra && !want_all) : null;\n    if (total != null) {\n        grgr.annotate(total);\n    }\n\n    // axes\n    grgr.xaxis();\n    grgr.yaxis();\n\n    if (self.hasAttribute(\"data-pa-highlight\")) {\n        grgr.highlight_users();\n    }\n\n    grgr.hover();\n\n    // summary\n    $(self).find(\".statistics\").each(function () {\n        const dd = grgr.last_curve_series, stt = [];\n        if (dd && dd.mean) {\n            stt.push(\"mean \" + dd.mean.toFixed(1));\n        }\n        if (dd && dd.median) {\n            stt.push(\"median \" + dd.median.toFixed(1));\n        }\n        if (dd && dd.stddev) {\n            stt.push(\"stddev \" + dd.stddev.toFixed(1));\n        }\n        const t = [stt.join(\", \")];\n        if (dd && total != null) {\n            const y = dd.count_at(total);\n            if (dd.cutoff && y < dd.cutoff * dd.n) {\n                t.push(\"≤\" + Math.round(dd.cutoff * 100) + \" %ile\");\n            } else {\n                t.push(Math.round(Math.min(Math.max(1, y * 100 / dd.n), 99)) + \" %ile\");\n            }\n        }\n        if (t.length) {\n            removeClass(this, \"hidden\");\n            this.innerHTML = t.join(\" · \");\n        } else {\n            addClass(this, \"hidden\");\n            this.innerHTML = \"\";\n        }\n    });\n\n    $(self).find(\".pa-grgraph-type\").each(function () {\n        const title = [];\n        if (plot_type.startsWith(\"cdf\")) {\n            title.push(\"CDF\");\n        } else if (plot_type.startsWith(\"pdf\")) {\n            title.push(\"PDF\");\n        }\n        if (want_extension && !want_all) {\n            title.push(\"extension\");\n        }\n        if (want_noextra && !want_all) {\n            title.push(\"no extra credit\");\n        }\n        const t = title.length ? \" (\" + title.join(\", \") + \")\" : \"\";\n        this.innerHTML = \"grade statistics\" + t;\n    });\n\n    grgr.highlight_users();\n    $(self).off(\"redrawgraph\").on(\"redrawgraph\", draw_grgraph);\n}\n\nexport function grgraph() {\n    const self = this, p = self.getAttribute(\"data-pa-pset\");\n    $.ajax(hoturl(\"=api/gradestatistics\", p ? {pset: p} : {}), {\n        type: \"GET\", cache: true, dataType: \"json\",\n        success: function (d) {\n            if (d.series && d.series.all) {\n                $(self).data(\"paGradeData\", new GradeStats(d));\n                draw_grgraph.call(self);\n            }\n        }\n    });\n}\n\nhandle_ui.on(\"js-grgraph-flip\", function () {\n    const elt = this.closest(\".pa-grgraph\"),\n        plot_types = (elt.getAttribute(\"data-pa-gg-types\") || \"\").split(/ /),\n        plot_type = elt.getAttribute(\"data-pa-gg-type\");\n    let i = plot_types.indexOf(plot_type);\n    if (i >= 0) {\n        i = (i + (hasClass(this, \"prev\") ? plot_types.length - 1 : 1)) % plot_types.length;\n        elt.setAttribute(\"data-pa-gg-type\", plot_types[i]);\n        wstorage(true, \"pa-gg-type\", plot_types[i]);\n        wstorage(false, \"pa-gg-type\", {type: plot_types[i], at: new Date().getTime()});\n        draw_grgraph.call(elt);\n    }\n});\n","// grgraph-highlight.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hasClass, handle_ui } from \"./ui.js\";\nimport { push_history_state } from \"./ui-history.js\";\n\n\nfunction hash_parse(hash) {\n    hash = hash.replace(/^[^#]*/, \"\");\n    let regex = /([^#=/]+)[=/]?([^/]*)/g, m, h = {};\n    while ((m = regex.exec(hash))) {\n        h[m[1]] = decodeURIComponent(m[2].replace(/\\+/g, \" \"));\n    }\n    return h;\n}\n\nfunction hash_unparse(h) {\n    const a = [];\n    for (var k in h) {\n        if (h[k] === null || h[k] === undefined || h[k] === \"\") {\n            a.push(k);\n        } else {\n            a.push(k + \"=\" + encodeURIComponent(h[k]).replace(/%20/g, \"+\"));\n        }\n    }\n    a.sort();\n    return a.length ? \"#\" + a.join(\"/\") : \"\";\n}\n\nfunction hash_modify(changes) {\n    const h = hash_parse(location.hash);\n    for (let k in changes) {\n        if (changes[k] === null || changes[k] === undefined) {\n            delete h[k];\n        } else {\n            h[k] = changes[k];\n        }\n    }\n    const newhash = hash_unparse(h);\n    if (newhash !== location.hash) {\n        push_history_state(location.origin + location.pathname + location.search + newhash);\n    }\n}\n\nfunction want_grgraph_hash() {\n    return hasClass(document.body, \"want-grgraph-hash\");\n}\n\n\nfunction update(where, color, attr) {\n    const key = \"data-pa-highlight\" + (color === \"main\" ? \"\" : \"-\" + color);\n    attr = attr || \"\";\n    $(where).find(\".pa-grgraph\").each(function () {\n        const old_attr = this.getAttribute(key) || \"\", that = this;\n        if (old_attr !== attr\n            && (color === \"main\" || this.getAttribute(\"data-pa-pset\") !== \"course\")) {\n            attr ? this.setAttribute(key, attr) : this.removeAttribute(key);\n            window.requestAnimationFrame(function () {\n                const gg = $(that).data(\"paGradeGraph\");\n                gg && gg.highlight_users();\n            });\n        }\n    });\n}\n\nfunction course_xcdf() {\n    let xd = null;\n    $(\".pa-grgraph[data-pa-pset=course]\").each(function () {\n        const d = $(this).data(\"paGradeData\");\n        if (d && d.series.all && d.series.all.cdfu) {\n            xd = d.series.all;\n            return false;\n        }\n    });\n    return xd;\n}\n\nfunction update_course(str, tries) {\n    const ranges = {}, colors = {};\n    let any = false;\n    for (let range of str.match(/[-\\d.]+/g) || []) {\n        ranges[range] = true;\n    }\n    $(\".js-grgraph-highlight-course\").each(function () {\n        const range = this.getAttribute(\"data-pa-highlight-range\") || \"90-100\",\n            color = this.getAttribute(\"data-pa-highlight-type\") || \"h00\";\n        colors[color] = colors[color] || [];\n        if ((this.checked = !!ranges[range])) {\n            let m = range.match(/^([-+]?(?:\\d+\\.?\\d*|\\.\\d+))-([-+]?(?:\\d+\\.?\\d*|\\.\\d))(\\.?)$/);\n            if (m) {\n                colors[color].push(+m[1], +m[2] + (m[3] ? 0.00001 : 0));\n                any = true;\n            } else if ((m = range.match(/^([-+]?(?:\\d+\\.?\\d*|\\.\\d+))-$/))) {\n                colors[color].push(+m[1], Infinity);\n                any = true;\n            } else {\n                throw new Error(\"bad range\");\n            }\n        }\n    });\n    let xd;\n    if (!any) {\n        for (let color in colors) {\n            update(document.body, color, \"\");\n        }\n    } else if ((xd = course_xcdf())) {\n        for (let color in colors) {\n            const ranges = colors[color], a = [];\n            if (ranges.length) {\n                for (let i = 0; i !== xd.cdf.length; i += 2) {\n                    for (let j = 0; j !== ranges.length; j += 2) {\n                        if (xd.cdf[i] >= ranges[j] && xd.cdf[i] < ranges[j+1]) {\n                            const ui0 = i ? xd.cdf[i-1] : 0;\n                            Array.prototype.push.apply(a, xd.cdfu.slice(ui0, xd.cdf[i+1]));\n                            break;\n                        }\n                    }\n                }\n                a.sort();\n            }\n            update(document.body, color, a.join(\" \"));\n        }\n    } else {\n        setTimeout(function () {\n            update_course(hash_parse(location.hash).hr || \"\", tries + 1);\n        }, 8 << Math.max(tries, 230));\n    }\n}\n\nfunction update_hash(href) {\n    const h = hash_parse(href);\n    update(document.body, \"main\", h.hs || \"\");\n    $(\"input[type=checkbox].js-grgraph-highlight\").prop(\"checked\", false);\n    for (let uid of (h.hs || \"\").match(/\\d+/g) || []) {\n        $(\"tr[data-pa-uid=\" + uid + \"] input[type=checkbox].js-grgraph-highlight\").prop(\"checked\", true);\n    }\n    update_course(h.hr || \"\", 0);\n    $(\".js-grgraph-highlight-course\").prop(\"checked\", false);\n    for (let range of (h.hr || \"\").match(/[-\\d.]+/g) || []) {\n        $(\".js-grgraph-highlight-course[data-pa-highlight-range=\\\"\" + range + \"\\\"]\").prop(\"checked\", true);\n    }\n}\n\nhandle_ui.on(\"change.js-grgraph-highlight\", function () {\n    const rt = this.getAttribute(\"data-range-type\"),\n        a = [];\n    $(this).closest(\"form\").find(\"input[type=checkbox]\").each(function () {\n        let tr;\n        if (this.getAttribute(\"data-range-type\") === rt\n            && this.checked\n            && (tr = this.closest(\"tr\"))\n            && tr.hasAttribute(\"data-pa-uid\"))\n            a.push(+tr.getAttribute(\"data-pa-uid\"));\n    });\n    a.sort(function (x, y) { return x - y; });\n    if (want_grgraph_hash()) {\n        hash_modify({hs: a.length ? a.join(\" \") : null});\n        update(document.body, \"main\", a.join(\" \"));\n    } else {\n        update(this.closest(\"form\"), \"main\", a.join(\" \"));\n    }\n});\n\nhandle_ui.on(\"js-grgraph-highlight-course\", function () {\n    const a = [];\n    $(\".js-grgraph-highlight-course\").each(function () {\n        if (this.checked)\n            a.push(this.getAttribute(\"data-pa-highlight-range\"));\n    });\n    if (want_grgraph_hash()) {\n        hash_modify({hr: a.length ? a.join(\" \") : null});\n    }\n    update_course(a.join(\" \"), 0);\n});\n\nif (want_grgraph_hash()) {\n    $(window).on(\"popstate\", function (event) {\n        const state = (event.originalEvent || event).state;\n        state && state.href && update_hash(state.href);\n    }).on(\"hashchange\", function () {\n        update_hash(location.href);\n    });\n    $(function () { update_hash(location.href); });\n}\n","// gc-checkbox.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { GradeClass } from \"./gc.js\";\nimport { GradeEntry } from \"./gradeentry.js\";\nimport { hasClass, addClass, removeClass, $e, handle_ui } from \"./ui.js\";\n\n\nGradeClass.add(\"checkbox\", {\n    text: function (v) {\n        if (v == null || v === 0 || v === false) {\n            return \"–\";\n        } else if (v === (this.max || 1) || v === true) {\n            return \"✓\";\n        } else {\n            return \"\" + v;\n        }\n    },\n    simple_text: GradeClass.basic_text,\n    tcell: function (v) {\n        if (v == null || v === 0 || v === false) {\n            return \"\";\n        } else if (v === (this.max || 1) || v === true) {\n            return \"✓\";\n        } else {\n            return \"\" + v;\n        }\n    },\n    mount_edit: function (elt, id) {\n        return Checkbox_GradeClass.finish_mount_edit(this, $e(\"span\", \"pa-gradewidth\", $e(\"input\", {\n            type: \"checkbox\", \"class\": \"uic uich pa-gradevalue ml-0 pa-fresh\",\n            name: this.key, id: id, value: this.max, disabled: this.disabled\n        })));\n    },\n    update_edit: function (elt, v, opts) {\n        const want_checkbox = v == null || v === \"\" || v === 0 || (this && v === this.max),\n            ve = elt.firstChild.firstChild;\n        if (!want_checkbox && ve.type === \"checkbox\") {\n            Checkbox_GradeClass.uncheckbox(ve);\n        } else if (want_checkbox && ve.type !== \"checkbox\" && opts.reset) {\n            Checkbox_GradeClass.recheckbox(ve);\n        }\n        if (ve.type === \"checkbox\") {\n            ve.checked = !!v;\n            ve.indeterminate = !!opts.mixed;\n        } else if (ve.value !== v && (opts.reset || !$(ve).is(\":focus\"))) {\n            ve.value = \"\" + v;\n        }\n    },\n    justify: \"center\"\n});\n\nexport class Checkbox_GradeClass {\n    static uncheckbox(element) {\n        const ge = GradeEntry.closest(element);\n        if (element.type === \"checkbox\") {\n            element.value = element.checked ? ge.max : \"\";\n        }\n        element.type = \"text\";\n        removeClass(element, \"ml-0\");\n        addClass(element, \"pa-gradewidth\");\n        removeClass(element, \"uic\");\n        hasClass(element, \"uich\") && addClass(element, \"uii\");\n        const container = element.closest(\".pa-pv\");\n        $(container).find(\".pa-grade-uncheckbox\").remove();\n        $(container).find(\"input[name^=\\\"\" + element.name + \":\\\"]\").addClass(\"hidden\");\n    }\n    static recheckbox(element) {\n        const v = element.value.trim(), ge = GradeEntry.closest(element);\n        element.type = \"checkbox\";\n        element.checked = v !== \"\" && v !== \"0\";\n        element.value = ge.max;\n        addClass(element, \"ml-0\");\n        removeClass(element, \"pa-gradewidth\");\n        removeClass(element, \"uii\");\n        hasClass(element, \"uich\") && addClass(element, \"uic\");\n        $(element.closest(\".pa-pv\")).find(\".pa-gradedesc\").append(' <button type=\"button\" class=\"qo ui pa-grade-uncheckbox\" tabindex=\"-1\">#</button>');\n    }\n    static finish_mount_edit(ge, chsp) {\n        const fr = new DocumentFragment;\n        fr.append(chsp, \" \", $e(\"span\", \"pa-gradesc\", \"of \" + ge.max + \" \", $e(\"button\", {\n                type: \"button\", \"class\": \"link x ui pa-grade-uncheckbox\", \"tabindex\": -1\n            }, \"#\")));\n        return fr;\n    }\n}\n\nhandle_ui.on(\"pa-grade-uncheckbox\", function () {\n    $(this.closest(\".pa-pv\")).find(\".pa-gradevalue\").each(function () {\n        Checkbox_GradeClass.uncheckbox(this);\n        this.focus();\n        this.select();\n    });\n});\n","// gc-letter.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { GradeClass } from \"./gc.js\";\n\n\nconst lm = {\n    98: \"A+\", 95: \"A\", 92: \"A-\", 88: \"B+\", 85: \"B\", 82: \"B-\",\n    78: \"C+\", 75: \"C\", 72: \"C-\", 68: \"D+\", 65: \"D\", 62: \"D-\", 50: \"F\"\n};\n\nGradeClass.add(\"letter\", {\n    text: v => (v == null ? \"\" : lm[v] || \"\" + v),\n    mount_edit: function (elt, id) {\n        return GradeClass.basic_mount_edit.call(this, elt, id, {max_text: \"letter grade\"});\n    },\n    justify: \"left\",\n    tics: () => {\n        const a = [];\n        for (let g in lm) {\n            if (lm[g].length === 1)\n                a.push({x: g, text: lm[g]});\n        }\n        for (let g in lm) {\n            if (lm[g].length === 2)\n                a.push({x: g, text: lm[g], label_space: 5});\n        }\n        for (let g in lm) {\n            if (lm[g].length === 2)\n                a.push({x: g, text: lm[g].substring(1), label_space: 2, notic: true});\n        }\n        return a;\n    }\n});\n","// gc-multicheckbox.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { GradeClass } from \"./gc.js\";\nimport { Checkbox_GradeClass } from \"./gc-checkbox.js\";\nimport { handle_ui } from \"./ui.js\";\n\n\nfunction make_multicheckbox(mark) {\n    return {\n        text: function (v) {\n            if (v == null || v === 0) {\n                return \"–\";\n            } else if (v > 0 && Math.abs(v - Math.round(v)) < 0.05) {\n                return mark.repeat(Math.round(v));\n            } else {\n                return \"\" + v;\n            }\n        },\n        simple_text: GradeClass.basic_text,\n        tcell: function (v) {\n            if (v == null || v === 0) {\n                return \"\";\n            } else if (v > 0 && Math.abs(v - Math.round(v)) < 0.05) {\n                return mark.repeat(Math.round(v));\n            } else {\n                return \"\" + v;\n            }\n        },\n        mount_edit: function (elt, id) {\n            const chhidden = document.createElement(\"input\");\n            chhidden.type = \"hidden\";\n            chhidden.className = \"uich pa-gradevalue pa-fresh\";\n            chhidden.name = this.key;\n            const chsp = document.createElement(\"span\");\n            chsp.className = \"pa-gradewidth\";\n            chsp.append(chhidden);\n            for (let i = 0; i < this.max; ++i) {\n                const ch = document.createElement(\"input\");\n                ch.type = \"checkbox\";\n                ch.className = \"ui js-multicheckbox-grade ml-0\";\n                ch.name = this.key + \":\" + i;\n                ch.value = 1;\n                ch.disabled = this.disabled;\n                if (i === this.max - 1) {\n                    ch.id = id;\n                }\n                chsp.append(ch);\n            }\n            return Checkbox_GradeClass.finish_mount_edit(this, chsp);\n        },\n        update_edit: function (elt, v, opts) {\n            const want_checkbox = v == null || v === \"\" || v === 0\n                    || (v >= 0 && (!this || v <= this.max) && Math.abs(v - Math.round(v)) < 0.05),\n                ve = elt.firstChild.firstChild;\n            if (!want_checkbox && ve.type === \"hidden\") {\n                Checkbox_GradeClass.uncheckbox(ve);\n            } else if (want_checkbox && ve.type !== \"hidden\" && opts.reset) {\n                Checkbox_GradeClass.recheckbox(ve);\n            }\n            if (ve.value !== v) {\n                ve.value = v;\n            }\n            const name = ve.name + \":\", value = Math.round(v || 0);\n            $(elt).find(\"input[type=checkbox]\").each(function () {\n                if (this.name.startsWith(name)) {\n                    const i = +this.name.substring(name.length);\n                    this.checked = i < value;\n                    this.indeterminate = !!opts.mixed;\n                }\n            });\n        },\n        justify: \"left\"\n    };\n}\n\nGradeClass.add(\"checkboxes\", make_multicheckbox(\"✓\"));\nGradeClass.add(\"stars\", make_multicheckbox(\"⭐\"));\n\nhandle_ui.on(\"js-multicheckbox-grade\", function () {\n    const colon = this.name.indexOf(\":\"),\n        name = this.name.substring(0, colon),\n        num = this.name.substring(colon + 1),\n        elt = this.closest(\"form\").elements[name],\n        v = this.checked ? (+num + 1) + \"\" : num;\n    if (elt.value !== v) {\n        elt.value = v;\n        $(elt).trigger(\"change\");\n    }\n});\n","// gc-markdown.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { GradeClass } from \"./gc.js\";\nimport { render_onto } from \"./render.js\";\nimport { hasClass, addClass, removeClass, handle_ui } from \"./ui.js\";\nimport { Filediff } from \"./diff.js\";\nimport { Note } from \"./note.js\";\n\n\nfunction add_note_at(fd, lineid, note) {\n    fd.line(lineid).then(line => {\n        note.source = line.element;\n        note.render(false);\n    });\n}\n\nGradeClass.add(\"markdown\", {\n    text: function (v) {\n        return v == null ? \"\" : \"\" + v;\n    },\n    mount_show: function (elt, id) {\n        elt.id = id;\n        addClass(elt, \"pa-textv\");\n        addClass(elt, \"pa-gradevalue\");\n    },\n    mount_edit: function (elt, id) {\n        addClass(elt, \"pa-textv\");\n        const descspan = document.createElement(\"span\");\n        descspan.append(\"Markdown styling and LaTeX math supported · \");\n        const desclink = document.createElement(\"a\");\n        desclink.href = \"\";\n        desclink.className = \"ui js-toggle-gc-markdown-preview\";\n        desclink.tabIndex = -1;\n        desclink.append(\"Preview\");\n        const descp = document.createElement(\"p\");\n        descp.className = \"pa-preview-notice\";\n        descp.append(descspan, desclink);\n        const ta = document.createElement(\"textarea\");\n        ta.className = \"uich uii pa-gradevalue need-autogrow pa-fresh\";\n        ta.name = this.key;\n        ta.id = id;\n        ta.disabled = this.disabled;\n        const df = new DocumentFragment;\n        df.append(descp, ta);\n        return df;\n    },\n    update_show: function (ve, v, opts) {\n        if (v == null || v === \"\") {\n            ve.replaceChildren();\n        } else if (this.answer) {\n            const gi = opts.gradesheet;\n            addClass(ve, \"bg-none\");\n            addClass(ve, \"align-self-start\");\n            const div = document.createElement(\"div\");\n            div.className = \"pa-filediff pa-dg pa-hide-left pa-hide-landmarks uim\" + (gi.scores_editable ? \" pa-editablenotes live\" : \"\") + (gi.scores_visible ? \"\" : \" pa-scores-hidden\");\n            let fileid = \"/g/\" + this.key;\n            div.id = gi.file_anchor(fileid);\n            let pos1 = 0, lineno = 1;\n            while (pos1 !== v.length) {\n                let pos2 = v.indexOf(\"\\n\", pos1);\n                pos2 = pos2 < 0 ? v.length : pos2 + 1;\n                const line = document.createElement(\"div\"),\n                    da = document.createElement(\"div\"),\n                    db = document.createElement(\"div\"),\n                    dd = document.createElement(\"div\");\n                line.className = \"pa-dl pa-gi\";\n                da.className = \"pa-da hidden\";\n                db.className = \"pa-db hidden\";\n                db.setAttribute(\"data-landmark\", lineno);\n                dd.className = \"pa-dd pa-dhlm\";\n                dd.textContent = v.substring(pos1, pos2);\n                line.appendChild(da);\n                line.appendChild(db);\n                line.appendChild(dd);\n                div.appendChild(line);\n                ++lineno;\n                pos1 = pos2;\n            }\n            ve.replaceChildren(div);\n            const fd = new Filediff(div);\n            if (hasClass(ve.parentElement, \"pa-markdown\")) {\n                fd.markdown();\n            }\n            let ln;\n            if (gi.linenotes\n                && (ln = gi.linenotes[fileid])) {\n                for (let lineid in ln) {\n                    add_note_at(fd, lineid, Note.parse(ln[lineid]));\n                }\n            }\n        } else if (hasClass(ve.parentElement, \"pa-markdown\")) {\n            render_onto(ve, 1, v);\n        } else {\n            render_onto(ve, 0, v);\n        }\n        return ve.firstChild === null;\n    },\n    justify: \"left\",\n    sort: \"forward\",\n    type_tabular: false\n});\n\nhandle_ui.on(\"js-toggle-gc-markdown-preview\", function () {\n    const pd = this.closest(\".pa-pv\"),\n        ta = pd.querySelector(\"textarea\");\n    if (hasClass(ta, \"hidden\")) {\n        ta.parentElement.removeChild(ta.previousSibling);\n        removeClass(ta, \"hidden\");\n        ta.focus();\n        this.textContent = \"Preview\";\n        removeClass(this.previousSibling, \"hidden\");\n    } else {\n        const div = document.createElement(\"div\"),\n            hr1 = document.createElement(\"hr\"),\n            hr2 = document.createElement(\"hr\"),\n            inner = document.createElement(\"div\");\n        div.className = \"pa-preview\";\n        hr1.className = hr2.className = \"pa-preview-border\";\n        inner.className = \"pa-dr\";\n        div.append(hr1, inner, hr2);\n        ta.parentElement.insertBefore(div, ta);\n        addClass(ta, \"hidden\");\n        render_onto(inner, 1, ta.value);\n        this.textContent = \"Edit\";\n        addClass(this.previousSibling, \"hidden\");\n    }\n});\n","// gc-select.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { GradeClass } from \"./gc.js\";\nimport { input_set_default_value } from \"./ui.js\";\n\n\nGradeClass.add(\"select\", {\n    mount_edit: function (elt, id) {\n        const sel = document.createElement(\"select\");\n        sel.className = \"uich pa-gradevalue pa-fresh\";\n        sel.name = this.key;\n        sel.id = id;\n        sel.disabled = this.disabled;\n        const none = document.createElement(\"option\");\n        none.value = \"\";\n        none.append(\"None\");\n        sel.append(none);\n        for (let i = 0; i !== this.options.length; ++i) {\n            const opt = document.createElement(\"option\");\n            opt.value = this.options[i];\n            opt.append(this.options[i]);\n            sel.append(opt);\n        }\n        const sp = document.createElement(\"span\");\n        sp.className = \"select\";\n        sp.append(sel);\n        return sp;\n    },\n    update_edit: function (elt, v, opts) {\n        const gt = this.simple_text(v),\n            ve = elt.firstChild.firstChild;\n        input_set_default_value(ve, gt);\n        ve.value = gt;\n        if (opts.reset && opts.mixed) {\n            if (ve.options[0].value !== \"\") {\n                const opt = document.createElement(\"option\");\n                opt.value = \"\";\n                opt.append(\"Mixed\");\n                ve.insertBefore(opt, ve.firstChild);\n            }\n            ve.selectedIndex = 0;\n        } else if (gt !== \"\") {\n            ve.remove(0);\n        }\n    },\n    configure_column: function (col) {\n        col = GradeClass.basic_configure_column.call(this, col);\n        col.className += \" gt-el\";\n        return col;\n    },\n    tcell_width: function (col) {\n        let w = 0;\n        for (let opt of this.options) {\n            w = Math.max(w, opt.length);\n        }\n        return Math.max(GradeClass.basic_tcell_width.call(this, col),\n                        Math.floor(Math.min(w, 10) * 1.25) / 2);\n    },\n    justify: \"left\",\n    sort: \"forward\"\n});\n","// gc-timermark.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { GradeClass } from \"./gc.js\";\nimport { handle_ui, addClass, removeClass, toggleClass } from \"./ui.js\";\nimport { sprintf, strftime, sec2text } from \"./utils.js\";\n\n\nconst timefmt = \"%Y-%m-%d %H:%M\";\n\nfunction timeout_value(ge, gi) {\n    let toge, tov;\n    if (ge.timeout_entry\n        && gi\n        && (toge = gi.entries[ge.timeout_entry])\n        && (tov = toge.value_in(gi)) != null) {\n        return tov;\n    } else {\n        return ge.timeout;\n    }\n}\n\nfunction remove_tmto(ge, tm, makesticky) {\n    if (tm && tm.pa__tmto) {\n        clearTimeout(tm.pa__tmto);\n        delete tm.pa__tmto;\n    }\n    if (tm && tm.pa__tmsticky && !makesticky) {\n        tm.pa__tmsticky.parentElement.remove();\n        delete tm.pa__tmsticky;\n    } else if (tm && !tm.pa__tmsticky && makesticky) {\n        const gsection = tm.closest(\".pa-gsection\");\n        if (gsection) {\n            const e = document.createElement(\"div\"),\n                tms = document.createElement(\"div\");\n            e.className = \"pa-gnote pa-timermark-sticky\";\n            e.setAttribute(\"data-pa-grade\", ge.key);\n            tms.className = \"pa-timermark-alert\";\n            e.appendChild(tms);\n            gsection.parentElement.insertBefore(e, gsection);\n            tm.pa__tmsticky = tms;\n        }\n    }\n}\n\nGradeClass.add(\"timermark\", {\n    text: function (v) {\n        if (v == null || v === 0) {\n            return \"–\";\n        } else {\n            return strftime(timefmt, v);\n        }\n    },\n    simple_text: GradeClass.basic_text,\n    tcell: function (v) {\n        if (v == null || v === 0) {\n            return \"\";\n        } else {\n            return strftime(timefmt, v);\n        }\n    },\n    tcell_width: 10,\n    make_compare: function (col) {\n        const gidx = col.gidx;\n        return function (a, b) {\n            const ag = a.grades && a.grades[gidx],\n                bg = b.grades && b.grades[gidx];\n            if (ag === \"\" || ag == null || ag == 0 || bg === \"\" || bg == null || bg == 0) {\n                if (ag !== \"\" && ag != null && ag != 0) {\n                    return -1;\n                } else if (bg !== \"\" && bg != null && bg != 0) {\n                    return 1;\n                }\n            } else if (ag < bg) {\n                return -1;\n            } else if (ag > bg) {\n                return 1;\n            }\n            return a._sort_user.localeCompare(b._sort_user);\n        };\n    },\n    mount_show: function (elt, id) {\n        elt.id = id;\n        addClass(elt, \"pa-gradevalue\");\n    },\n    update_show: function (elt, v, opts) {\n        const gi = opts.gradesheet;\n        if (v == null || v === 0) {\n            elt.textContent = \"\";\n        } else {\n            let ch = [strftime(timefmt, v)];\n            if (gi && (gi.student_timestamp || 0) > v) {\n                const sts = strftime(timefmt, gi.student_timestamp),\n                    delta = gi.student_timestamp - v,\n                    timeout = timeout_value(this, gi);\n                if (timeout && delta > timeout + 120) {\n                    ch[0] = ch[0].concat(\" → \", sts, \" \");\n                    const strong = document.createElement(\"strong\");\n                    strong.className = \"overdue\";\n                    strong.textContent = \"(\" + sec2text(delta) + \" later)\";\n                    ch.push(strong);\n                } else {\n                    ch[0] = ch[0].concat(\" → \", sts, \" (\", sec2text(delta), \" later)\");\n                }\n            }\n            elt.replaceChildren(...ch);\n        }\n        return false;\n    },\n    mount_edit: function (elt) {\n        removeClass(elt, \"pa-gradevalue\");\n        const but = document.createElement(\"button\");\n        but.type = \"button\";\n        but.className = \"ui js-timermark hidden mr-2\";\n        but.name = this.key + \":b\";\n        but.value = 1;\n        but.disabled = this.disabled;\n        but.append(\"Press to start\");\n        const fr = new DocumentFragment;\n        fr.append(but);\n        if (siteinfo.user.is_pclike) {\n            const rbut = document.createElement(\"button\");\n            rbut.type = \"button\";\n            rbut.className = \"ui js-timermark hidden mr-2\";\n            rbut.name = this.key + \":r\";\n            rbut.value = 0;\n            rbut.disabled = this.disabled;\n            rbut.append(\"Reset\");\n            fr.append(rbut);\n        }\n        const sp = document.createElement(\"span\");\n        sp.className = \"pa-timermark-result hidden\";\n        const gv = document.createElement(\"input\");\n        gv.type = \"hidden\";\n        gv.className = \"uich pa-gradevalue pa-fresh\";\n        gv.name = this.key;\n        fr.append(sp, gv);\n        return fr;\n    },\n    unmount: function (elt) {\n        const tm = elt.querySelector(\".pa-timermark-result\");\n        remove_tmto(this, tm, false);\n        elt.remove();\n    },\n    update_edit: function (elt, v, opts) {\n        const gi = opts.gradesheet;\n        let timeout = timeout_value(this, gi);\n        elt.querySelectorAll(\".js-timermark\").forEach(function (e) {\n            e.classList.toggle(\"hidden\", !v !== (e.value === \"1\"));\n        });\n        const tm = elt.querySelector(\".pa-timermark-result\");\n        tm.classList.toggle(\"hidden\", !v && !timeout);\n        remove_tmto(this, tm, true);\n        let t = strftime(timefmt, v);\n        if (v\n            && timeout\n            && v + timeout + 600 > +document.body.getAttribute(\"data-now\")) {\n            const arg = {\n                deadline: v + timeout + +document.body.getAttribute(\"data-time-skew\"),\n                start_at_text: t,\n                timeout: timeout,\n                tmelt: tm,\n                stelt: tm.pa__tmsticky\n            };\n            timermark_interval(arg);\n        } else if (v) {\n            if (gi && (gi.student_timestamp || 0) > v) {\n                t = t.concat(\" (updated \", sec2text(gi.student_timestamp - v), \" later at \", strftime(timefmt, gi.student_timestamp), \")\");\n            }\n            tm.textContent = t;\n        } else if (timeout) {\n            tm.textContent = \"Time once started: \" + sec2text(timeout);\n        }\n    },\n    justify: \"left\",\n    sort: \"forward\"\n});\n\nhandle_ui.on(\"js-timermark\", function () {\n    const colon = this.name.indexOf(\":\"),\n        name = this.name.substring(0, colon),\n        elt = this.closest(\"form\").elements[name];\n    elt.value = this.value;\n    $(elt).trigger(\"change\");\n});\n\nfunction timermark_interval(arg) {\n    const now = new Date().getTime(),\n        dt = Math.round(arg.deadline - now / 1000);\n\n    const tmch = [arg.start_at_text];\n    if (dt > 630) {\n        tmch[0] = tmch[0].concat(\" (\", sec2text(Math.ceil(dt / 60) * 60), \" left)\");\n    } else if (dt > 300) {\n        tmch[0] = tmch[0].concat(\" (\", sec2text(dt), \" left)\");\n    } else if (dt >= -599) {\n        const e = document.createElement(\"strong\");\n        e.className = \"overdue\";\n        e.textContent = \"(\".concat(sec2text(Math.abs(dt)), dt < 0 ? \" over)\" : \" left)\");\n        tmch[0] += \" \";\n        tmch.push(e);\n    } else {\n        tmch[0] = tmch[0].concat(\" (\", sec2text(-Math.ceil(dt / 60) * 60), \" over)\");\n    }\n    arg.tmelt.replaceChildren(...tmch);\n\n    if (arg.stelt) {\n        let t;\n        if (dt > 630) {\n            t = sec2text(Math.ceil(dt / 60) * 60) + \" left\";\n        } else if (dt >= 0) {\n            t = sprintf(\"%d:%02d left\", Math.floor(dt / 60), dt % 60);\n        } else if (dt > -600) {\n            t = sprintf(\"%d:%02d over\", Math.floor(-dt / 60), -dt % 60);\n        } else {\n            t = sec2text(Math.floor(-dt / 60) * 60) + \" over\";\n        }\n        arg.stelt.replaceChildren(t);\n        toggleClass(arg.stelt, \"urgent\", dt <= 600 && dt > -900);\n    }\n\n    let nextdt;\n    if (dt > 660 || dt <= -600) {\n        nextdt = Math.floor((dt - 1) / 60) * 60;\n    } else if (dt > 630) {\n        nextdt = 630;\n    } else {\n        nextdt = Math.floor(dt - 0.1);\n    }\n\n    let alarmdelay = (arg.deadline - nextdt) * 1000 - 490 - now;\n    if (alarmdelay <= 0) {\n        alarmdelay += 1000;\n    }\n    arg.tmelt.pa__tmto = setTimeout(timermark_interval, alarmdelay, arg);\n}\n","// popup.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { escape_entities } from \"./encoders.js\";\nimport { addClass, hasClass, removeClass, HtmlCollector } from \"./ui.js\";\nimport { tooltip } from \"./tooltip.js\";\nimport { render_xmsg } from \"./render.js\";\n\n\n// popup dialogs\nexport function popup_skeleton(options) {\n    var hc = new HtmlCollector, $d = null;\n    options = options || {};\n    hc.push('<div class=\"modal\" role=\"dialog\"><div class=\"modal-dialog'\n        + (!options.anchor || options.anchor === window ? \" modal-dialog-centered\" : \"\")\n        + (options.style ? '\" style=\"' + escape_entities(options.style) : '')\n        + '\" role=\"document\"><div class=\"modal-content\"><form enctype=\"multipart/form-data\" accept-charset=\"UTF-8\"'\n        + (options.form_class ? ' class=\"' + options.form_class + '\"' : '')\n        + '>', '</form></div></div></div>');\n    hc.push_actions = function (actions) {\n        hc.push('<div class=\"popup-actions\">', '</div>');\n        if (actions)\n            hc.push(actions.join(\"\")).pop();\n        return hc;\n    };\n    function show_errors(data) {\n        var form = $d.find(\"form\")[0],\n            dbody = $d.find(\".popup-body\"),\n            m = render_xmsg(2, data.error);\n        $d.find(\".msg-error\").remove();\n        dbody.length ? dbody.prepend(m) : $d.find(\"h2\").after(m);\n        for (var f in data.errf || {}) {\n            var e = form[f];\n            if (e) {\n                var x = $(e).closest(\".entryi, .f-i\");\n                (x.length ? x : $(e)).addClass(\"has-error\");\n            }\n        }\n        return $d;\n    }\n    hc.show = function (visible) {\n        if (!$d) {\n            $d = $(hc.render()).appendTo(document.body);\n            $d.find(\".need-tooltip\").each(tooltip);\n            $d.on(\"click\", function (event) {\n                event.target === $d[0] && popup_close.call($d[0]);\n            });\n            $d.find(\"button[name=cancel]\").on(\"click\", popup_close);\n            if (options.action) {\n                if (options.action instanceof HTMLFormElement) {\n                    $d.find(\"form\").attr({action: options.action.action, method: options.action.method});\n                } else {\n                    $d.find(\"form\").attr({action: options.action, method: options.method || \"post\"});\n                }\n            }\n            for (var k in {minWidth: 1, maxWidth: 1, width: 1}) {\n                if (options[k] != null)\n                    $d.children().css(k, options[k]);\n            }\n            $d.show_errors = show_errors;\n            $d.close = function () {\n                popup_close.call($d[0]);\n            };\n        }\n        if (visible !== false) {\n            popup_near($d, options.anchor || window);\n            $d.find(\".need-autogrow\").autogrow();\n            $d.find(\".need-tooltip\").each(tooltip);\n        }\n        return $d;\n    };\n    return hc;\n}\n\nexport function popup_close() {\n    const d = this.closest(\".modal\");\n    tooltip.erase();\n    $(d).find(\"textarea, input\").unautogrow();\n    $(d).trigger(\"closedialog\");\n    $(d).remove();\n    removeClass(document.body, \"modal-open\");\n}\n\n// differences and focusing\nfunction focus_at(felt) {\n    felt.jquery && (felt = felt[0]);\n    felt.focus();\n    if (!felt.hotcrp_ever_focused) {\n        if (felt.select && hasClass(felt, \"want-select\")) {\n            felt.select();\n        } else if (felt.setSelectionRange) {\n            try {\n                felt.setSelectionRange(felt.value.length, felt.value.length);\n            } catch { // ignore errors\n            }\n        }\n        felt.hotcrp_ever_focused = true;\n    }\n}\n\nfunction popup_near(elt, anchor) {\n    tooltip.erase();\n    if (elt.jquery) {\n        elt = elt[0];\n    }\n    while (!hasClass(elt, \"modal-dialog\")) {\n        elt = elt.childNodes[0];\n    }\n    var bgelt = elt.parentNode;\n    addClass(bgelt, \"show\");\n    addClass(document.body, \"modal-open\");\n    if (!hasClass(elt, \"modal-dialog-centered\")) {\n        var anchorPos = $(anchor).geometry(),\n            wg = $(window).geometry(),\n            po = $(bgelt).offset(),\n            y = (anchorPos.top + anchorPos.bottom - elt.offsetHeight) / 2;\n        y = Math.max(wg.top + 5, Math.min(wg.bottom - 5 - elt.offsetHeight, y)) - po.top;\n        elt.style.top = y + \"px\";\n        var x = (anchorPos.right + anchorPos.left - elt.offsetWidth) / 2;\n        x = Math.max(wg.left + 5, Math.min(wg.right - 5 - elt.offsetWidth, x)) - po.left;\n        elt.style.left = x + \"px\";\n    }\n    queueMicrotask(function () {\n        for (const e of elt.querySelectorAll(\".want-focus\")) {\n            if (e.offsetWidth > 0) {\n                focus_at(e);\n                return;\n            }\n        }\n        for (const e of elt.querySelector(\"form\").elements) {\n            if (e.type !== \"hidden\"\n                && !hasClass(e, \"dangerous\")\n                && !hasClass(e, \"no-focus\")\n                && e.offsetWidth > 0) {\n                focus_at(e);\n                return;\n            }\n        }\n    });\n}\n","// ptable-grades.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { addClass, removeClass, toggleClass, $e, input_differs, handle_ui } from \"./ui.js\";\nimport { hoturl } from \"./hoturl.js\";\nimport { api_conditioner } from \"./xhr.js\";\nimport { escape_entities } from \"./encoders.js\";\nimport { popup_skeleton } from \"./popup.js\";\nimport { render_xmsg } from \"./render.js\";\nimport { GradeSheet } from \"./gradeentry.js\";\n\n\nfunction make_uid2tr(tr) {\n    const uid2tr = {};\n    while (tr) {\n        const uid = tr.getAttribute(\"data-pa-uid\");\n        uid && (uid2tr[tr.getAttribute(\"data-pa-uid\")] = tr);\n        tr = tr.nextSibling;\n    }\n    return uid2tr;\n}\n\nfunction grade_update(ptconf, uid2tr, rv, refreshflags) {\n    const tr = uid2tr[rv.uid], su = ptconf.uidmap[rv.uid],\n        oldgrades = [].concat(su.grades || []);\n    su.assign(rv);\n    let ngrades = 0;\n    for (let gv of su.grades || []) {\n        if (gv != null && gv !== \"\")\n            ++ngrades;\n    }\n    su.ngrades = ngrades;\n    for (let c of ptconf.col) {\n        if (((c.refreshable || 0) & refreshflags) !== 0)\n            c.td.call(c, tr.childNodes[c.index], su, {oldgrades: oldgrades});\n    }\n}\n\nfunction gdialog_gradelist_change() {\n    toggleClass(this.closest(\".pa-pv\"), \"pa-grade-changed\",\n                this.hasAttribute(\"data-pa-unmixed\") || input_differs(this));\n}\n\nfunction gdialog_section_click(event) {\n    if (event.type === \"click\" && !event.shiftKey) {\n        const checked = this.checked;\n        let l = this.closest(\"label\");\n        while ((l = l.nextSibling)) {\n            const ch = l.firstChild.firstChild;\n            if (ch.classList.contains(\"pa-gdialog-section\"))\n                break;\n            ch.checked = checked;\n        }\n    }\n}\n\nfunction $checkbox(attr, ...label) {\n    return $e(\"label\", \"checki\",\n        $e(\"span\", \"checkc\", $e(\"input\", attr)),\n        ...label);\n}\n\nfunction $save_action(name) {\n    return $e(\"div\", \"popup-actions\", $e(\"button\", {type: \"button\", \"class\": \"btn btn-primary\", name: name}, \"Save\"));\n}\n\n\nexport function ptable_gdialog(ptconf, checked_spos, table, hlgrade) {\n    let $gdialog, form, gdialog_su,\n        gradesheet = ptconf.gradesheet,\n        uid2tr = make_uid2tr(table.tBodies[0].firstChild);\n\n    function gdialog_store_start(rv) {\n        $gdialog.find(\".has-error\").removeClass(\"has-error\");\n        if (rv.ok) {\n            $gdialog.find(\".pa-messages\").html(\"\");\n        } else {\n            $gdialog.find(\".pa-messages\").html(render_xmsg(2, escape_entities(rv.error)));\n            if (rv.errf) {\n                $gdialog.find(\".pa-gradevalue\").each(function () {\n                    if (rv.errf[this.name])\n                        addClass(this, \"has-error\");\n                });\n            }\n        }\n    }\n\n    function gdialog_store(next) {\n        let any = false, byuid = {};\n        $gdialog.find(\".pa-gradevalue\").each(function () {\n            if ((this.hasAttribute(\"data-pa-unmixed\") || input_differs(this))\n                && !this.indeterminate) {\n                let k = this.name, ge = gradesheet.entries[k], v;\n                if (this.type === \"checkbox\") {\n                    v = this.checked ? this.value : \"\";\n                } else {\n                    v = $(this).val();\n                }\n                for (let su of gdialog_su) {\n                    byuid[su.uid] = byuid[su.uid] || {grades: {}, oldgrades: {}};\n                    byuid[su.uid].grades[k] = v;\n                    byuid[su.uid].oldgrades[k] = ge.value_in(su);\n                }\n                any = true;\n            }\n        });\n        next = next || function () { $gdialog.close(); };\n        if (!any) {\n            next();\n        } else if (gdialog_su.length === 1) {\n            api_conditioner(hoturl(\"=api/grade\", ptconf.url_gradeparts(gdialog_su[0])),\n                byuid[gdialog_su[0].uid])\n            .then(function (rv) {\n                gdialog_store_start(rv);\n                if (rv.ok) {\n                    grade_update(ptconf, uid2tr, rv, 1);\n                    next();\n                }\n            });\n        } else {\n            for (let su of gdialog_su) {\n                if (su.grade_commit) {\n                    byuid[su.uid].commit = su.grade_commit;\n                    byuid[su.uid].commit_is_grade = 1;\n                } else if (su.commit) {\n                    byuid[su.uid].commit = su.commit;\n                }\n            }\n            api_conditioner(hoturl(\"=api/multigrade\", {pset: ptconf.key}),\n                {us: JSON.stringify(byuid)})\n            .then(function (rv) {\n                gdialog_store_start(rv);\n                if (rv.ok) {\n                    for (let rvu of rv.us) {\n                        grade_update(ptconf, uid2tr, rvu, 1);\n                    }\n                    next();\n                }\n            });\n        }\n    }\n\n    function gdialog_clearauto() {\n        const byuid = {}, noauto = {};\n        for (const te of ptconf.gradesheet.value_entries()) {\n            noauto[te.key] = null;\n        }\n        for (let su of gdialog_su) {\n            const x = byuid[su.uid] = {};\n            if (su.grade_commit) {\n                x.commit = su.grade_commit;\n                x.commit_is_grade = 1;\n            } else if (su.commit) {\n                x.commit = su.commit;\n            }\n            x.autogrades = noauto;\n        }\n        api_conditioner(hoturl(\"=api/multigrade\", {pset: ptconf.key}),\n            {us: JSON.stringify(byuid)})\n        .then(function (rv) {\n            gdialog_store_start(rv);\n            if (rv.ok) {\n                for (let rvu of rv.us) {\n                    grade_update(ptconf, uid2tr, rvu, 1);\n                }\n                $gdialog.close();\n            }\n        });\n    }\n\n    function gdialog_traverse() {\n        const next_spos = this.getAttribute(\"data-pa-spos\");\n        gdialog_store(function () { gdialog_fill([next_spos]); });\n    }\n\n    function gdialog_fill_user(su1) {\n        let tr = table.tBodies[0].firstChild, tr1;\n        while (tr && tr.getAttribute(\"data-pa-spos\") != su1._spos) {\n            tr = tr.nextSibling;\n        }\n        for (tr1 = tr; tr1 && (tr1 === tr || !tr1.hasAttribute(\"data-pa-spos\")); ) {\n            tr1 = tr1.previousSibling;\n        }\n        $gdialog.find(\"button[name=prev]\").attr(\"data-pa-spos\", tr1 ? tr1.getAttribute(\"data-pa-spos\") : \"\").prop(\"disabled\", !tr1).removeClass(\"hidden\");\n        for (tr1 = tr; tr1 && (tr1 === tr || !tr1.hasAttribute(\"data-pa-spos\")); ) {\n            tr1 = tr1.nextSibling;\n        }\n        $gdialog.find(\"button[name=next]\").attr(\"data-pa-spos\", tr1 ? tr1.getAttribute(\"data-pa-spos\") : \"\").prop(\"disabled\", !tr1).removeClass(\"hidden\");\n    }\n    function gdialog_fill(spos) {\n        gdialog_su = [];\n        for (let i = 0; i !== spos.length; ++i) {\n            gdialog_su.push(ptconf.smap[spos[i]]);\n        }\n        ptconf.render_gdialog_users($gdialog.find(\"h3\")[0], gdialog_su);\n        if (gdialog_su.length === 1) {\n            gdialog_fill_user(gdialog_su[0]);\n        }\n\n        $gdialog.find(\".pa-grade\").each(function () {\n            let k = this.getAttribute(\"data-pa-grade\"),\n                ge = gradesheet.entries[k],\n                gidx = ge.value_order_in(gradesheet),\n                sv = gdialog_su[0].grades[gidx],\n                opts = {reset: true, mixed: false};\n            if (gdialog_su.length === 1) {\n                opts.gradesheet = gdialog_su[0];\n                opts.autograde = ge.autovalue_in(gdialog_su[0]);\n            } else {\n                for (let i = 1; i !== gdialog_su.length; ++i) {\n                    let suv = gdialog_su[i].grades[gidx];\n                    if (suv !== sv\n                        && !(suv == null && sv === \"\")\n                        && !(suv === \"\" && sv == null)) {\n                        sv = null;\n                        opts.mixed = true;\n                        break;\n                    }\n                }\n            }\n            ge.update_at(this, sv, opts);\n        });\n    }\n\n    function gdialog_key(event) {\n        let $b;\n        if (event.ctrlKey\n            && (event.key === \"n\" || event.key === \"p\")\n            && ($b = $gdialog.find(\"button[name=\" + (event.key === \"n\" ? \"next\" : \"prev\") + \"]\"))\n            && !$b[0].disabled) {\n            gdialog_traverse.call($b[0]);\n            event.stopImmediatePropagation();\n            event.preventDefault();\n        } else if (event.key === \"Return\" || event.key === \"Enter\") {\n            gdialog_store(null);\n            event.stopImmediatePropagation();\n            event.preventDefault();\n        } else if (event.key === \"Esc\" || event.key === \"Escape\") {\n            event.stopImmediatePropagation();\n            event.preventDefault();\n            $gdialog.close();\n        } else if (event.key === \"Backspace\"\n                   && this.hasAttribute(\"placeholder\")\n                   && this.closest(\".pa-gradelist\")) {\n            gdialog_gradelist_input.call(this);\n        }\n    }\n\n    function gdialog_gradelist_input() {\n        removeClass(this, \"has-error\");\n        if (this.hasAttribute(\"placeholder\")) {\n            this.setAttribute(\"data-pa-unmixed\", 1);\n            this.removeAttribute(\"placeholder\");\n            gdialog_gradelist_change.call(this);\n        }\n    }\n\n    function gdialog_mode_values() {\n        const gl = $gdialog.find(\".pa-gradelist\")[0];\n        if (!gl.firstChild) {\n            const gi = GradeSheet.closest(gl);\n            for (const ge of gi.value_entries()) {\n                if (!ge.readonly) {\n                    gl.appendChild(ge.render(gi, 1));\n                }\n            }\n        }\n        $gdialog.find(\".pa-gdialog-tab\").addClass(\"hidden\");\n        gl.classList.remove(\"hidden\");\n        removeClass(form.elements.bsubmit, \"hidden\");\n        removeClass(form.elements.clearauto, \"hidden\");\n    }\n    function gdialog_settings_submit() {\n        const gs = $gdialog.find(\".pa-gdialog-settings\")[0],\n            us = {};\n        for (let su of gdialog_su) {\n            us[su.uid] = {uid: su.uid};\n        }\n        if (this.name === \"save-gvis\") {\n            let gvisarg;\n            $(gs).find(\".pa-gvis\").each(function () {\n                if (this.checked && !this.indeterminate)\n                    gvisarg = JSON.parse(this.value);\n            });\n            for (let su of gdialog_su) {\n                us[su.uid].scores_visible = gvisarg;\n            }\n        } else if (this.name === \"save-grader\"\n                   && form.elements.gradertype.value === \"clear\") {\n            for (let su of gdialog_su) {\n                us[su.uid].gradercid = 0;\n            }\n        } else if (this.name === \"save-grader\"\n                   && form.elements.gradertype.value === \"previous\") {\n            for (let su of gdialog_su) {\n                us[su.uid].gradercid = \"previous\";\n            }\n        } else if (this.name === \"save-grader\") {\n            let gr = [], gri = [], grn = 0;\n            $(gs).find(\".pa-grader\").each(function () {\n                if (this.checked && !this.indeterminate) {\n                    gr.push(+this.name.substring(6));\n                    gri.push(1);\n                    ++grn;\n                }\n            });\n            if (grn) {\n                for (let su of gdialog_su) {\n                    let trigger = Math.floor(Math.random() * grn), gi = 0;\n                    while (trigger >= gri[gi]) {\n                        trigger -= Math.max(gri[gi], 0);\n                        ++gi;\n                    }\n                    us[su.uid].gradercid = gr[gi];\n                    grn -= Math.min(gri[gi], 1);\n                    --gri[gi];\n                    if (grn <= 0) {\n                        grn = 0;\n                        for (gi in gri) {\n                            ++gri[gi];\n                            grn += Math.max(gri[gi], 0);\n                        }\n                    }\n                }\n            }\n        } else if (this.name === \"save-repo\") {\n            const clearrepo = form.elements.clearrepo.checked,\n                adoptoldrepo = form.elements.adoptoldrepo.checked;\n            for (let su of gdialog_su) {\n                clearrepo && (us[su.uid].clearrepo = true);\n                adoptoldrepo && (us[su.uid].adoptoldrepo = true);\n            }\n        } else if (this.name === \"save-dropped\") {\n            const l = form.querySelectorAll(\".pa-dropped:checked\");\n            if (l.length !== 1) {\n                return;\n            }\n            for (let su of gdialog_su) {\n                us[su.uid].dropped = l[0].value === \"true\";\n            }\n        }\n        this.disabled = true;\n        const usc = [];\n        for (let su of gdialog_su) {\n            usc.push(us[su.uid]);\n        }\n        const progress = document.createElement(\"progress\");\n        progress.max = usc.length;\n        progress.className = \"float-right\";\n        this.after(progress);\n        let usci = 0;\n        function more() {\n            const byuid = usc.slice(usci, usci + 16);\n            usci += byuid.length;\n            api_conditioner(hoturl(\"=api/gradesettings\", {pset: ptconf.key}),\n                {us: JSON.stringify(byuid)},\n                {timeout: 20000})\n            .then(function (rv) {\n                gdialog_store_start(rv);\n                progress.value = usci;\n                if (rv.ok && rv.us) {\n                    for (let rvu of rv.us) {\n                        grade_update(ptconf, uid2tr, rvu, 3);\n                    }\n                }\n                if (rv.ok && usci < usc.length) {\n                    more();\n                } else {\n                    $gdialog.close();\n                }\n            })\n        }\n        more();\n    }\n    function gdialog_settings_gvis_click() {\n        const gs = $gdialog.find(\".pa-gdialog-settings\")[0];\n        $(gs).find(\".pa-gvis\").prop(\"checked\", false).prop(\"indeterminate\", false);\n        this.checked = true;\n    }\n    function gdialog_settings_dropped_click() {\n        const gs = $gdialog.find(\".pa-gdialog-settings\")[0];\n        $(gs).find(\".pa-dropped\").prop(\"checked\", false).prop(\"indeterminate\", false);\n        $(gs).find(\"button[name=save-dropped]\").prop(\"disabled\", false);\n        this.checked = true;\n    }\n    function gdialog_settings_grader_click() {\n        const gs = $gdialog.find(\".pa-gdialog-settings\")[0], self = this;\n        $(gs).find(\".pa-grader:indeterminate\").each(function () {\n            if (self !== this && this.indeterminate) {\n                this.checked = false;\n            }\n            this.indeterminate = false;\n        });\n        if (this.checked) {\n            gs.closest(\"form\").elements.gradertype.value = \"set\";\n        } else {\n            setTimeout(function () {\n                if ($(gs).find(\".pa-grader:checked\").length === 0)\n                    gs.closest(\"form\").elements.gradertype.value = \"clear\";\n            }, 0);\n        }\n    }\n    function gdialog_fill_settings(gs) {\n        const itype = gdialog_su.length === 1 ? \"radio\" : \"checkbox\";\n        gs.append($e(\"fieldset\", null,\n            $e(\"legend\", null, \"Grade visibility\"),\n            $e(\"div\", \"multicol-3\",\n                $checkbox({name: \"gvis\", value: \"true\", type: itype, \"class\": \"uic pa-gvis\"}, \"Visible\"),\n                $checkbox({name: \"gvis\", value: \"false\", type: itype, \"class\": \"uic pa-gvis\"}, \"Hidden\"),\n                $checkbox({name: \"gvis\", value: \"null\", type: itype, \"class\": \"uic pa-gvis\"}, \"Default (\" + (ptconf.scores_visible ? \"visible\" : \"hidden\") + \")\")),\n            $save_action(\"save-gvis\")));\n\n        const gradertable = $e(\"div\", \"checki mt-1 multicol-3\");\n        for (let i = 0; i !== siteinfo.pc.__order__.length; ++i) {\n            const cid = siteinfo.pc.__order__[i], pc = siteinfo.pc[cid];\n            gradertable.append($checkbox({name: \"grader\" + cid, value: \"1\", type: \"checkbox\", \"class\": \"uic js-range-click pa-grader\", \"data-range-type\": \"grader\"}, pc.name, $e(\"span\", \"ct small dim\")));\n        }\n        gs.append($e(\"fieldset\", \"mt-3\",\n            $e(\"legend\", null, \"Grader\"),\n            $checkbox({name: \"gradertype\", value: \"clear\", type: \"radio\", \"class\": \"uic\"}, \"Clear\"),\n            $checkbox({name: \"gradertype\", value: \"set\", type: \"radio\", \"class\": \"uic\"}, \"Set grader\"),\n            gradertable,\n            $save_action(\"save-grader\")));\n\n        if (!ptconf.gitless) {\n            gs.append($e(\"fieldset\", \"mt-3\",\n                $e(\"legend\", null, \"Repository\"),\n                $checkbox({name: \"clearrepo\", value: 1, type: \"checkbox\", \"class\": \"uic\"}, \"Clear repository\"),\n                ptconf.has_older_repo ? $checkbox({name: \"adoptoldrepo\", value: 1, type: \"checkbox\", \"class\": \"uic\"}, \"Adopt previous repository\") : null,\n                $save_action(\"save-repo\")));\n        }\n\n        if (siteinfo.user.is_admin) {\n            gs.append($e(\"fieldset\", \"mt-3\",\n                $e(\"legend\", null, \"Enrollment\"),\n                $e(\"div\", \"multicol-2\",\n                    $checkbox({name: \"dropped\", value: \"false\", type: itype, \"class\": \"uic pa-dropped\"}, \"Enrolled\"),\n                    $checkbox({name: \"dropped\", value: \"true\", type: itype, \"class\": \"uic pa-dropped\"}, \"Dropped\")),\n                $save_action(\"save-dropped\")));\n        }\n\n        $(gs).on(\"click\", \"button\", gdialog_settings_submit);\n        $(gs).on(\"click\", \".pa-grader\", gdialog_settings_grader_click);\n        $(gs).on(\"click\", \".pa-gvis\", gdialog_settings_gvis_click);\n        $(gs).on(\"click\", \".pa-dropped\", gdialog_settings_dropped_click);\n    }\n    function gdialog_mode_settings() {\n        const gs = $gdialog.find(\".pa-gdialog-settings\")[0], f = gs.closest(\"form\");\n        gs.firstChild || gdialog_fill_settings(gs);\n\n        const gvis = {}, ggr = {}, ggra = {}, gdropped = {};\n        for (let su of gdialog_su) {\n            if (!su.scores_visible_pinned) {\n                gvis[\"null\"] = (gvis[\"null\"] || 0) + 1;\n            } else if (su.scores_visible) {\n                gvis[\"true\"] = (gvis[\"true\"] || 0) + 1;\n            } else {\n                gvis[\"false\"] = (gvis[\"false\"] || 0) + 1;\n            }\n            const grcid = su.gradercid || 0;\n            ggr[grcid] = (ggr[grcid] || 0) + 1;\n            const dropped = su.dropped ? \"true\" : \"false\";\n            gdropped[dropped] = (gdropped[dropped] || 0) + 1;\n        }\n        for (let su of ptconf.smap) {\n            if (su) {\n                const grcid = su.gradercid || 0;\n                ggra[grcid] = (ggra[grcid] || 0) + 1;\n            }\n        }\n        $(gs).find(\"input\").prop(\"checked\", false).prop(\"indeterminate\", false);\n        for (let x in gvis) {\n            $(gs).find(\".pa-gvis[value=\" + x + \"]\").prop(\"checked\", !!gvis[x]).prop(\"indeterminate\", gvis[x] && gvis[x] !== gdialog_su.length);\n        }\n        $(gs).find(\"input[name=gradertype][value=\" + ((ggr[0] || 0) === gdialog_su.length ? \"clear\" : \"set\") + \"]\").prop(\"checked\", true);\n        for (let x in ggr) {\n            if (x != 0) {\n                const e = f.elements[\"grader\" + x];\n                e.checked = true;\n                e.indeterminate = ggr[x] !== gdialog_su.length;\n            }\n        }\n        $(gs).find(\".pa-grader\").each(function () {\n            const grcid = +this.name.substring(6),\n                ngr = ggr[grcid] || 0, ngra = ggra[grcid] || 0,\n                elt = this.closest(\".checki\").lastChild;\n            if (ngra && ngr === ngra) {\n                elt.textContent = \" (\".concat(ngra, \")\");\n            } else if (ngra) {\n                elt.textContent = \" (\".concat(ngr, \"/\", ngra, \")\");\n            } else {\n                elt.textContent = \"\";\n            }\n        });\n        for (let x in gdropped) {\n            $(gs).find(\".pa-dropped[value=\" + x + \"]\").prop(\"checked\", !!gdropped[x]).prop(\"indeterminate\", gdropped[x] && gdropped[x] !== gdialog_su.length);\n        }\n        if (gdropped[\"true\"] && gdropped[\"false\"]) {\n            $(gs).find(\"button[name=save-dropped]\").prop(\"disabled\", true);\n        }\n\n        $gdialog.find(\".pa-gdialog-tab\").addClass(\"hidden\");\n        gs.classList.remove(\"hidden\");\n        addClass(form.elements.bsubmit, \"hidden\");\n        addClass(form.elements.clearauto, \"hidden\");\n    }\n    function gdialog_mode() {\n        $gdialog.find(\".nav-pills button\").removeClass(\"btn-primary\");\n        if (this.name === \"mode-settings\") {\n            gdialog_mode_settings();\n        } else {\n            gdialog_mode_values();\n        }\n        this.classList.add(\"btn-primary\");\n    }\n\n    function show() {\n        const hc = popup_skeleton();\n        hc.push('<h2 class=\"pa-home-pset\">' + escape_entities(ptconf.title) + ' Grades</h2>');\n        hc.push('<h3 class=\"gdialog-userids hidden\"></h3>');\n        hc.push('<div class=\"pa-messages\"></div>');\n\n        hc.push('<div class=\"nav-pills\">', '</div>');\n        hc.push('<button type=\"button\" class=\"btn btn-primary no-focus is-mode\" name=\"mode-values\">Values</button>');\n        hc.push('<button type=\"button\" class=\"btn no-focus is-mode\" name=\"mode-settings\">Settings</button>');\n        hc.pop();\n\n        hc.push('<div class=\"pa-gdialog-tab pa-gradelist is-modal\"></div>');\n        hc.push('<div class=\"pa-gdialog-tab pa-gdialog-settings hidden\"></div>');\n\n        hc.push_actions();\n        hc.push('<button type=\"button\" name=\"bsubmit\" class=\"btn-primary\">Save</button>');\n        hc.push('<button type=\"button\" name=\"cancel\">Cancel</button>');\n        hc.push('<span class=\"btnbox btnl\"><button type=\"button\" name=\"prev\" class=\"btnl\">&lt;</button><button type=\"button\" name=\"next\" class=\"btnl\">&gt;</button></span>');\n        hc.push('<button type=\"button\" name=\"clearauto\" class=\"btnl\">Clear autogrades</button>');\n        $gdialog = hc.show(false);\n        $gdialog.children(\".modal-dialog\").addClass(\"modal-dialog-wide\");\n        form = $gdialog.find(\"form\")[0];\n        addClass(form, \"pa-psetinfo\");\n        form.pa__gradesheet = ptconf.gradesheet;\n        gdialog_mode_values();\n        $gdialog.on(\"click\", \".pa-gdialog-section\", gdialog_section_click);\n        $gdialog.on(\"change blur\", \".pa-gradevalue\", gdialog_gradelist_change);\n        $gdialog.on(\"input change\", \".pa-gradevalue\", gdialog_gradelist_input);\n        $gdialog.on(\"keydown\", gdialog_key);\n        $gdialog.on(\"keydown\", \"input, textarea, select\", gdialog_key);\n        //$gdialog.find(\".pa-gradelist\").on(\"input\", \"input, textarea, select\", gdialog_gradelist_input);\n        $gdialog.find(\"button[name=bsubmit]\").on(\"click\", function () { gdialog_store(null); });\n        $gdialog.find(\"button[name=clearauto]\").on(\"click\", gdialog_clearauto);\n        $gdialog.find(\"button[name=prev], button[name=next]\").on(\"click\", gdialog_traverse);\n        $gdialog.find(\"button.is-mode\").on(\"click\", gdialog_mode);\n        $gdialog.find(\"button[name=prev], button[name=next]\").prop(\"disabled\", true).addClass(\"hidden\");\n        gdialog_fill(checked_spos);\n        if (hlgrade && form.elements[hlgrade]) {\n            addClass(form.elements[hlgrade], \"want-focus\");\n            addClass(form.elements[hlgrade], \"want-select\");\n        }\n        hc.show();\n    }\n\n    show();\n}\n\nhandle_ui.on(\"js-gdialog\", function () {\n    const f = this.closest(\"form\"), ptconf = f.pa__ptconf,\n        sus = ptconf.users_in(f, ptconf.CHECKED_USERS);\n    if (sus.length === 0) {\n        alert(\"Select one or more students first\");\n    } else {\n        const spos = [];\n        for (const su of sus) {\n            spos.push(su._spos);\n        }\n        ptable_gdialog(ptconf, spos, f.querySelector(\"table.gtable\"));\n    }\n});\n","// ptable-diff.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hasClass, addClass, handle_ui, $e } from \"./ui.js\";\nimport { hoturl_get_go } from \"./hoturl.js\";\nimport { escape_entities } from \"./encoders.js\";\nimport { popup_skeleton } from \"./popup.js\";\n\n\nfunction gdialog_section_click(event) {\n    if (event.type === \"click\" && !event.shiftKey) {\n        const checked = this.checked;\n        let l = this.closest(\"label\");\n        while ((l = l.nextSibling)) {\n            const ch = l.firstChild.firstChild;\n            if (ch.classList.contains(\"pa-gdialog-section\"))\n                break;\n            ch.checked = checked;\n        }\n    }\n}\n\n\nfunction ptable_diffdialog(ptconf, sus) {\n    let $gdialog, gdform,\n        gradesheet = ptconf.gradesheet;\n\n    function sus_uids() {\n        const uids = [];\n        for (const su of sus) {\n            uids.push(su.uid);\n        }\n        return uids.join(\" \");\n    }\n\n    function do_diff() {\n        const v = gdform.elements.diff.value,\n            opt = {pset: ptconf.key, anonymous: ptconf.anonymous ? 1 : \"\", users: sus_uids()};\n        if (v === \"other\" && gdform.elements.otherdiff.value) {\n            opt.files = gdform.elements.otherdiff.value.trim();\n        } else if (v.startsWith(\"file:\") && v.length > 5) {\n            opt.file = v.substring(5);\n        } else if (v.startsWith(\"grade:\") && v.length > 6) {\n            const ge = gradesheet.entries[v.substring(6)];\n            if (ge.landmark_range_file) {\n                opt.file = ge.landmark_range_file;\n                opt.lines = ge.landmark_range_first + \"-\" + ge.landmark_range_last;\n            } else {\n                opt.grade = ge.key;\n            }\n        }\n        hoturl_get_go(\"diffmany\", opt);\n    }\n\n    function do_gradesheet() {\n        const $gsi = $gdialog.find(\".pa-gdialog-gradesheet input\"),\n            ge = [];\n        for (let i = 0; i !== $gsi.length; ++i) {\n            if ($gsi[i].checked)\n                ge.push(gradesheet.entries[$gsi[i].name]);\n        }\n        if (ge.length === 0) {\n            alert(\"No grades selected.\");\n        } else {\n            const opt = {pset: ptconf.key, anonymous: ptconf.anonymous ? 1 : \"\", users: sus_uids()};\n            if (ge.length === 1 && ge[0].landmark_range_file) {\n                opt.file = ge[0].landmark_range_file;\n                opt.lines = ge[0].landmark_range_first + \"-\" + ge[0].landmark_range_last;\n            }\n            opt.grade = ge[0].key;\n            for (let i = 1; i !== ge.length; ++i) {\n                opt.grade += \" \" + ge[i].key;\n            }\n            hoturl_get_go(\"diffmany\", opt);\n        }\n    }\n\n    function do_report() {\n        const report = gdform.elements.report.value || \"default\";\n        if (report === \"copyemails\") {\n            const us = [];\n            for (const su of sus) {\n                let name = \"\";\n                if (su.first != null && su.last != null) {\n                    name = su.first.concat(\" \", su.last);\n                } else if (su.first != null) {\n                    name = su.first;\n                } else if (su.last != null) {\n                    name = su.last;\n                }\n                if (name !== \"\" && /^[-A-Z a-z]*$/.test(name)) {\n                    us.push(name.concat(\" <\", su.email, \">\"));\n                } else if (name !== \"\") {\n                    name = name.replace(/\"/g, \"\\\\\\\"\");\n                    us.push(\"\\\"\".concat(name, \"\\\" <\", su.email, \">\"));\n                } else {\n                    us.push(su.email);\n                }\n            }\n            navigator.clipboard.writeText(us.join(\", \"));\n            $gdialog.close();\n        } else {\n            const opt = {\n                pset: ptconf.key,\n                anonymous: ptconf.anonymous ? 1 : \"\",\n                users: sus_uids(),\n                report: gdform.elements.report.value || \"default\"\n            };\n            hoturl_get_go(\"report\", opt);\n        }\n    }\n\n    function do_submit() {\n        if (hasClass(gdform.elements[\"mode-diff\"], \"btn-primary\")) {\n            do_diff();\n        } else if (hasClass(gdform.elements[\"mode-gradesheet\"], \"btn-primary\")) {\n            do_gradesheet();\n        } else {\n            do_report();\n        }\n    }\n\n    function do_key(event) {\n        if (event.key === \"Return\" || event.key === \"Enter\") {\n            do_submit(null);\n            event.stopImmediatePropagation();\n            event.preventDefault();\n        } else if (event.key === \"Esc\" || event.key === \"Escape\") {\n            event.stopImmediatePropagation();\n            event.preventDefault();\n            $gdialog.close();\n        }\n    }\n\n    function mode_diff() {\n        const dv = $gdialog.find(\".pa-gdialog-diff\")[0];\n        if (!dv.firstChild) {\n            const es = [];\n            es.push($e(\"label\", \"checki\", $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"diff\", value: \"all\", checked: true})), $e(\"strong\", null, \"Full diffs\")));\n            let sep = \" mt-2\";\n            for (const fd of ptconf.diff_files) {\n                es.push($e(\"label\", \"checki\" + sep, $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"diff\", value: \"file:\" + fd})), fd));\n                sep = \"\";\n            }\n            sep = \" mt-2\";\n            for (const gkey of gradesheet.order) {\n                const ge = gradesheet.entries[gkey];\n                if (ge.collate) {\n                    es.push($e(\"label\", \"checki\" + sep, $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"diff\", value: \"grade:\" + ge.key})), ge.title_node));\n                    sep = \"\";\n                }\n            }\n            if (!ptconf.gitless) {\n                const input = $e(\"input\", {type: \"text\", name: \"otherdiff\", size: \"30\", class: \"ml-2\"});\n                es.push($e(\"label\", \"checki mt-2\", $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"diff\", value: \"other\"})), \"Diffs in \", input));\n                input.addEventListener(\"input\", function () {\n                    this.closest(\"label\").querySelector(\"input[type=radio]\").click();\n                });\n            }\n            dv.replaceChildren(...es);\n        }\n        $gdialog.find(\".pa-gdialog-tab\").addClass(\"hidden\");\n        dv.classList.remove(\"hidden\");\n        gdform.elements.bsubmit.textContent = \"Show diffs\";\n    }\n    function mode_gradesheet() {\n        const gs = $gdialog.find(\".pa-gdialog-gradesheet\")[0];\n        if (!gs.firstChild) {\n            const es = [];\n            let in_section = false;\n            for (const gkey of gradesheet.order) {\n                const ge = gradesheet.entries[gkey],\n                    gcl = in_section && ge.type !== \"section\" ? \"checki ml-4\" : \"checki\",\n                    ccl = ge.type === \"section\" ? \" pa-gdialog-section\" : \"\";\n                es.push($e(\"label\", gcl, $e(\"span\", \"checkc\", $e(\"input\", {type: \"checkbox\", name: ge.key, class: \"uic js-rage-click\" + ccl, \"data-range-type\": \"mge\"})), ge.title_node));\n                in_section = in_section || ge.type === \"section\";\n            }\n            gs.replaceChildren(...es);\n        }\n        $gdialog.find(\".pa-gdialog-tab\").addClass(\"hidden\");\n        gs.classList.remove(\"hidden\");\n        gdform.elements.bsubmit.textContent = \"Edit gradesheet\";\n    }\n    function mode_report() {\n        const dv = $gdialog.find(\".pa-gdialog-report\")[0];\n        if (!dv.firstChild) {\n            const es = [];\n            es.push($e(\"label\", \"checki\", $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"report\", value: \"default\", checked: true})), \"Grades\"));\n            es.push($e(\"label\", \"checki\", $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"report\", value: \"nameemail\"})), \"Name and email\"));\n            if (!ptconf.gitless) {\n                es.push($e(\"label\", \"checki\", $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"report\", value: \"git\"})), \"Git information\"));\n                es.push($e(\"label\", \"checki\", $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"report\", value: \"githistory\"})), \"Git history\"));\n            }\n            for (const fd of ptconf.reports) {\n                es.push($e(\"label\", \"checki\", $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"report\", value: fd.key})), fd.title));\n            }\n            es.push($e(\"label\", \"checki\", $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"report\", value: \"copyemails\"})), \"Copy emails to clipboard\"));\n            dv.replaceChildren(...es);\n        }\n        $gdialog.find(\".pa-gdialog-tab\").addClass(\"hidden\");\n        dv.classList.remove(\"hidden\");\n        gdform.elements.bsubmit.textContent = \"Download\";\n    }\n    function do_mode() {\n        $gdialog.find(\".nav-pills button\").removeClass(\"btn-primary\");\n        if (this.name === \"mode-report\") {\n            mode_report();\n        } else if (this.name === \"mode-gradesheet\") {\n            mode_gradesheet();\n        } else {\n            mode_diff();\n        }\n        this.classList.add(\"btn-primary\");\n    }\n\n    function show() {\n        const hc = popup_skeleton();\n        hc.push('<h2 class=\"pa-home-pset\">' + escape_entities(ptconf.title) + ' Diffs</h2>');\n        hc.push('<h3 class=\"gdialog-userids hidden\"></h3>');\n        hc.push('<div class=\"pa-messages\"></div>');\n\n        hc.push('<div class=\"nav-pills\">', '</div>');\n        hc.push('<button type=\"button\" class=\"btn btn-primary no-focus is-mode\" name=\"mode-diff\">Diff</button>');\n        hc.push('<button type=\"button\" class=\"btn no-focus is-mode\" name=\"mode-gradesheet\">Gradesheet</button>');\n        hc.push('<button type=\"button\" class=\"btn no-focus is-mode\" name=\"mode-report\">Reports</button>');\n        hc.pop();\n\n        hc.push('<div class=\"pa-gdialog-tab pa-gdialog-diff is-modal\"></div>');\n        hc.push('<div class=\"pa-gdialog-tab pa-gdialog-gradesheet multicol-3 hidden\"></div>');\n        hc.push('<div class=\"pa-gdialog-tab pa-gdialog-report hidden\"></div>');\n\n        hc.push_actions();\n        hc.push('<button type=\"button\" name=\"bsubmit\" class=\"btn-primary\">Save</button>');\n        hc.push('<button type=\"button\" name=\"cancel\">Cancel</button>');\n        $gdialog = hc.show(false);\n        $gdialog.children(\".modal-dialog\").addClass(\"modal-dialog-wide\");\n        gdform = $gdialog.find(\"form\")[0];\n        addClass(gdform, \"pa-psetinfo\");\n        gdform.pa__gradesheet = ptconf.gradesheet;\n        mode_diff();\n        $gdialog.on(\"click\", \".pa-gdialog-section\", gdialog_section_click);\n        $gdialog.on(\"keydown\", do_key);\n        $gdialog.on(\"keydown\", \"input, textarea, select\", do_key);\n        $(gdform.elements.bsubmit).on(\"click\", do_submit);\n        $gdialog.find(\"button.is-mode\").on(\"click\", do_mode);\n        hc.show();\n    }\n\n    show();\n}\n\nhandle_ui.on(\"js-ptable-diff\", function () {\n    const f = this.closest(\"form\"), ptconf = f.pa__ptconf;\n    ptable_diffdialog(ptconf, ptconf.users_in(f, ptconf.SOME_USERS));\n});\n","// ptable-run.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { handle_ui } from \"./ui.js\";\nimport { hoturl_post_go } from \"./hoturl.js\";\nimport { escape_entities } from \"./encoders.js\";\nimport { popup_skeleton, popup_close } from \"./popup.js\";\n\n\nhandle_ui.on(\"js-ptable-run\", function () {\n    let f = this.closest(\"form\"),\n        ptconf = f.pa__ptconf, $gdialog, form, slist;\n\n    function submit() {\n        if (form.elements.runner.value) {\n            const run = form.elements.runner.value +\n                    (form.elements.ifneeded.checked ? \".ifneeded\" : \"\"),\n                skeys = [],\n                param = {pset: ptconf.key, run: run, runmany: 1},\n                data = {};\n            for (const su of slist) {\n                skeys.push(ptconf.ukey(su));\n            }\n            const users = skeys.join(\" \");\n            if (users.length <= 160) {\n                param.users = users;\n            } else {\n                data.users = users;\n            }\n            if (form.elements.selectcommits.checked) {\n                param.commitq = form.elements.commitq.value;\n            }\n            hoturl_post_go(\"=run\", param, data);\n        } else {\n            popup_close.call(form);\n        }\n    }\n\n    function gdialog() {\n        slist = ptconf.users_in(f, ptconf.SOME_USERS);\n\n        const hc = popup_skeleton();\n        hc.push('<h2 class=\"pa-home-pset\">' + escape_entities(ptconf.title) + ' Commands</h2>');\n        hc.push('<h3 class=\"gdialog-userids\"></h3>');\n        hc.push('<div class=\"pa-messages\"></div>');\n\n        hc.push('<div class=\"mt-1 multicol-2\">', '</div>');\n        for (let rn in ptconf.runners) {\n            hc.push('<label class=\"checki\"><span class=\"checkc\"><input type=\"radio\" name=\"runner\" value=\"' + rn + '\"></span>' + escape_entities(ptconf.runners[rn]) + '</label>');\n        }\n        hc.pop();\n\n        hc.push('<label class=\"checki mt-2\"><span class=\"checkc\"><input type=\"checkbox\" name=\"ifneeded\"></span>Use prerecorded runs when available</label>');\n\n        hc.push('<label class=\"checki mt-2 has-fold foldc\"><span class=\"checkc\"><input type=\"checkbox\" name=\"selectcommits\" class=\"uic js-foldup\" data-fold-target=\"#U\"></span>Select commits<span class=\"fx\">: <input type=\"text\" name=\"commitq\" placeholder=\"grading\" class=\"ml-1\"></span></label>');\n\n        hc.push_actions();\n        hc.push('<button type=\"button\" name=\"run\" class=\"btn-primary\">Run</button>');\n        hc.push('<button type=\"button\" name=\"cancel\">Cancel</button>');\n        $gdialog = hc.show(false);\n        ptconf.render_gdialog_users($gdialog.find(\"h3\")[0], slist);\n        form = $gdialog.find(\"form\")[0];\n        $(form.elements.run).on(\"click\", submit);\n        hc.show();\n    }\n\n    gdialog();\n});\n","// search.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { regexp_quote } from \"./encoders.js\";\n\nconst OP_UNARY = 0x1;\nconst OP_ALLOW_SUBTYPE = 0x2;\nconst OP_SUBTYPE = 0x4;\nconst OP_UNNAMED = 0x8;\nconst OP_NOT = 0x10;\nconst OP_AND = 0x20;\nconst OP_OR = 0x40;\nconst OP_XOR = 0x80;\n\nclass SearchOperator {\n    type;\n    precedence;\n    flags;\n    subtype;\n\n    constructor(type, precedence, flags, subtype) {\n        this.type = type;\n        this.precedence = precedence;\n        this.flags = flags;\n        this.subtype = subtype;\n    }\n\n    static get UNARY() { return OP_UNARY; }\n    static get ALLOW_SUBTYPE() { return OP_ALLOW_SUBTYPE; }\n    static get SUBTYPE() { return OP_SUBTYPE; }\n    static get UNNAMED() { return OP_UNNAMED; }\n    static get NOT() { return OP_NOT; }\n    static get AND() { return OP_AND; }\n    static get OR() { return OP_OR; }\n    static get XOR() { return OP_XOR; }\n\n    get unary() {\n        return (this.flags & OP_UNARY) !== 0;\n    }\n    get allow_subtype() {\n        return (this.flags & OP_SUBTYPE) !== 0;\n    }\n\n    make_subtype(subtype) {\n        return new SearchOperator(this.type, this.precedence, (this.flags & ~OP_ALLOW_SUBTYPE) | OP_SUBTYPE, subtype);\n    }\n}\n\nconst REGEXP_TERMINATOR = /[\\s()[\\]{}]/y;\n\nclass SearchOperatorSet {\n    #a;\n    #xregex;\n    static #simpleops;\n\n    constructor(a) {\n        this.#a = a != null ? a : {};\n        this.#xregex = null;\n    }\n\n    define(name, op) {\n        // XXX no backslashes allowed\n        // XXX name should be punctuation or contain no punctuation\n        this.#a[name] = op;\n        this.#xregex = null;\n    }\n\n    lookup(name) {\n        const op = this.#a[name];\n        if (op) {\n            return op;\n        }\n        const colon = name.indexOf(\":\");\n        if (colon < 0) {\n            return null;\n        }\n        const xop = this.#a[name.substring(0, colon)];\n        if (!xop || !xop.allow_subtype) {\n            return null;\n        }\n        const nop = xop.make_subtype(name.substring(colon + 1));\n        this.#a[name] = nop;\n        return nop;\n    }\n\n    get regex() {\n        if (this.#xregex !== null) {\n            return this.#xregex;\n        }\n        let ch = \"\";\n        const br = [], alnum = [];\n        for (const [name, op] of Object.entries(this.#a)) {\n            if ((op.flags & (OP_SUBTYPE | OP_UNNAMED)) !== 0) {\n                continue;\n            }\n            if (/^[-!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~]+$/.test(name)) {\n                if (name.length === 1) {\n                    ch += regexp_quote(name, true);\n                } else {\n                    br.push(regexp_quote(name));\n                }\n            } else {\n                let x = regexp_quote(name);\n                if (op.allow_subtype) {\n                    x += \"(?::\\\\w+)?\";\n                }\n                alnum.push(x);\n            }\n        }\n        if (ch !== \"\") {\n            br.push(\"[\" + ch + \"]\");\n        }\n        if (alnum.length !== 0) {\n            br.push(\"(?:\" + alnum.join(\"|\") + \")(?=[\\\\s\\\\(\\\\)\\\\[\\\\]\\\\{\\\\}]|$)\");\n        }\n        this.#xregex = new RegExp(br.join(\"|\"), \"y\");\n        return this.#xregex;\n    }\n\n    static safe_terminator(str, pos = 0) {\n        REGEXP_TERMINATOR.lastIndex = pos;\n        return REGEXP_TERMINATOR.test(str);\n    }\n\n    static get simple_operators() {\n        if (this.#simpleops != null) {\n            return this.#simpleops;\n        }\n        const notop = new SearchOperator(\"not\", 8, OP_UNARY | OP_NOT),\n            spaceop = new SearchOperator(\"space\", 7, OP_UNNAMED | OP_AND),\n            andop = new SearchOperator(\"and\", 6, OP_AND),\n            xorop = new SearchOperator(\"xor\", 5, OP_XOR),\n            orop = new SearchOperator(\"or\", 4, OP_OR);\n        this.#simpleops = new SearchOperatorSet({\n            \"(\": new SearchOperator(\"(\", 0, OP_UNARY | OP_AND),\n            \")\": new SearchOperator(\")\", 0, OP_UNARY),\n            NOT: notop,\n            \"-\": notop,\n            \"!\": notop,\n            SPACE: spaceop,\n            AND: andop,\n            \"&&\": andop,\n            XOR: xorop,\n            \"^^\": xorop,\n            OR: orop,\n            \"||\": orop\n        });\n        return this.#simpleops;\n    }\n\n    static simple_operator(name) {\n        return this.simple_operators.#a[name];\n    }\n}\n\nexport class SearchExpr {\n    kword;\n    text;\n    info;\n    kwpos1;\n    pos1;\n    pos2;\n    op;\n    child;\n    parent;\n\n    static make_simple(text, pos1, parent = null) {\n        const e = new SearchExpr;\n        e.text = text;\n        e.kwpos1 = e.pos1 = pos1;\n        e.pos2 = pos1 + text.length;\n        e.parent = parent;\n        return e;\n    }\n\n    static make_keyword(kword, text, kwpos1, pos1, pos2, parent = null) {\n        const e = new SearchExpr;\n        e.kword = kword === \"\" ? null : kword;\n        e.text = text;\n        e.kwpos1 = kwpos1;\n        e.pos1 = pos1;\n        e.pos2 = pos2;\n        e.parent = parent;\n        return e;\n    }\n\n    static make_op_start(op, pos1, pos2, reference) {\n        const e = new SearchExpr;\n        e.op = op;\n        if (op.unary) {\n            e.kwpos1 = e.pos1 = pos1;\n            e.pos2 = pos2;\n            e.child = [];\n            e.parent = reference;\n        } else {\n            e.kwpos1 = e.pos1 = reference.pos1;\n            e.pos2 = pos2;\n            e.child = [reference];\n            e.parent = reference.parent;\n        }\n        return e;\n    }\n\n    static combine(opname, ...child) {\n        const e = new SearchExpr;\n        e.op = SearchOperatorSet.simple_operator(opname);\n        e.child = child;\n        return e;\n    }\n\n    get is_complete() {\n        return !this.op || this.child.length > (this.op.unary ? 0 : 1);\n    }\n\n    get is_incomplete_paren() {\n        return this.op && this.op.type === \"(\" && this.child.length === 0;\n    }\n\n    complete(pos) {\n        if (!this.is_complete) {\n            this.pos2 = pos;\n            this.child.push(SearchExpr.make_simple(\"\", pos));\n        }\n        const p = this.parent;\n        if (!p) {\n            return this;\n        }\n        p.child.push(this);\n        p.pos2 = this.pos2;\n        return p;\n    }\n\n    complete_paren(pos1, pos2) {\n        let a = this,\n            first = a.op && a.op.type === \"(\" && a.child.length === 0;\n        while (!a.op || a.op.type !== \"(\" || first) {\n            a = a.complete(pos1);\n            first = false;\n        }\n        a.pos2 = pos2;\n        if (a.child.length === 0) {\n            a.child.push(SearchExpr.make_simple(\"\", pos2));\n        }\n        return a;\n    }\n\n    flattened_children() {\n        if (!this.op || this.op.unary) {\n            return this.child || [];\n        }\n        const a = [];\n        for (const ch of this.child) {\n            if (ch.op\n                && ch.op.type === this.op.type\n                && ch.op.subtype === this.op.subtype) {\n                Array.push.prototype.apply(a, ...ch.flattened_children());\n            } else {\n                a.push(ch);\n            }\n        }\n        return a;\n    }\n\n    unparse(str, indent = \"\") {\n        let ctx;\n        if (!this.op) {\n            ctx = this.kword ? `${this.kword}:${this.text}` : this.text;\n            if (ctx.length > 40) {\n                ctx = ctx.substring(0, 32) + \"...\";\n            }\n            return `${indent}@${this.kwpos1} ${ctx}`;\n        }\n        if (!str) {\n            ctx = \"\";\n        } else if (this.pos2 - this.kwpos1 > 40) {\n            ctx = str.substring(this.kwpos1, this.kwpos1 + 16) + \"...\" + str.substring(this.pos2 - 16, this.pos2);\n        } else {\n            ctx = str.substring(this.kwpos1, this.pos2);\n        }\n        if (ctx !== \"\") {\n            ctx = ` <<${ctx}>>`;\n        }\n        const ts = [`${indent}[[${this.op.type}]] @${this.kwpos1}${ctx}\\n`];\n        const nindent = indent + \"  \";\n        for (const ch of this.child) {\n            ts.push(ch.unparse(str, nindent));\n        }\n        return ts.join(\"\");\n    }\n\n    evaluate_simple(f) {\n        let ok;\n        if (!this.op) {\n            ok = f(this);\n        } else if ((this.op.flags & OP_AND) !== 0) {\n            ok = true;\n            for (const ch of this.child) {\n                ok = ok && ch.evaluate_simple(f);\n            }\n        } else if ((this.op.flags & OP_OR) !== 0) {\n            ok = false;\n            for (const ch of this.child) {\n                ok = ok || ch.evaluate_simple(f);\n            }\n        } else if ((this.op.flags & OP_XOR) !== 0) {\n            ok = false;\n            for (const ch of this.child) {\n                if (ch.evaluate_simple(f))\n                    ok = !ok;\n            }\n        } else if ((this.op.flags & OP_NOT) !== 0) {\n            ok = !this.child[0] || !this.child[0].evaluate_simple(f);\n        } else {\n            throw new Error(\"unknown operator\");\n        }\n        return ok;\n    }\n}\n\nconst REGEXP_STICKYSPACE = /\\s+/y;\nconst REGEXP_KEYWORD = /[_a-zA-Z0-9][-_.a-zA-Z0-9]*(?=:)/y;\n\nexport class SearchParser {\n    #str;\n    pos;\n    #len;\n    last_pos = 0;\n\n    constructor(str, pos1 = 0, pos2 = null) {\n        this.#str = str;\n        this.pos = pos1;\n        this.#len = pos2 != null ? pos2 : str.length;\n\n        // unlikely: passed a substring that ends mid-word; need to be careful\n        if (this.#len < str.length\n            && !SearchOperatorSet.safe_terminator(str, this.#len)\n            && (this.#len === 0 || !SearchOperatorSet.safe_terminator(str, this.#len - 1))) {\n            this.#str = str.substring(0, this.#len);\n        }\n\n        this.#set_span_and_pos(0);\n    }\n\n    empty() {\n        return this.pos >= this.#len;\n    }\n\n    rest() {\n        return this.#str.substring(this.pos, this.#len);\n    }\n\n    set_pos(pos) {\n        this.pos = this.last_pos = pos;\n        return this;\n    }\n\n    #set_span_and_pos(len) {\n        this.last_pos = this.pos = Math.min(this.pos + len, this.#len);\n        REGEXP_STICKYSPACE.lastIndex = this.pos;\n        if (REGEXP_STICKYSPACE.test(this.#str)) {\n            this.pos = Math.min(REGEXP_STICKYSPACE.lastIndex, this.#len);\n        }\n    }\n\n    shift_keyword() {\n        REGEXP_KEYWORD.lastIndex = this.pos;\n        if (!REGEXP_KEYWORD.test(this.#str)\n            || REGEXP_KEYWORD.lastIndex >= this.#len) {\n            return \"\";\n        }\n        const kw = this.#str.substring(this.pos, REGEXP_KEYWORD.lastIndex);\n        this.#set_span_and_pos(kw.length + 1);\n        return kw;\n    }\n\n    shift_past(str) {\n        // assert(substr_compare($this->str, $str, $this->pos, strlen($str)) === 0);\n        this.#set_span_and_pos(str.length);\n    }\n\n    skip_whitespace() {\n        this.#set_span_and_pos(0);\n        return this.pos < this.#len;\n    }\n\n    shift_balanced_parens(endchars = null, allow_empty = false) {\n        const pos0 = this.pos,\n            pos1 = SearchParser.span_balanced_parens(this.#str, pos0, endchars, allow_empty);\n        this.#set_span_and_pos(pos1 - pos0);\n        return this.#str.substring(pos0, this.last_pos);\n    }\n\n    match(re) {\n        re.lastIndex = this.pos;\n        return re.exec(this.#str);\n    }\n\n    test(re) {\n        re.lastIndex = this.pos;\n        return re.test(this.#str) ? re.lastIndex : -1;\n    }\n\n    starts_with(substr) {\n        const pos1 = this.pos + substr.length;\n        return pos1 <= this.#len\n            && this.#str.substring(this.pos, pos1) === substr;\n    }\n\n    #shift_operator(opset) {\n        const pos0 = this.pos, pos1 = this.test(opset.regex);\n        if (pos1 < 0 || pos1 > this.#len) {\n            return null;\n        }\n        this.#set_span_and_pos(pos1 - pos0);\n        return opset.lookup(this.#str.substring(pos0, pos1));\n    }\n\n    static span_balanced_parens(str, pos = 0, endchars = null, allow_empty = false) {\n        endchars = endchars != null ? endchars : \" \\n\\r\\t\\x0B\\x0C\";\n        let pstack = \"\",\n            plast = \"\",\n            quote = 0,\n            startpos = allow_empty ? -1 : pos,\n            len = str.length;\n        while (pos < len) {\n            let ch = str.charAt(pos);\n            // stop when done\n            if (plast === \"\"\n                && !quote\n                && endchars !== \"\"\n                && endchars.indexOf(ch) >= 0) {\n                break;\n            }\n            // translate “” -> \"\n            if (ch === \"“\" || ch === \"”\") {\n                ch = \"\\\"\";\n            }\n            if (quote) {\n                if (ch === \"\\\\\" && pos + 1 < len) {\n                    ++pos;\n                } else if (ch === \"\\\"\") {\n                    quote = 0;\n                }\n            } else if (ch === \"(\") {\n                pstack += plast;\n                plast = \")\";\n            } else if (ch === \"[\") {\n                pstack += plast;\n                plast = \"]\";\n            } else if (ch === \"{\") {\n                pstack += plast;\n                plast = \"}\";\n            } else if (ch === \")\" || ch === \"]\" || ch === \"}\") {\n                if (pos === startpos) {\n                    ++startpos;\n                } else {\n                    let pcleared;\n                    do {\n                        pcleared = plast;\n                        const pslen = pstack.length - 1;\n                        if (pslen >= 0) {\n                            plast = pstack.substring(pslen);\n                            pstack = pstack.substring(0, pslen);\n                        } else {\n                            plast = pstack = \"\";\n                        }\n                    } while (ch !== pcleared && pcleared !== \"\");\n                    if (pcleared === \"\") {\n                        break;\n                    }\n                }\n            } else if (ch === \"\\\"\") {\n                quote = 1;\n            }\n            ++pos;\n        }\n        return pos;\n    }\n\n    static split_balanced_parens(str) {\n        const w = [];\n        if (str !== \"\") {\n            const sp = new SearchParser(str);\n            while (sp.skip_whitespace()) {\n                w.push(sp.shift_balanced_parens());\n            }\n        }\n        return w;\n    }\n\n    parse_expression(opset = null, spaceop = \"SPACE\", max_ops = 2048) {\n        opset = opset != null ? opset : SearchOperatorSet.simple_operators;\n        let cure = null, parens = 0, nops = 0;\n        while (!this.empty()) {\n            let pos1 = this.pos,\n                op = this.#shift_operator(opset),\n                pos2 = this.last_pos;\n            if (!op && (!cure || !cure.is_complete)) {\n                const kwpos1 = this.pos,\n                    kw = this.shift_keyword();\n                pos1 = this.pos;\n                const text = this.shift_balanced_parens(null, true);\n                pos2 = this.last_pos;\n                cure = SearchExpr.make_keyword(kw, text, kwpos1, pos1, pos2, cure);\n                continue;\n            }\n\n            if (op && op.type === \")\") {\n                if (parens === 0) {\n                    continue;\n                }\n                cure = cure.complete_paren(pos1, pos2);\n                --parens;\n                continue;\n            }\n\n            if (!op || (op && op.unary && cure && cure.is_complete)) {\n                op = opset.lookup(parens > 0 ? \"SPACE\" : spaceop);\n                this.set_pos(pos1);\n                pos2 = pos1;\n            }\n\n            if (!op.unary) {\n                if (!cure || cure.is_incomplete_paren) {\n                    cure = SearchExpr.make_simple(\"\", pos1, cure);\n                }\n                while (cure.parent && cure.parent.op.precedence >= op.precedence) {\n                    cure = cure.complete(pos1);\n                }\n            }\n\n            if (nops >= max_ops) {\n                return null;\n            }\n\n            cure = SearchExpr.make_op_start(op, pos1, pos2, cure);\n            if (op.type === \"(\") {\n                ++parens;\n            }\n            ++nops;\n        }\n        if (cure) {\n            let nexte;\n            while ((nexte = cure.complete(this.last_pos)) !== cure) {\n                cure = nexte;\n            }\n        }\n        return cure;\n    }\n}\n","// ptable.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hasClass, addClass, removeClass, toggleClass,\n         handle_ui } from \"./ui.js\";\nimport { wstorage, sprintf, strftime } from \"./utils.js\";\nimport { hoturl } from \"./hoturl.js\";\nimport { escape_entities, regexp_quote } from \"./encoders.js\";\nimport { GradeSheet } from \"./gradeentry.js\";\nimport { popup_skeleton } from \"./popup.js\";\nimport { tooltip } from \"./tooltip.js\";\nimport { ptable_gdialog } from \"./ptable-grades.js\";\nimport { SearchParser } from \"./search.js\";\n\n\nfunction render_name(s, last_first) {\n    if (s.first != null && s.last != null) {\n        if (last_first) {\n            return s.last.concat(\", \", s.first);\n        } else {\n            return s.first.concat(\" \", s.last);\n        }\n    } else if (s.first != null) {\n        return s.first;\n    } else if (s.last != null) {\n        return s.last;\n    } else {\n        return \"\";\n    }\n}\n\nfunction grader_name(p) {\n    if (!p.__nickname) {\n        if (p.nick)\n            p.__nickname = p.nick;\n        else if (p.nicklen || p.lastpos)\n            p.__nickname = p.name.substr(0, p.nicklen || p.lastpos - 1);\n        else\n            p.__nickname = p.name;\n    }\n    return p.__nickname;\n}\n\nfunction render_year(yr, html) {\n    if (!yr) {\n        return \"\";\n    } else if (typeof yr === \"number\") {\n        if (yr >= 1 && yr <= 20 && Math.floor(yr) === yr) {\n            return String.fromCharCode(9311 + yr);\n        } else {\n            return yr.toString();\n        }\n    } else if (yr.length === 1 && yr >= \"A\" && yr <= \"Z\") {\n        return String.fromCharCode(9333 + yr.charCodeAt(0));\n    } else {\n        return html ? escape_entities(yr) : yr;\n    }\n}\n\nfunction user_compare(a, b) {\n    return a._sort_user.localeCompare(b._sort_user);\n}\n\nfunction grader_compare(a, b) {\n    const ap = a.gradercid ? siteinfo.pc[a.gradercid] : null,\n        bp = b.gradercid ? siteinfo.pc[b.gradercid] : null,\n        ag = (ap && grader_name(ap)) || \"~~~\",\n        bg = (bp && grader_name(bp)) || \"~~~\";\n    if (ag != bg) {\n        return ag < bg ? -1 : 1;\n    } else {\n        return 0;\n    }\n}\n\n\nfunction strong(t) {\n    const stre = document.createElement(\"strong\");\n    stre.className = \"err\";\n    stre.append(t);\n    return stre;\n}\n\nfunction user_hover(evt) {\n    if (evt.target.tagName === \"A\" && evt.target.classList.contains(\"pa-user\")) {\n        if (evt.type === \"mouseenter\") {\n            tooltip.enter(evt.target, \"pa-ptable-user\");\n        } else {\n            tooltip.leave(evt.target);\n        }\n    }\n}\n\n\nconst ALL_USERS = 0;\nconst CHECKED_USERS = 1;\nconst SOME_USERS = 2;\n\nclass PtableConf {\n    constructor(pconf, data) {\n        this.id = pconf.id;\n        this.key = pconf.key;\n        this.title = pconf.title;\n        this.gitless = !!pconf.gitless;\n        this.gitless_grades = !!pconf.gitless_grades;\n        this.has_older_repo = !!pconf.has_older_repo;\n        this.disabled = !!pconf.disabled;\n        this.visible = !!pconf.visible;\n        this.scores_visible = !!pconf.scores_visible;\n        this.frozen = !!pconf.frozen;\n        this.anonymous = this.original_anonymous = !!pconf.anonymous;\n        this.has_nonanonymous = !this.anonymous || pconf.has_nonanonymous;\n        this.overridable_anonymous = this.anonymous && pconf.overridable_anonymous;\n        this.flagged_commits = pconf.flagged_commits;\n        this.sort = {\n            f: this.flagged_commits ? \"at\" : \"name\", last: false, rev: 1,\n            u: \"name\"\n        };\n        this.no_sort = pconf.no_sort;\n        this.checkbox = !!pconf.checkbox;\n        this.grades = pconf.grades;\n        this.need_total = !!pconf.need_total;\n        this.total_key = pconf.total_key;\n        this.runners = pconf.runners || [];\n        this.diff_files = pconf.diff_files || [];\n        this.reports = pconf.reports || [];\n        this.requested_columns = pconf.col || null;\n\n        this.col = [];\n        this.pincol = [];\n        this.colmap = {};\n\n        this.data = data;\n\n        this.mode = 0;\n        this.smap = [null];\n        this.uidmap = [];\n\n        this.input_timeout = null;\n    }\n\n    set_gradesheet(gi) {\n        this.gradesheet = gi;\n        this.in_total_indexes = [];\n        this.answer_indexes = [];\n        for (let i = 0; i !== gi.value_order.length; ++i) {\n            const ge = gi.entries[gi.value_order[i]];\n            if (ge.answer) {\n                this.answer_indexes.push(i);\n            } else if (ge.in_total && ge.key !== this.total_key) {\n                this.in_total_indexes.push(i);\n            }\n        }\n    }\n\n    add_column(c) {\n        c.index = this.col.length;\n        this.col.push(c);\n        this.colmap[c.name] = this.colmap[c.name] || c;\n        if (c.pin) {\n            c.pin_index = this.pincol.length;\n            this.pincol.push(c);\n        }\n    }\n\n    get columns() {\n        return this.col;\n    }\n\n    get pinned_columns() {\n        return this.pincol;\n    }\n\n    columns_in(table) {\n        return table.classList.contains(\"gtable-left-pin\") ? this.pincol : this.col;\n    }\n\n    column_index_in(key, table) {\n        const c = this.colmap[key];\n        if (!c) {\n            return -1;\n        }\n        const k = table.classList.contains(\"gtable-left-pin\") ? \"pin_index\" : \"index\";\n        return c[k] != null ? c[k] : -1;\n    }\n\n    ukey(s) {\n        return (this.anonymous && s.anon_user) || s.user || \"\";\n    }\n\n    url_gradeparts(s) {\n        const args = {\n            u: this.ukey(s),\n            pset: s.pset || this.key\n        };\n        if (s.commit && (!s.is_grade || this.flagged_commits)) {\n            args.commit = s.commit;\n        } else if (s.grade_commit) {\n            args.commit = s.grade_commit;\n            args.commit_is_grade = 1;\n        }\n        return args;\n    }\n\n    href(s) {\n        return hoturl(\"pset\", this.url_gradeparts(s));\n    }\n\n    make_student_ae(s) {\n        const ae = document.createElement(\"a\");\n        ae.href = hoturl(\"index\", {u: this.ukey(s)});\n        ae.className = \"track\";\n        return ae;\n    }\n\n    make_pset_ae(s) {\n        const ae = document.createElement(\"a\");\n        ae.href = this.href(s);\n        ae.className = \"pa-user track\" + (s.dropped ? \" gt-dropped\" : \"\");\n        return ae;\n    }\n\n    render_username_td(tde, s) {\n        const ae = this.make_pset_ae(s);\n        if (this.anonymous && s.anon_user) {\n            ae.append(s.anon_user);\n        } else if (this.sort.email && s.email) {\n            ae.append(s.email);\n        } else if (s.user) {\n            ae.append(s.user);\n        }\n        tde.replaceChildren(ae);\n    }\n\n    render_user_td(tde, s) {\n        const ae = this.make_pset_ae(s), sort = this.sort;\n        if (this.anonymous && s.anon_user) {\n            ae.append(s.anon_user);\n        } else if (sort.u === \"email\" && s.email) {\n            ae.append(s.email);\n        } else if (sort.u === \"name\") {\n            ae.append(render_name(s, sort.last) || s.email);\n        } else {\n            ae.append(s.user);\n        }\n        tde.replaceChildren(ae);\n    }\n\n    render_display_name(tde, s, is2) {\n        const t = is2 && this.anonymous\n            ? s.anon_user || \"?\"\n            : render_name(s, this.sort.last) || s.email;\n        if (is2) {\n            const ae = this.make_pset_ae(s);\n            ae.textContent = t;\n            tde.replaceChildren(ae);\n        } else {\n            tde.replaceChildren(t);\n        }\n    }\n\n    render_tooltip_name(s) {\n        if (!s) {\n            return \"???\";\n        } else if (this.anonymous && s.anon_user) {\n            return s.anon_user;\n        } else if (this.sort.u === \"email\" && s.email) {\n            return s.email;\n        } else if (this.sort.u === \"name\") {\n            return render_name(s, false) || s.email;\n        } else {\n            return s.user;\n        }\n    }\n\n    render_checkbox_name(s) {\n        let u = this.anonymous ? s.anon_user || s.user : s.user;\n        return \"s:\" + encodeURIComponent(u).replace(/\\./g, \"%2E\");\n    }\n\n    render_table_row(su, mode) {\n        this.mode = mode;\n        const tre = document.createElement(\"tr\");\n        tre.className = \"gt\";\n        tre.setAttribute(\"data-pa-spos\", su._spos);\n        if (su.uid) {\n            tre.setAttribute(\"data-pa-uid\", su.uid);\n        }\n        if (mode & 2) {\n            tre.classList.add(\"kfade\");\n        }\n        if (mode & 1) {\n            tre.classList.add(\"gtrow-partner\");\n            tre.setAttribute(\"data-pa-partner\", 1);\n        }\n        const cols = mode & 2 ? this.pincol : this.col;\n        for (const c of cols) {\n            const tde = document.createElement(\"td\");\n            c.td.call(c, tde, su);\n            tre.appendChild(tde);\n        }\n        return tre;\n    }\n\n\n    render_gdialog_users(h3, slist) {\n        if (slist.length === this.data.length || slist.length === 0) {\n            addClass(h3, \"hidden\");\n        } else {\n            removeClass(h3, \"hidden\");\n            let i = 0, n = [], max = slist.length === 20 ? 20 : 19;\n            while (i < max && i < slist.length) {\n                n.push(this.render_tooltip_name(slist[i]));\n                ++i;\n            }\n            if (i < slist.length) {\n                n.push(\"(\".concat(slist.length - i, \" more)\"));\n            }\n            h3.replaceChildren(n.join(\", \"));\n        }\n    }\n\n    push(s) {\n        s._spos = this.smap.length;\n        this.smap.push(s);\n        if (s.uid > 0) {\n            if (s.uid >= this.uidmap.length) {\n                this.uidmap.length = s.uid + 1;\n            }\n            this.uidmap[s.uid] = s;\n        }\n    }\n\n    user_row_checkbox(tr) {\n        const overlay = hasClass(tr.parentElement.parentElement, \"gtable-left-pin\"),\n            cbidx = this.colmap.checkbox[overlay ? \"pin_index\" : \"index\"];\n        return cbidx != null ? tr.children[cbidx].firstChild : null;\n    }\n\n\n    get ALL_USERS() {\n        return ALL_USERS;\n    }\n\n    get CHECKED_USERS() {\n        return CHECKED_USERS;\n    }\n\n    get SOME_USERS() {\n        return SOME_USERS;\n    }\n\n    user_at(tr) {\n        const spos = tr.getAttribute(\"data-pa-spos\");\n        return spos ? this.smap[spos] : null;\n    }\n\n    users_in(form, users) {\n        const table = form.querySelector(\"table.gtable\"),\n            cbidx = this.colmap.checkbox.index,\n            sus = [], chsus = [];\n        for (let tr = table.tBodies[0].firstChild; tr; tr = tr.nextSibling) {\n            const spos = tr.getAttribute(\"data-pa-spos\"),\n                su = spos ? this.smap[spos] : null;\n            if (su) {\n                sus.push(su);\n                if (users && tr.children[cbidx].firstChild.checked)\n                    chsus.push(su);\n            }\n        }\n        if (users === SOME_USERS) {\n            return chsus.length > 0 ? chsus : sus;\n        } else if (users === CHECKED_USERS) {\n            return chsus;\n        } else {\n            return sus;\n        }\n    }\n}\n\n\nfunction ptable_head_click_change_sort(tgt) {\n    if (tgt.tagName === \"TH\"\n        ? !tgt.hasAttribute(\"data-pa-sort\")\n        : tgt.tagName !== \"BUTTON\" || !tgt.classList.contains(\"js-switch-anon\")) {\n        return null;\n    }\n\n    const ptconf = tgt.closest(\"form\").pa__ptconf,\n        sort = Object.assign({}, ptconf.sort);\n    if (tgt.tagName === \"BUTTON\") {\n        if (!ptconf.overridable_anonymous) {\n            return null;\n        }\n        if (sort.deblind) {\n            delete sort.deblind;\n        } else {\n            sort.deblind = (new Date).getTime() / 1000;\n        }\n        return sort;\n    }\n\n    const sf = tgt.getAttribute(\"data-pa-sort\");\n    if (sf !== sort.f) {\n        sort.f = sf;\n        const col = ptconf.colmap[sf];\n        sort.rev = col && col.sort_forward ? 1 : -1;\n        if (sf === \"name\") {\n            sort.u = \"name\";\n        } else if (sf === \"name2\") {\n            sort.u = ptconf.anonymous ? \"user\" : \"name\";\n        } else if (sf === \"email\") {\n            sort.u = \"email\";\n        } else if (sf === \"username\") {\n            if ((ptconf.anonymous && !ptconf.has_nonanonymous) || !sort.email) {\n                sort.u = \"user\";\n            } else {\n                sort.u = \"email\";\n            }\n        }\n    } else {\n        sort.rev = -sort.rev;\n        if (sort.rev === 1) {\n            if (sf === \"name\") {\n                sort.last = !sort.last;\n            } else if (ptconf.anonymous && !ptconf.has_nonanonymous) {\n                // skip\n            } else if (sf === \"name2\") {\n                sort.last = !sort.last;\n            } else if (sf === \"username\") {\n                if (sort.email) {\n                    sort.u = \"user\";\n                    delete sort.email;\n                } else {\n                    sort.u = \"email\";\n                    sort.email = true;\n                }\n            } else if (sf === \"user\") {\n                if (sort.u === \"name\") {\n                    sort.last = !sort.last;\n                    if (!sort.last) {\n                        sort.u = \"email\";\n                    }\n                } else if (sort.u === \"email\") {\n                    sort.u = \"user\";\n                } else {\n                    sort.u = \"name\";\n                }\n            }\n        }\n    }\n    return sort;\n}\n\nfunction ptable_head_click(evt) {\n    let tgt = evt.target;\n    while (tgt !== this\n           && tgt.tagName !== \"TH\"\n           && tgt.tagName !== \"BUTTON\"\n           && tgt.tagName !== \"A\") {\n        tgt = tgt.parentElement;\n    }\n    const sort = ptable_head_click_change_sort(tgt);\n    if (sort) {\n        tgt.closest(\"form\").dispatchEvent(new CustomEvent(\"sortchange\", {\n            bubbles: true, cancelable: true,\n            detail: {sort: sort}\n        }));\n    }\n}\n\nfunction ptable_body_click(evt) {\n    let tgt = evt.target;\n    while (tgt !== this && tgt.tagName !== \"TD\") {\n        tgt = tgt.parentElement;\n    }\n    if (tgt.tagName !== \"TD\") {\n        return;\n    }\n    let i = 0;\n    for (let td = tgt.parentElement.firstChild; td !== tgt; td = td.nextSibling) {\n        ++i;\n    }\n    const ptconf = tgt.closest(\"form\").pa__ptconf,\n        ge = ptconf.col[i].ge,\n        tr = tgt.closest(\"tr\");\n    if (ge\n        && !ge.readonly\n        && tr.hasAttribute(\"data-pa-spos\")\n        && !evt.shiftKey\n        && !evt.ctrlKey) {\n        ptable_gdialog(ptconf, [+tr.getAttribute(\"data-pa-spos\")], tgt.closest(\"table\"), ge.key);\n    }\n}\n\nfunction ptable_body_scroller(ctrh) {\n    return function () {\n        ctrh.scrollLeft = this.scrollLeft;\n        if (hasClass(ctrh.lastChild, \"gtable-left-pin\")) {\n            ctrh.lastChild.style.left = this.scrollLeft + \"px\";\n        }\n    };\n}\n\nfunction ptable_track_header(table) {\n    let ctr2;\n    if (!window.IntersectionObserver\n        || table.rows.length <= 10\n        || !(ctr2 = table.closest(\".gtable-container-2\"))) {\n        return null;\n    }\n    // find containers\n    const ctr1 = ctr2.parentElement, ctr0 = ctr1.parentElement;\n    // create pinned header table\n    const tctable = document.createElement(\"table\");\n    tctable.className = table.className;\n    tctable.classList.add(\"gtable-top-pin\");\n    tctable.classList.remove(\"gtable\");\n    tctable.style.width = table.style.width;\n    tctable.appendChild(table.tHead.cloneNode(true));\n    // hide table’s own header\n    const thead_bounds = table.tHead.getBoundingClientRect(),\n        ctr0_bounds = ctr0.getBoundingClientRect(),\n        ctr2_bounds = ctr2.getBoundingClientRect();\n    table.style.marginTop = (-thead_bounds.height - 0.5) + \"px\";\n    table.tHead.style.visibility = \"hidden\";\n    // create header container\n    if (!hasClass(ctr0.firstChild, \"gtable-container-headers\")) {\n        const ctrh = document.createElement(\"div\");\n        ctrh.className = \"gtable-container-headers\";\n        ctrh.style.marginLeft = (ctr2_bounds.left - ctr0_bounds.left) + \"px\";\n        ctrh.scrollLeft = ctr2.scrollLeft;\n        ctr0.prepend(ctrh);\n        ctr2.addEventListener(\"scroll\", ptable_body_scroller(ctrh), {passive: true});\n    }\n    // append to header container\n    const ctrh = ctr0.firstChild;\n    if (hasClass(tctable, \"gtable-left-pin\")) {\n        tctable.style.left = ctrh.scrollLeft + \"px\";\n    }\n    ctrh.append(tctable);\n    tctable.tHead.addEventListener(\"click\", ptable_head_click);\n    return tctable;\n}\n\nfunction ptable_decorate_name_th(the, ptconf) {\n    if (ptconf.overridable_anonymous) {\n        const b = document.createElement(\"button\");\n        b.type = \"button\";\n        b.className = \"q n js-switch-anon\";\n        b.append(\"[anon]\");\n        the.append(\" \", b);\n    } else if (ptconf.original_anonymous) {\n        const sp = document.createElement(\"span\");\n        sp.className = \"n\";\n        sp.append(\"[anon]\");\n        the.append(\" \", sp);\n    }\n}\n\nfunction ptable_thead(cols, ptconf, tfixed) {\n    const tr = document.createElement(\"tr\");\n    let rem, current_width = 0;\n    tr.className = \"gtable-headrow gt k0\";\n    for (const c of cols) {\n        const the = document.createElement(\"th\");\n        the.scope = \"col\";\n        if (c.compare || c.make_compare) {\n            the.className = \"plsortable\";\n            the.setAttribute(\"data-pa-sort\", c.name);\n        }\n        c.th.call(c, the);\n        if (tfixed) {\n            let w = c.tw;\n            if (typeof w !== \"number\") {\n                w = w.call(c);\n            }\n            if (rem == null) {\n                rem = parseFloat(window.getComputedStyle(document.documentElement).fontSize);\n            }\n            w *= rem;\n            if (c.left == null) {\n                c.left = current_width;\n            }\n            c.width = w;\n            the.style.width = w + \"px\";\n            current_width += w;\n        }\n        tr.appendChild(the);\n    }\n    const thead = document.createElement(\"thead\");\n    thead.append(tr);\n    return thead;\n}\n\nlet queue_update_microtask_scheduled = 0, queue_update_microtask_tds = [];\n\nfunction update_microtask() {\n    queue_update_microtask_scheduled = 0;\n    for (const td of queue_update_microtask_tds) {\n        removeClass(td, \"update\");\n    }\n    queue_update_microtask_tds = [];\n}\n\nfunction queue_update_microtask(td) {\n    if (++queue_update_microtask_scheduled === 1) {\n        setTimeout(update_microtask, 0);\n    }\n    queue_update_microtask_tds.push(td);\n}\n\n\nconst gcoldef = {\n    rownumber: {\n        th: function (the) {\n            the.classList.add(\"gt-rownumber\");\n        },\n        td: function (tde) {\n            tde.className = \"gt-rownumber\";\n        },\n        tw: function () {\n            return Math.ceil(Math.log10(Math.max(this.ptconf.data.length, 1))) * 0.75;\n        }\n    },\n\n    checkbox: {\n        th: function (the) {\n            the.classList.add(\"gt-checkbox\");\n            const e = document.createElement(\"input\");\n            e.type = \"checkbox\";\n            e.className = \"uic js-range-click is-range-group ignore-diff\";\n            e.ariaLabel = \"Select all\";\n            e.setAttribute(\"data-range-type\", \"s61\");\n            the.appendChild(e);\n        },\n        td: function (tde, s) {\n            if (this.ptconf.mode & 1) {\n                return;\n            }\n            tde.className = \"gt-checkbox\";\n            let cbe = document.createElement(\"input\");\n            cbe.type = \"checkbox\";\n            cbe.value = 1;\n            if (this.ptconf.mode & 2) {\n                cbe.className = \"uic js-range-click\";\n                cbe.setAttribute(\"data-range-type\", \"s61o\");\n            } else {\n                cbe.name = this.ptconf.render_checkbox_name(s);\n                cbe.className = this.className || \"uic js-range-click papsel\";\n                cbe.setAttribute(\"data-range-type\", \"s61\");\n            }\n            tde.appendChild(cbe);\n        },\n        tw: 2,\n        pin: true\n    },\n\n    flagcheckbox: {\n        th: function (the) {\n            the.className = \"gt-checkbox\";\n        },\n        td: function (tde, s) {\n            if (this.ptconf.mode) {\n                return;\n            }\n            tde.className = \"gt-checkbox\";\n            let cbe = document.createElement(\"input\");\n            cbe.type = \"checkbox\";\n            cbe.name = \"s:\" + s._spos;\n            cbe.value = 1;\n            cbe.className = this.className || \"uic js-range-click papsel\";\n            cbe.setAttribute(\"data-range-type\", \"s61\");\n            tde.appendChild(cbe);\n        },\n        tw: 2,\n        pin: true\n    },\n\n    pset: {\n        th: function (the) {\n            the.classList.add(\"gt-pset\", \"l\");\n            the.append(\"Pset\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-pset\";\n            let ae = document.createElement(\"a\");\n            ae.href = this.ptconf.href(s);\n            ae.classname = \"track\";\n            ae.append(siteinfo.psets[s.pset].title + (s.commit ? \"/\" + s.commit.substr(0, 7) : \"\"));\n            tde.append(ae);\n        },\n        tw: 8,\n        sort_forward: true,\n        compare: function (a, b) {\n            if (a.pset != b.pset)\n                return siteinfo.psets[a.pset].pos < siteinfo.psets[b.pset].pos ? -1 : 1;\n            else\n                return a.pos < b.pos ? -1 : 1;\n        }\n    },\n\n    user: {\n        th: function (the) {\n            let sp = the.firstChild;\n            if (!sp) {\n                the.classList.add(\"gt-user\", \"l\");\n                the.appendChild((sp = document.createElement(\"span\")));\n                sp.className = \"heading\";\n                ptable_decorate_name_th(the, this.ptconf);\n            }\n            if (this.ptconf.anonymous || this.ptconf.sort.u === \"user\") {\n                sp.replaceChildren(\"Username\");\n            } else if (this.ptconf.sort.u === \"email\") {\n                sp.replaceChildren(\"Email\");\n            } else {\n                sp.replaceChildren(\"Name\");\n            }\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-user\";\n            this.ptconf.render_user_td(tde, s);\n        },\n        tw: 14,\n        pin: true,\n        sort_forward: true,\n        compare: true,\n        refreshable: 2\n    },\n\n    username: {\n        th: function (the) {\n            let sp = the.firstChild;\n            if (!sp) {\n                the.classList.add(\"gt-username\", \"l\");\n                the.appendChild((sp = document.createElement(\"span\")));\n                sp.className = \"heading\";\n                ptable_decorate_name_th(the, this.ptconf);\n            }\n            if (this.ptconf.anonymous || !this.ptconf.sort.email) {\n                sp.replaceChildren(\"Username\");\n            } else {\n                sp.replaceChildren(\"Email\");\n            }\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-username\";\n            this.ptconf.render_username_td(tde, s);\n        },\n        tw: 12,\n        pin: true,\n        sort_forward: true,\n        compare: true,\n        refreshable: 2\n    },\n\n    name: {\n        th: function (the) {\n            the.classList.add(\"gt-name\", \"l\");\n            the.replaceChildren(\"Name\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-name\";\n            this.ptconf.render_display_name(tde, s, false);\n        },\n        tw: 14,\n        sort_forward: true,\n        compare: true,\n        refreshable: 2\n    },\n\n    name2: {\n        th: function (the) {\n            let sp = the.firstChild;\n            if (!sp) {\n                the.classList.add(\"gt-name2\", \"l\");\n                the.appendChild((sp = document.createElement(\"span\")));\n                sp.className = \"heading\";\n                ptable_decorate_name_th(the, this.ptconf);\n            }\n            if (this.ptconf.anonymous) {\n                sp.replaceChildren(\"Username\");\n            } else {\n                sp.replaceChildren(\"Name\");\n            }\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-name2\";\n            this.ptconf.render_display_name(tde, s, true);\n        },\n        tw: 14,\n        sort_forward: true,\n        compare: true,\n        refreshable: 2\n    },\n\n    at: {\n        th: function (the) {\n            the.classList.add(\"gt-at\", \"l\");\n            the.replaceChildren(\"Flagged\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-at\";\n            if (s.at)\n                tde.append(strftime(\"%#e %b %#k:%M\", s.at));\n        },\n        tw: 8,\n        sort_forward: true,\n        compare: function (a, b) {\n            if (a.at != b.at)\n                return a.at < b.at ? -1 : 1;\n            else\n                return a.pos < b.pos ? -1 : 1;\n        }\n    },\n\n    extension: {\n        th: function (the) {\n            the.classList.add(\"gt-extension\");\n            the.replaceChildren(\"X?\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-extension\";\n            s.x && tde.append(\"X\");\n        },\n        tw: 2,\n        sort_forward: true,\n        compare: function (a, b) {\n            if (a.x != b.x)\n                return a.x ? -1 : 1;\n            else\n                return user_compare(a, b);\n        }\n    },\n\n    year: {\n        th: function (the) {\n            the.classList.add(\"gt-year\");\n            the.replaceChildren(\"Yr\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-year c\";\n            tde.replaceChildren(render_year(s.year));\n        },\n        tw: 2,\n        sort_forward: true,\n        compare: function (a, b) {\n            if (a.year != b.year) {\n                if (!a.year || !b.year)\n                    return a.year ? -1 : 1;\n                else if (typeof a.year !== typeof b.year)\n                    return typeof a.year === \"number\" ? -1 : 1;\n                else\n                    return a.year < b.year ? -1 : 1;\n            } else\n                return user_compare(a, b);\n        }\n    },\n\n    grader: {\n        th: function (the) {\n            the.classList.add(\"gt-grader\", \"l\");\n            the.replaceChildren(\"Grader\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-grader\";\n            if (s.gradercid && siteinfo.pc[s.gradercid]) {\n                tde.replaceChildren(grader_name(siteinfo.pc[s.gradercid]));\n            } else if (s.gradercid) {\n                tde.replaceChildren(\"???\");\n            }\n        },\n        tw: 6,\n        sort_forward: true,\n        compare: function (a, b) {\n            return grader_compare(a, b) || user_compare(a, b);\n        },\n        refreshable: 2\n    },\n\n    latehours: {\n        th: function (the) {\n            the.classList.add(\"gt-latehours\", \"r\");\n            the.title = \"Late\";\n            the.replaceChildren(\"⏰\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-latehours r\";\n            tde.replaceChildren(s.late_hours || \"\");\n        },\n        tw: 2.5,\n        compare: function (a, b) {\n            if (a.late_hours != b.late_hours) {\n                return (a.late_hours || 0) - (b.late_hours || 0);\n            } else {\n                return user_compare(a, b);\n            }\n        },\n        refreshable: 1\n    },\n\n    notes: {\n        th: function (the) {\n            the.classList.add(\"gt-notes\");\n            the.replaceChildren(\"⎚\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-notes c\";\n            let t = s.scores_visible ? '⎚' : '';\n            if (s.grade_commit\n                && s.grade_commit === s.commit\n                && this.ptconf.flagged_commits) {\n                t += 'G⃝';\n            }\n            if (s.do_not_grade) {\n                t += ' ⃠';\n            }\n            if (s.has_notes) {\n                t += '♪';\n            }\n            if (s.has_nongrader_notes\n                && !this.ptconf.flagged_commits) {\n                t += \"+\";\n            }\n            tde.replaceChildren(t);\n        },\n        tw: 2,\n        refreshable: 1\n    },\n\n    total: {\n        th: function (the) {\n            the.classList.add(\"gt-total\", \"r\");\n            the.replaceChildren(\"Tot\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-total r\";\n            tde.replaceChildren(s.total != null ? s.total + \"\" : \"\");\n        },\n        compare: function (a, b) {\n            if (a.total == null || b.total == null) {\n                if (a.total != null) {\n                    return 1;\n                } else if (b.total != null) {\n                    return -1;\n                }\n            } else if (a.total != b.total) {\n                return a.total < b.total ? -1 : 1;\n            }\n            return -user_compare(a, b);\n        },\n        tw: 3.5,\n        refreshable: 1\n    },\n\n    grade: {\n        th: function (the) {\n            the.classList.add(...this.className.split(/\\s+/));\n            the.title = this.ge.title_text;\n            the.replaceChildren(this.ge.abbr());\n        },\n        td: function (tde, s, opt) {\n            const gr = s.grades[this.gidx];\n            tde.className = this.className;\n            if (s.autogrades\n                && s.autogrades[this.gidx] != null\n                && s.autogrades[this.gidx] !== gr) {\n                tde.className += \" gt-highlight\";\n            }\n            if (opt && opt.oldgrades && opt.oldgrades[this.gidx] !== gr) {\n                tde.className += \" update\";\n                queue_update_microtask(tde);\n            }\n            tde.replaceChildren(this.ge.tcell(gr));\n        },\n        tw: function () {\n            const w = this.ge.abbr().length * 0.5 + 1.5;\n            return Math.max(w, this.ge.tcell_width());\n        },\n        refreshable: 1\n    },\n\n    ngrades: {\n        th: function (the) {\n            the.classList.add(\"gt-ngrades\", \"r\");\n            the.replaceChildren(\"#G\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-ngrades r\";\n            tde.replaceChildren(s.ngrades ? s.ngrades + \"\" : \"\");\n        },\n        tw: 2,\n        sort_forward: true,\n        compare: function (a, b) {\n            if (a.ngrades !== b.ngrades)\n                return a.ngrades < b.ngrades ? -1 : 1;\n            else\n                return -user_compare(a, b);\n        },\n        refreshable: 1\n    },\n\n    repo: {\n        th: function () {\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-repo\";\n            if (!s.repo) {\n                return;\n            }\n            const ae = document.createElement(\"a\");\n            if (this.ptconf.anonymous) {\n                ae.className = \"ui pa-anonymized-link\";\n                ae.href = \"\";\n                ae.setAttribute(\"data-pa-link\", s.repo);\n            } else {\n                ae.className = \"track\";\n                ae.href = s.repo;\n            }\n            ae.append(\"repo\");\n            tde.replaceChildren(ae);\n            if (s.repo_broken) {\n                tde.append(\" \", strong(\"broken\"));\n            }\n            if (s.repo_unconfirmed) {\n                tde.append(\" \", strong(\"unconfirmed\"));\n            }\n            if (s.repo_too_open) {\n                tde.append(\" \", strong(\"open\"));\n            }\n            if (s.repo_handout_old) {\n                tde.append(\" \", strong(\"handout\"));\n            }\n            if (s.repo_partner_error) {\n                tde.append(\" \", strong(\"partner\"));\n            }\n            if (s.repo_sharing) {\n                tde.append(\" \", strong(\"sharing\"));\n            }\n        },\n        tw: 10\n    },\n\n    conversation: {\n        th: function (the) {\n            the.classList.add(\"gt-conversation\", \"l\");\n            the.replaceChildren(\"Flag\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-conversation l\";\n            if (s.conversation) {\n                tde.append(s.conversation);\n            } else if (s.conversation_pfx) {\n                tde.append(s.conversation_pfx + \"…\");\n            }\n        },\n        compare: function (a, b) {\n            const sa = a.conversation || a.conversation_pfx || \"\",\n                  sb = b.conversation || b.conversation_pfx || \"\";\n            if (sa === \"\" || sb === \"\") {\n                return sa === sb ? 0 : (sa === \"\" ? 1 : -1);\n            } else {\n                return sa.localeCompare(sb);\n            }\n        },\n        sort_forward: true,\n        tw: 20\n    }\n};\n\n\nfunction ptables_cellpos(ptconf, tables, key) {\n    const a = [];\n    for (let i = 0; i !== tables.length; ++i) {\n        const table = tables[i],\n            idx = ptconf.column_index_in(key, table);\n        if (idx >= 0) {\n            a.push({table: table, index: idx});\n        }\n    }\n    return a;\n}\n\nfunction ptables_rerender_key(ptconf, tables, ...keys) {\n    for (const key of keys) {\n        const c = ptconf.colmap[key];\n        for (const ti of ptables_cellpos(ptconf, tables, key)) {\n            const table = ti.table, index = ti.index;\n            if (table.tBodies.length > 0) {\n                for (let tr = table.tBodies[0].firstChild; tr; tr = tr.nextSibling) {\n                    const spos = tr.getAttribute(\"data-pa-spos\");\n                    if (spos) {\n                        const su = ptconf.smap[spos], tde = tr.children[index];\n                        c.td.call(c, tde, su);\n                    }\n                }\n            }\n            c.th.call(c, table.tHead.firstChild.children[index]);\n        }\n    }\n}\n\n\nfunction ptable_rangechange(evt) {\n    if (evt.detail.rangeType === \"s61\")\n        $(this).find(\".js-gdialog\").prop(\"disabled\", !evt.detail.newState);\n}\n\n\nfunction ptable_boring_row(table) {\n    const tr = document.createElement(\"tr\");\n    tr.className = \"gt-boring\";\n    const td = document.createElement(\"td\");\n    td.colSpan = table.rows[0].childNodes.length;\n    td.appendChild(document.createElement(\"hr\"));\n    tr.appendChild(td);\n    return tr;\n}\n\nfunction ptable_permute_rmap(table) {\n    const rmap = {};\n    let tr = table.tBodies[0].firstChild;\n    while (tr) {\n        rmap[tr.getAttribute(\"data-pa-spos\")] = tr;\n        tr = tr.nextSibling;\n    }\n    return rmap;\n}\n\nfunction ptable_permute(ptconf, table, data) {\n    const tb = table.tBodies[0],\n        rmap = ptable_permute_rmap(table),\n        mode = table.classList.contains(\"gtable-left-pin\") ? 2 : 0,\n        klasses = [\"k0\", \"k1\"];\n    let was_boringness = false, trn = 1,\n        last = tb.firstChild;\n    for (const su of data) {\n        if (su.boringness !== was_boringness && was_boringness !== false) {\n            if (last && last.className === \"gt-boring\") {\n                last = last.nextSibling;\n            } else {\n                tb.insertBefore(ptable_boring_row(table), last);\n            }\n        }\n        was_boringness = su.boringness;\n\n        while (last && last.className === \"gt-boring\") {\n            const tr = last;\n            last = last.nextSibling;\n            tb.removeChild(tr);\n        }\n\n        let any_visible = false;\n        for (const ss of su.partners ? [su, ...su.partners] : [su]) {\n            const tr = rmap[ss._spos]\n                || ptconf.render_table_row(su, su === ss ? mode : mode | 1);\n            if (tr !== last) {\n                tb.insertBefore(tr, last);\n            } else {\n                last = last.nextSibling;\n            }\n            tr.classList.remove(klasses[(trn ^ 1) & 1]);\n            tr.classList.add(klasses[trn & 1]);\n            any_visible = any_visible || !tr.hidden;\n        }\n        any_visible && ++trn;\n    }\n}\n\n\nexport function pa_pset_table(form, pconf, data) {\n    const ptconf = new PtableConf(pconf, data || []);\n    form.pa__ptconf = ptconf;\n    const table = form.querySelector(\"table.gtable\");\n    if (table) {\n        pa_render_pset_table.call(table, ptconf);\n    }\n}\n\nfunction pa_render_pset_table(ptconf) {\n    const table = this, $j = $(table),\n        smap = ptconf.smap;\n    let $alltables = $(table),\n        hdrtable = null, lpintable = null, lpinhdrtable = null,\n        slist_input,\n        gradesheet = null,\n        active_nameflag = -1,\n        col, colmap, data = ptconf.data;\n\n    function sort_nameflag() {\n        if (ptconf.anonymous) {\n            return 8;\n        } else if (ptconf.sort.u === \"name\") {\n            return 1 | (ptconf.sort.last ? 2 : 0);\n        } else if (ptconf.sort.u === \"email\") {\n            return 4;\n        } else {\n            return 0;\n        }\n    }\n\n    function initialize() {\n        let sort = ptconf.sort,\n            x = wstorage.site(true, \"pa-pset\" + ptconf.id + \"-table\");\n        if (x) {\n            try {\n                x = JSON.parse(x);\n                if (x && typeof x === \"object\") {\n                    sort = ptconf.sort = x;\n                    delete sort.override_anonymous; // XXX backward compat 21-Dec-2022\n                }\n            } catch {\n            }\n        }\n        if (!sort.f || !/^\\w+$/.test(sort.f)) {\n            sort.f = \"name\";\n        }\n        if (sort.rev !== 1 && sort.rev !== -1) {\n            sort.rev = 1;\n        }\n        if (!ptconf.overridable_anonymous) {\n            delete sort.deblind;\n        }\n        if (sort.deblind) {\n            let now = (new Date).getTime() / 1000;\n            if (typeof sort.deblind === \"number\" && sort.deblind + 3600 > now) {\n                sort.deblind = now;\n            } else {\n                delete sort.deblind;\n            }\n            wstorage.site(true, \"pa-pset\" + ptconf.id + \"-table\", JSON.stringify(sort));\n        }\n        if (sort.deblind) {\n            ptconf.anonymous = false;\n        }\n\n        if (ptconf.grades) {\n            gradesheet = new GradeSheet(ptconf.grades);\n        } else {\n            gradesheet = new GradeSheet({order: []});\n        }\n        gradesheet.scores_visible = ptconf.scores_visible;\n        ptconf.set_gradesheet(gradesheet);\n\n        let ngrades_expected = -1,\n            has_late_hours = false, any_visible = ptconf.scores_visible;\n        for (let i = 0; i !== data.length; ++i) {\n            const s = data[i] = gradesheet.make_child().assign(data[i]);\n            if (s.dropped) {\n                s.boringness = 2;\n            } else if (s.emptydiff\n                       || (!s.grade_commit && !s.commit && !ptconf.gitless_grades)\n                       || s.do_not_grade) {\n                s.boringness = 1;\n            } else {\n                s.boringness = 0;\n            }\n            let ngrades = 0;\n            if (s.grades) {\n                for (let x of ptconf.in_total_indexes) {\n                    if (s.grades[x] != null && s.grades[x] !== \"\")\n                        ++ngrades;\n                }\n            }\n            s.ngrades = ngrades;\n            if (ngrades_expected === -1) {\n                ngrades_expected = ngrades;\n            } else if (ngrades_expected >= 0\n                       && ngrades_expected !== ngrades\n                       && (!s.boringness || ngrades > 0)) {\n                ngrades_expected = -2;\n            }\n            has_late_hours = has_late_hours || !!s.late_hours;\n            any_visible = any_visible || s.scores_visible_pinned || s.do_not_grade;\n        }\n        const need_ngrades = ngrades_expected === -2;\n\n        if (ptconf.requested_columns) {\n            col = ptconf.requested_columns;\n        } else {\n            col = [\"rownumber\"];\n            if (ptconf.checkbox) {\n                col.push(ptconf.flagged_commits ? \"flagcheckbox\" : \"checkbox\");\n            }\n            if (ptconf.flagged_commits) {\n                col.push(\"pset\");\n                col.push(\"at\");\n            }\n            col.push(\"user\", \"extension\", \"year\", \"grader\");\n            if (has_late_hours) {\n                col.push(\"latehours\");\n            }\n            if (ptconf.flagged_commits) {\n                col.push(\"conversation\");\n            }\n            if (ptconf.flagged_commits || !ptconf.gitless_grades || any_visible) {\n                col.push(\"notes\");\n            }\n            if (ptconf.need_total) {\n                col.push(\"total\");\n            }\n            let gi = ptconf.gradesheet;\n            for (let i = 0; i !== gi.value_order.length; ++i) {\n                const ge = gi.entries[gi.value_order[i]];\n                col.push(ge.configure_column({\n                    type: \"grade\",\n                    name: \"/g/\" + ge.key,\n                    gidx: i,\n                    gkey: ge.key,\n                    ptconf: ptconf\n                }));\n            }\n            if (need_ngrades) {\n                col.push(\"ngrades\");\n            }\n            if (!ptconf.gitless) {\n                col.push(\"repo\");\n            }\n        }\n\n        for (let c of col) {\n            if (typeof c === \"string\") {\n                c = {type: c, name: c};\n            }\n            Object.assign(c, gcoldef[c.type]);\n            c.ptconf = ptconf;\n            ptconf.add_column(c);\n        }\n        col = ptconf.col;\n        colmap = ptconf.colmap;\n\n        if (table.closest(\"form\")) {\n            slist_input = document.createElement(\"input\");\n            slist_input.type = \"hidden\";\n            slist_input.name = \"slist\";\n            table.after(slist_input);\n        }\n    }\n\n\n    function make_hotlist(event) {\n        const j = [];\n        for (const s of data) {\n            let t = \"~\".concat(encodeURIComponent(ptconf.ukey(s)));\n            if (ptconf.flagged_commits) {\n                t = t.concat(\"/pset/\", s.pset);\n                if (s.commit)\n                    t = t.concat(\"/\", s.commit);\n            }\n            j.push(t);\n        }\n        event.detail.hotlist = {pset: ptconf.flagged_commits ? null : ptconf.key, items: j};\n    }\n\n    function assign_slist() {\n        var j = [];\n        for (var i = 0; i !== data.length; ++i) {\n            j.push(ptconf.ukey(data[i]));\n        }\n        slist_input.value = j.join(\" \");\n    }\n\n    function rerender_rownumber() {\n        const idx = colmap.rownumber.index;\n        let trn = 0;\n        for (let tr = table.tBodies[0].firstChild; tr; tr = tr.nextSibling) {\n            if (hasClass(tr, \"gt\")) {\n                ++trn;\n                tr.children.item(idx).textContent = trn + \".\";\n            }\n        }\n    }\n\n    function render_user_compare(u) {\n        let t = \"\";\n        if ((active_nameflag & 8) && u.anon_user) {\n            t = u.anon_user + \" \";\n        } else if (active_nameflag & 1) {\n            t = render_name(u, (active_nameflag & 2) === 2) + \" \";\n        }\n        if ((active_nameflag & 4) && u.email) {\n            t += u.email;\n        } else {\n            t += u.user || \"\";\n        }\n        if (u.pset != null) {\n            t += sprintf(\" %5s\", u.pset);\n        }\n        if (u.at != null) {\n            t += sprintf(\" %.11g\", u.at);\n        }\n        return t.toLowerCase();\n    }\n\n    function set_user_sorters() {\n        const nf = sort_nameflag();\n        if (nf !== active_nameflag) {\n            active_nameflag = nf;\n            for (var i = 0; i !== data.length; ++i) {\n                data[i]._sort_user = render_user_compare(data[i]);\n            }\n        }\n    }\n\n    function sort_data() {\n        let f = ptconf.sort.f;\n        set_user_sorters();\n        let colr = colmap[f];\n        if (colr && colr.compare && colr.compare !== true) {\n            data.sort(colr.compare);\n        } else if (colr && colr.make_compare) {\n            data.sort(colr.make_compare(ptconf.sort, colr.subtype || null));\n        } else if (((f === \"name\" || f === \"name2\") && !ptconf.anonymous)\n                   || f === \"user\") {\n            data.sort(user_compare);\n        } else if (f === \"gradestatus\") {\n            data.sort(function (a, b) {\n                const av = a.scores_visible, bv = b.scores_visible;\n                if (av !== bv) {\n                    return av ? -1 : 1;\n                } else if (a.has_notes != b.has_notes) {\n                    return a.has_notes ? -1 : 1;\n                } else {\n                    return grader_compare(a, b) || user_compare(a, b);\n                }\n            });\n        } else if (ptconf.sort.email && !ptconf.anonymous) {\n            f = \"username\";\n            data.sort(function (a, b) {\n                var ae = (a.email || \"\").toLowerCase(), be = (b.email || \"\").toLowerCase();\n                if (ae !== be) {\n                    if (ae === \"\" || be === \"\")\n                        return ae === \"\" ? 1 : -1;\n                    else\n                        return ae < be ? -1 : 1;\n                } else {\n                    return user_compare(a, b);\n                }\n            });\n        } else { /* \"username\" */\n            if (f !== \"name2\") {\n                f = \"username\";\n            }\n            data.sort(user_compare);\n        }\n\n        if (ptconf.sort.rev < 0) {\n            data.reverse();\n        }\n        data.sort(function (a, b) {\n            return a.boringness !== b.boringness ? a.boringness - b.boringness : 0;\n        });\n    }\n\n    function checkbox_click() {\n        const range = this.getAttribute(\"data-range-type\");\n        if ((range === \"s61\" && lpintable) || range === \"s61o\") {\n            const wanto = range === \"s61\",\n                tr0 = this.closest(\"tr\"),\n                tr1 = (wanto ? lpintable : table).rows[tr0.rowIndex],\n                cb1 = ptconf.user_row_checkbox(tr1);\n            if (cb1.checked !== this.checked) {\n                cb1.click();\n            }\n        }\n    }\n\n    function make_overlay_observer() {\n        let i = 0;\n        while (i !== col.length && !col[i].pin) {\n            ++i;\n        }\n        var overlay_div = $('<div style=\"position:absolute;left:0;top:0;bottom:0;width:' + (col[i].left - 10) + 'px;pointer-events:none\"></div>').prependTo($j.parent())[0],\n            table_hit = false, left_hit = false;\n        function observer_fn(entries) {\n            for (let e of entries) {\n                if (e.target === overlay_div) {\n                    left_hit = e.isIntersecting;\n                } else {\n                    table_hit = e.isIntersecting;\n                }\n            }\n            if (table_hit && (!left_hit || lpintable)) {\n                if (!left_hit && !lpintable) {\n                    make_overlay();\n                }\n                toggleClass(lpintable.parentElement, \"hidden\", left_hit);\n                lpinhdrtable && toggleClass(lpinhdrtable, \"hidden\", left_hit);\n            }\n        }\n        var observer = new IntersectionObserver(observer_fn);\n        observer.observe(overlay_div);\n        observer.observe(table.parentElement);\n    }\n\n    function make_overlay() {\n        const cx = ptconf.pinned_columns;\n        let tw = 0;\n        for (const c of cx) {\n            tw += c.width;\n        }\n\n        lpintable = document.createElement(\"table\");\n        lpintable.className = \"gtable-left-pin gtable-fixed new\";\n        lpintable.style.width = (tw + 24) + \"px\";\n        lpintable.appendChild(ptable_thead(cx, ptconf, true));\n        lpintable.appendChild(document.createElement(\"tbody\"));\n        lpintable.tHead.firstChild.classList.add(\"kfade\");\n\n        let tr = table.rows[0], otr = lpintable.rows[0];\n        for (let i = 0; i !== cx.length; ++i) {\n            otr.childNodes[i].className = tr.childNodes[cx[i].index].className;\n        }\n\n        const div = document.createElement(\"div\");\n        div.className = \"gtable-container-left-pin\";\n        div.appendChild(lpintable);\n        table.parentNode.prepend(div);\n        lpintable.tHead.addEventListener(\"click\", ptable_head_click);\n        $(lpintable).find(\"tbody\").on(\"click\", \"input[type=checkbox]\", checkbox_click);\n\n        ptable_permute(ptconf, lpintable, data);\n        lpinhdrtable = ptable_track_header(lpintable);\n        $j.find(\"input[data-range-type=s61]:checked\").each(checkbox_click);\n        lpintable.addEventListener(\"mouseenter\", user_hover, true);\n        lpintable.addEventListener(\"mouseleave\", user_hover, true);\n        queueMicrotask(function () {\n            removeClass(lpintable, \"new\");\n            lpinhdrtable && removeClass(lpinhdrtable, \"new\");\n        });\n\n        $alltables = $alltables.add(lpintable).add(lpinhdrtable);\n    }\n\n    function set_tables_width() {\n        const lastc = col[col.length - 1];\n        let width = lastc.left + lastc.width;\n        if (ptconf.anonymous) {\n            colmap.name && (width -= colmap.name.width);\n            colmap.year && (width -= colmap.year.width);\n        }\n        $alltables.each(function () {\n            if (!hasClass(this, \"gtable-left-pin\")) {\n                this.style.width = width + \"px\";\n            }\n        });\n    }\n\n    function render() {\n        const tfixed = $j.hasClass(\"want-gtable-fixed\"),\n            thead = ptable_thead(col, ptconf, true);\n\n        toggleClass(table, \"gt-anonymous\", !!ptconf.anonymous);\n        table.appendChild(thead);\n        toggleClass(table, \"gt-useemail\", !!ptconf.sort.email);\n        if (tfixed) {\n            set_tables_width();\n            removeClass(table, \"want-gtable-fixed\");\n            addClass(table, \"gtable-fixed\");\n        }\n\n        const tbody = document.createElement(\"tbody\");\n        tbody.className = \"has-hotlist\";\n        table.appendChild(tbody);\n        if (!ptconf.no_sort) {\n            sort_data();\n            rerender_sort_header();\n        }\n\n        for (const su of data) {\n            ptconf.push(su);\n            for (const psu of su.partners || []) {\n                ptconf.push(psu);\n            }\n        }\n\n        ptable_permute(ptconf, table, data);\n        colmap.rownumber && rerender_rownumber();\n        slist_input && assign_slist();\n        $j.find(\"tbody\").on(\"click\", \"input[type=checkbox]\", checkbox_click);\n\n        hdrtable = ptable_track_header(table);\n        $alltables = $alltables.add(hdrtable);\n        if (tfixed\n            && window.IntersectionObserver\n            && table.closest(\".gtable-container-2\")) {\n            make_overlay_observer();\n        }\n    }\n\n    function rerender_sort_header() {\n        $alltables.children(\"thead\").find(\".plsortable\").removeClass(\"plsortactive plsortreverse\");\n        $alltables.children(\"thead\")\n            .find(\"th[data-pa-sort='\" + ptconf.sort.f + \"']\")\n            .addClass(\"plsortactive\")\n            .toggleClass(\"plsortreverse\", ptconf.sort.rev < 0);\n    }\n\n    function sortchange(evt) {\n        const osort = ptconf.sort, nsort = evt.detail.sort;\n        ptconf.sort = nsort;\n        if (ptconf.overridable_anonymous\n            && nsort.deblind != osort.deblind) {\n            ptconf.anonymous = !nsort.deblind;\n            $alltables.toggleClass(\"gt-anonymous\", !!ptconf.anonymous);\n            set_tables_width();\n            $alltables.children(\"tbody\").find(\"input.gt-check\").each(function () {\n                const s = smap[this.parentNode.parentNode.getAttribute(\"data-pa-spos\")];\n                this.setAttribute(\"name\", ptconf.render_checkbox_name(s));\n            });\n            const anon = table.closest(\"form\").elements.anonymous;\n            anon && (anon.value = ptconf.anonymous ? \"1\" : \"0\");\n        }\n        if (nsort.last !== osort.last\n            || nsort.deblind != osort.deblind) {\n            ptables_rerender_key(ptconf, $alltables, \"name\", \"name2\", \"username\", \"user\");\n        } else if (nsort.u !== osort.u) {\n            ptables_rerender_key(ptconf, $alltables, \"username\", \"user\");\n        }\n\n        sort_data();\n        ptable_permute(ptconf, table, data);\n        lpintable && ptable_permute(ptconf, lpintable, data);\n        colmap.rownumber && rerender_rownumber();\n        rerender_sort_header();\n        slist_input && assign_slist();\n        wstorage.site(true, \"pa-pset\" + ptconf.id + \"-table\", JSON.stringify(nsort));\n    }\n\n    function events() {\n        const f = table.closest(\"form\");\n        table.tBodies[0].addEventListener(\"pa-hotlist\", make_hotlist);\n        table.tBodies[0].addEventListener(\"click\", ptable_body_click);\n        table.addEventListener(\"mouseenter\", user_hover, true);\n        table.addEventListener(\"mouseleave\", user_hover, true);\n        table.tHead.addEventListener(\"click\", ptable_head_click);\n        f.addEventListener(\"rangechange\", ptable_rangechange);\n        f.addEventListener(\"sortchange\", sortchange);\n    }\n\n    initialize();\n    render();\n    events();\n}\n\n\ntooltip.add_builder(\"pa-ptable-user\", function () {\n    let spos = this.closest(\"tr\").getAttribute(\"data-pa-spos\"),\n        ptconf = this.closest(\"form\").pa__ptconf,\n        su = ptconf.smap[spos];\n    return {content: new Promise((resolve) => {\n        const maindiv = document.createElement(\"div\"),\n            anon = ptconf.anonymous && su.anon_user;\n        maindiv.className = \"d-flex align-items-center\";\n        if (su.imageid && !anon) {\n            const ae = ptconf.make_student_ae(su),\n                img = document.createElement(\"img\");\n            img.className = \"pa-tinyface\";\n            img.src = hoturl(\"face\", {u: su.user, imageid: su.imageid});\n            ae.append(img);\n            maindiv.append(ae);\n        }\n        const idiv = document.createElement(\"div\");\n        maindiv.append(idiv);\n        const userae = ptconf.make_student_ae(su);\n        userae.className += \" font-weight-bold\";\n        userae.append(anon ? su.anon_user : su.user);\n        idiv.append(userae);\n        if (su.x) {\n            idiv.append(\" (X)\");\n        } else if (!anon && su.year) {\n            idiv.append(\" \" + render_year(su.year));\n        }\n        idiv.append(document.createElement(\"br\"));\n        if (!anon) {\n            const name = render_name(su, false);\n            if (name !== \"\") {\n                const nameae = ptconf.make_student_ae(su);\n                nameae.className = \"q\";\n                nameae.append(name);\n                idiv.append(nameae, document.createElement(\"br\"));\n            }\n            if (su.email) {\n                idiv.append(su.email, document.createElement(\"br\"));\n            }\n        }\n        resolve(maindiv);\n    }), delay: 400, className: \"gray small ml-2\", dir: \"w\",\n        noDelayClass: \"pa-ptable-user\"};\n});\n\n\nfunction ptable_recolor(tb) {\n    const klasses = [\"k0\", \"k1\"];\n    let trn = 1, boring = null;\n    for (let tr = tb.firstChild; tr; tr = tr.nextElementSibling) {\n        if (tr.className === \"gt-boring\") {\n            tr.hidden = true;\n            boring = trn > 1 ? tr : null;\n            continue;\n        } else if (tr.hidden) {\n            continue;\n        }\n        tr.classList.remove(klasses[(trn ^ 1) & 1]);\n        tr.classList.add(klasses[trn & 1]);\n        if (!tr.classList.contains(\"gtrow-partner\")) {\n            ++trn;\n        }\n        if (boring) {\n            boring.hidden = false;\n            boring = null;\n        }\n    }\n}\n\nlet search_target, search_target_success;\n\nfunction evaluate_search(se) {\n    if (se.kword) {\n        return false;\n    }\n    if (!se.info) {\n        se.info = new RegExp(regexp_quote(se.text), \"i\");\n    }\n    return se.info.test(search_target.first)\n        || se.info.test(search_target.last)\n        || se.info.test(search_target.email)\n        || se.info.test(search_target.user);\n}\n\nfunction ptable_search_check(ptconf, trx, sexpr) {\n    search_target = ptconf.user_at(trx);\n    return !!search_target && sexpr.evaluate_simple(evaluate_search);\n}\n\nfunction ptable_search(search) {\n    return function () {\n        const form = search.closest(\"form\");\n        let ptconf = form.pa__ptconf,\n            pexpr = new SearchParser(search.value).parse_expression();\n        if (pexpr && !pexpr.op && !pexpr.kword && !pexpr.text) {\n            pexpr = null;\n        }\n        let changed = false;\n        const ptbodies = $(form).find(\"table.gtable > tbody\").toArray(),\n            trs = ptbodies.map((tb) => tb.firstChild);\n        let trx = trs[0], last_boring;\n        search_target_success = false;\n        while (trx !== null) {\n            const hide = !!pexpr && !ptable_search_check(ptconf, trx, pexpr);\n            if (hide !== trx.hidden) {\n                changed = true;\n                for (const tr of trs) {\n                    tr.hidden = hide;\n                }\n            }\n            trx = trx.nextElementSibling;\n            for (let i = 0; i !== trs.length; ++i) {\n                trs[i] = trs[i].nextElementSibling;\n            }\n        }\n        if (changed) {\n            ptbodies.forEach((tb) => ptable_recolor(tb));\n        }\n    };\n}\n\nhandle_ui.on(\"js-ptable-search\", function () {\n    let ptconf = this.closest(\"form\").pa__ptconf;\n    ptconf.input_timeout && clearTimeout(ptconf.input_timeout);\n    ptconf.input_timeout = setTimeout(ptable_search(this), 500);\n});\n\n\nhandle_ui.on(\"js-pset-gconfig\", function () {\n    let ptconf = this.closest(\"form\").pa__ptconf;\n    let $gdialog, form;\n\n    function change_state() {\n        const state = form.elements.state.value;\n        toggleClass(form.elements.frozen.parentElement, \"invisible\",\n                    state === \"disabled\" || state === \"hidden\");\n        toggleClass(form.elements.anonymous.parentElement, \"invisible\",\n                    state === \"disabled\");\n    }\n\n    function submit() {\n        $.ajax(hoturl(\"=api/psetconfig\", {pset: ptconf.key}), {\n            method: \"POST\",\n            data: $(form).serializeWith({}),\n            success: function () {\n                location.hash = \"#\" + ptconf.key;\n                location.reload();\n            }\n        });\n    }\n\n    function gdialog() {\n        const hc = popup_skeleton();\n        hc.push('<h2 class=\"pa-home-pset\">' + escape_entities(ptconf.title) + ' Settings</h2>');\n        hc.push('<div class=\"pa-messages\"></div>');\n        hc.push('<div class=\"d-grid-1 grid-gap-2\">', '</div>');\n\n        hc.push('<span class=\"select\"><select name=\"state\">', '</select></span>');\n        hc.push('<option value=\"disabled\">Disabled</option>');\n        hc.push('<option value=\"hidden\">Hidden</option>');\n        hc.push('<option value=\"visible\">Visible without grades</option>');\n        hc.push('<option value=\"scores_visible\">Visible with grades</option>');\n        hc.pop();\n\n        hc.push('<span class=\"select\"><select name=\"frozen\">', '</select></span>');\n        hc.push('<option value=\"no\">Student updates allowed</option>');\n        hc.push('<option value=\"yes\">Submissions frozen</option>');\n        hc.pop();\n\n        hc.push('<span class=\"select\"><select name=\"anonymous\">', '</select></span>');\n        hc.push('<option value=\"no\">Open grading</option>');\n        hc.push('<option value=\"yes\">Anonymous grading</option>');\n        hc.pop();\n\n        hc.pop();\n        hc.push_actions();\n        hc.push('<button type=\"button\" name=\"bsubmit\" class=\"btn-primary\">Save</button>');\n        hc.push('<button type=\"button\" name=\"cancel\">Cancel</button>');\n        $gdialog = hc.show(false);\n        form = $gdialog.find(\"form\")[0];\n\n        let v;\n        if (ptconf.disabled) {\n            v = \"disabled\";\n        } else if (!ptconf.visible) {\n            v = \"hidden\";\n        } else {\n            v = ptconf.scores_visible ? \"scores_visible\" : \"visible\";\n        }\n        form.elements.state.value = v;\n        form.elements.state.setAttribute(\"data-default-value\", v);\n        form.elements.state.addEventListener(\"change\", change_state);\n        change_state();\n\n        v = ptconf.frozen ? \"yes\" : \"no\";\n        form.elements.frozen.value = v;\n        form.elements.frozen.setAttribute(\"data-default-value\", v);\n\n        v = ptconf.anonymous ? \"yes\" : \"no\";\n        form.elements.anonymous.value = v;\n        form.elements.anonymous.setAttribute(\"data-default-value\", v);\n\n        $gdialog.find(\"button[name=bsubmit]\").on(\"click\", submit);\n        hc.show();\n    }\n    gdialog();\n});\n","export default /[\\0-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/","export default /[\\0-\\x1F\\x7F-\\x9F]/","export default /[ \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000]/","export default /[!-#%-\\*,-\\/:;\\?@\\[-\\]_\\{\\}\\xA1\\xA7\\xAB\\xB6\\xB7\\xBB\\xBF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061D-\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u09FD\\u0A76\\u0AF0\\u0C77\\u0C84\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1B7D\\u1B7E\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E4F\\u2E52-\\u2E5D\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]|\\uD800[\\uDD00-\\uDD02\\uDF9F\\uDFD0]|\\uD801\\uDD6F|\\uD802[\\uDC57\\uDD1F\\uDD3F\\uDE50-\\uDE58\\uDE7F\\uDEF0-\\uDEF6\\uDF39-\\uDF3F\\uDF99-\\uDF9C]|\\uD803[\\uDEAD\\uDF55-\\uDF59\\uDF86-\\uDF89]|\\uD804[\\uDC47-\\uDC4D\\uDCBB\\uDCBC\\uDCBE-\\uDCC1\\uDD40-\\uDD43\\uDD74\\uDD75\\uDDC5-\\uDDC8\\uDDCD\\uDDDB\\uDDDD-\\uDDDF\\uDE38-\\uDE3D\\uDEA9]|\\uD805[\\uDC4B-\\uDC4F\\uDC5A\\uDC5B\\uDC5D\\uDCC6\\uDDC1-\\uDDD7\\uDE41-\\uDE43\\uDE60-\\uDE6C\\uDEB9\\uDF3C-\\uDF3E]|\\uD806[\\uDC3B\\uDD44-\\uDD46\\uDDE2\\uDE3F-\\uDE46\\uDE9A-\\uDE9C\\uDE9E-\\uDEA2\\uDF00-\\uDF09]|\\uD807[\\uDC41-\\uDC45\\uDC70\\uDC71\\uDEF7\\uDEF8\\uDF43-\\uDF4F\\uDFFF]|\\uD809[\\uDC70-\\uDC74]|\\uD80B[\\uDFF1\\uDFF2]|\\uD81A[\\uDE6E\\uDE6F\\uDEF5\\uDF37-\\uDF3B\\uDF44]|\\uD81B[\\uDE97-\\uDE9A\\uDFE2]|\\uD82F\\uDC9F|\\uD836[\\uDE87-\\uDE8B]|\\uD83A[\\uDD5E\\uDD5F]/","import reFactory from './lib/re.mjs'\n\n//\n// Helpers\n//\n\n// Merge objects\n//\nfunction assign (obj /* from1, from2, from3, ... */) {\n  const sources = Array.prototype.slice.call(arguments, 1)\n\n  sources.forEach(function (source) {\n    if (!source) { return }\n\n    Object.keys(source).forEach(function (key) {\n      obj[key] = source[key]\n    })\n  })\n\n  return obj\n}\n\nfunction _class (obj) { return Object.prototype.toString.call(obj) }\nfunction isString (obj) { return _class(obj) === '[object String]' }\nfunction isObject (obj) { return _class(obj) === '[object Object]' }\nfunction isRegExp (obj) { return _class(obj) === '[object RegExp]' }\nfunction isFunction (obj) { return _class(obj) === '[object Function]' }\n\nfunction escapeRE (str) { return str.replace(/[.?*+^$[\\]\\\\(){}|-]/g, '\\\\$&') }\n\n//\n\nconst defaultOptions = {\n  fuzzyLink: true,\n  fuzzyEmail: true,\n  fuzzyIP: false\n}\n\nfunction isOptionsObj (obj) {\n  return Object.keys(obj || {}).reduce(function (acc, k) {\n    /* eslint-disable-next-line no-prototype-builtins */\n    return acc || defaultOptions.hasOwnProperty(k)\n  }, false)\n}\n\nconst defaultSchemas = {\n  'http:': {\n    validate: function (text, pos, self) {\n      const tail = text.slice(pos)\n\n      if (!self.re.http) {\n        // compile lazily, because \"host\"-containing variables can change on tlds update.\n        self.re.http = new RegExp(\n          '^\\\\/\\\\/' + self.re.src_auth + self.re.src_host_port_strict + self.re.src_path, 'i'\n        )\n      }\n      if (self.re.http.test(tail)) {\n        return tail.match(self.re.http)[0].length\n      }\n      return 0\n    }\n  },\n  'https:': 'http:',\n  'ftp:': 'http:',\n  '//': {\n    validate: function (text, pos, self) {\n      const tail = text.slice(pos)\n\n      if (!self.re.no_http) {\n      // compile lazily, because \"host\"-containing variables can change on tlds update.\n        self.re.no_http = new RegExp(\n          '^' +\n          self.re.src_auth +\n          // Don't allow single-level domains, because of false positives like '//test'\n          // with code comments\n          '(?:localhost|(?:(?:' + self.re.src_domain + ')\\\\.)+' + self.re.src_domain_root + ')' +\n          self.re.src_port +\n          self.re.src_host_terminator +\n          self.re.src_path,\n\n          'i'\n        )\n      }\n\n      if (self.re.no_http.test(tail)) {\n        // should not be `://` & `///`, that protects from errors in protocol name\n        if (pos >= 3 && text[pos - 3] === ':') { return 0 }\n        if (pos >= 3 && text[pos - 3] === '/') { return 0 }\n        return tail.match(self.re.no_http)[0].length\n      }\n      return 0\n    }\n  },\n  'mailto:': {\n    validate: function (text, pos, self) {\n      const tail = text.slice(pos)\n\n      if (!self.re.mailto) {\n        self.re.mailto = new RegExp(\n          '^' + self.re.src_email_name + '@' + self.re.src_host_strict, 'i'\n        )\n      }\n      if (self.re.mailto.test(tail)) {\n        return tail.match(self.re.mailto)[0].length\n      }\n      return 0\n    }\n  }\n}\n\n// RE pattern for 2-character tlds (autogenerated by ./support/tlds_2char_gen.js)\n/* eslint-disable-next-line max-len */\nconst tlds_2ch_src_re = 'a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]'\n\n// DON'T try to make PRs with changes. Extend TLDs with LinkifyIt.tlds() instead\nconst tlds_default = 'biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф'.split('|')\n\nfunction resetScanCache (self) {\n  self.__index__ = -1\n  self.__text_cache__ = ''\n}\n\nfunction createValidator (re) {\n  return function (text, pos) {\n    const tail = text.slice(pos)\n\n    if (re.test(tail)) {\n      return tail.match(re)[0].length\n    }\n    return 0\n  }\n}\n\nfunction createNormalizer () {\n  return function (match, self) {\n    self.normalize(match)\n  }\n}\n\n// Schemas compiler. Build regexps.\n//\nfunction compile (self) {\n  // Load & clone RE patterns.\n  const re = self.re = reFactory(self.__opts__)\n\n  // Define dynamic patterns\n  const tlds = self.__tlds__.slice()\n\n  self.onCompile()\n\n  if (!self.__tlds_replaced__) {\n    tlds.push(tlds_2ch_src_re)\n  }\n  tlds.push(re.src_xn)\n\n  re.src_tlds = tlds.join('|')\n\n  function untpl (tpl) { return tpl.replace('%TLDS%', re.src_tlds) }\n\n  re.email_fuzzy = RegExp(untpl(re.tpl_email_fuzzy), 'i')\n  re.link_fuzzy = RegExp(untpl(re.tpl_link_fuzzy), 'i')\n  re.link_no_ip_fuzzy = RegExp(untpl(re.tpl_link_no_ip_fuzzy), 'i')\n  re.host_fuzzy_test = RegExp(untpl(re.tpl_host_fuzzy_test), 'i')\n\n  //\n  // Compile each schema\n  //\n\n  const aliases = []\n\n  self.__compiled__ = {} // Reset compiled data\n\n  function schemaError (name, val) {\n    throw new Error('(LinkifyIt) Invalid schema \"' + name + '\": ' + val)\n  }\n\n  Object.keys(self.__schemas__).forEach(function (name) {\n    const val = self.__schemas__[name]\n\n    // skip disabled methods\n    if (val === null) { return }\n\n    const compiled = { validate: null, link: null }\n\n    self.__compiled__[name] = compiled\n\n    if (isObject(val)) {\n      if (isRegExp(val.validate)) {\n        compiled.validate = createValidator(val.validate)\n      } else if (isFunction(val.validate)) {\n        compiled.validate = val.validate\n      } else {\n        schemaError(name, val)\n      }\n\n      if (isFunction(val.normalize)) {\n        compiled.normalize = val.normalize\n      } else if (!val.normalize) {\n        compiled.normalize = createNormalizer()\n      } else {\n        schemaError(name, val)\n      }\n\n      return\n    }\n\n    if (isString(val)) {\n      aliases.push(name)\n      return\n    }\n\n    schemaError(name, val)\n  })\n\n  //\n  // Compile postponed aliases\n  //\n\n  aliases.forEach(function (alias) {\n    if (!self.__compiled__[self.__schemas__[alias]]) {\n      // Silently fail on missed schemas to avoid errons on disable.\n      // schemaError(alias, self.__schemas__[alias]);\n      return\n    }\n\n    self.__compiled__[alias].validate =\n      self.__compiled__[self.__schemas__[alias]].validate\n    self.__compiled__[alias].normalize =\n      self.__compiled__[self.__schemas__[alias]].normalize\n  })\n\n  //\n  // Fake record for guessed links\n  //\n  self.__compiled__[''] = { validate: null, normalize: createNormalizer() }\n\n  //\n  // Build schema condition\n  //\n  const slist = Object.keys(self.__compiled__)\n    .filter(function (name) {\n      // Filter disabled & fake schemas\n      return name.length > 0 && self.__compiled__[name]\n    })\n    .map(escapeRE)\n    .join('|')\n  // (?!_) cause 1.5x slowdown\n  self.re.schema_test = RegExp('(^|(?!_)(?:[><\\uff5c]|' + re.src_ZPCc + '))(' + slist + ')', 'i')\n  self.re.schema_search = RegExp('(^|(?!_)(?:[><\\uff5c]|' + re.src_ZPCc + '))(' + slist + ')', 'ig')\n  self.re.schema_at_start = RegExp('^' + self.re.schema_search.source, 'i')\n\n  self.re.pretest = RegExp(\n    '(' + self.re.schema_test.source + ')|(' + self.re.host_fuzzy_test.source + ')|@',\n    'i'\n  )\n\n  //\n  // Cleanup\n  //\n\n  resetScanCache(self)\n}\n\n/**\n * class Match\n *\n * Match result. Single element of array, returned by [[LinkifyIt#match]]\n **/\nfunction Match (self, shift) {\n  const start = self.__index__\n  const end = self.__last_index__\n  const text = self.__text_cache__.slice(start, end)\n\n  /**\n   * Match#schema -> String\n   *\n   * Prefix (protocol) for matched string.\n   **/\n  this.schema = self.__schema__.toLowerCase()\n  /**\n   * Match#index -> Number\n   *\n   * First position of matched string.\n   **/\n  this.index = start + shift\n  /**\n   * Match#lastIndex -> Number\n   *\n   * Next position after matched string.\n   **/\n  this.lastIndex = end + shift\n  /**\n   * Match#raw -> String\n   *\n   * Matched string.\n   **/\n  this.raw = text\n  /**\n   * Match#text -> String\n   *\n   * Notmalized text of matched string.\n   **/\n  this.text = text\n  /**\n   * Match#url -> String\n   *\n   * Normalized url of matched string.\n   **/\n  this.url = text\n}\n\nfunction createMatch (self, shift) {\n  const match = new Match(self, shift)\n\n  self.__compiled__[match.schema].normalize(match, self)\n\n  return match\n}\n\n/**\n * class LinkifyIt\n **/\n\n/**\n * new LinkifyIt(schemas, options)\n * - schemas (Object): Optional. Additional schemas to validate (prefix/validator)\n * - options (Object): { fuzzyLink|fuzzyEmail|fuzzyIP: true|false }\n *\n * Creates new linkifier instance with optional additional schemas.\n * Can be called without `new` keyword for convenience.\n *\n * By default understands:\n *\n * - `http(s)://...` , `ftp://...`, `mailto:...` & `//...` links\n * - \"fuzzy\" links and emails (example.com, foo@bar.com).\n *\n * `schemas` is an object, where each key/value describes protocol/rule:\n *\n * - __key__ - link prefix (usually, protocol name with `:` at the end, `skype:`\n *   for example). `linkify-it` makes shure that prefix is not preceeded with\n *   alphanumeric char and symbols. Only whitespaces and punctuation allowed.\n * - __value__ - rule to check tail after link prefix\n *   - _String_ - just alias to existing rule\n *   - _Object_\n *     - _validate_ - validator function (should return matched length on success),\n *       or `RegExp`.\n *     - _normalize_ - optional function to normalize text & url of matched result\n *       (for example, for @twitter mentions).\n *\n * `options`:\n *\n * - __fuzzyLink__ - recognige URL-s without `http(s):` prefix. Default `true`.\n * - __fuzzyIP__ - allow IPs in fuzzy links above. Can conflict with some texts\n *   like version numbers. Default `false`.\n * - __fuzzyEmail__ - recognize emails without `mailto:` prefix.\n *\n **/\nfunction LinkifyIt (schemas, options) {\n  if (!(this instanceof LinkifyIt)) {\n    return new LinkifyIt(schemas, options)\n  }\n\n  if (!options) {\n    if (isOptionsObj(schemas)) {\n      options = schemas\n      schemas = {}\n    }\n  }\n\n  this.__opts__ = assign({}, defaultOptions, options)\n\n  // Cache last tested result. Used to skip repeating steps on next `match` call.\n  this.__index__ = -1\n  this.__last_index__ = -1 // Next scan position\n  this.__schema__ = ''\n  this.__text_cache__ = ''\n\n  this.__schemas__ = assign({}, defaultSchemas, schemas)\n  this.__compiled__ = {}\n\n  this.__tlds__ = tlds_default\n  this.__tlds_replaced__ = false\n\n  this.re = {}\n\n  compile(this)\n}\n\n/** chainable\n * LinkifyIt#add(schema, definition)\n * - schema (String): rule name (fixed pattern prefix)\n * - definition (String|RegExp|Object): schema definition\n *\n * Add new rule definition. See constructor description for details.\n **/\nLinkifyIt.prototype.add = function add (schema, definition) {\n  this.__schemas__[schema] = definition\n  compile(this)\n  return this\n}\n\n/** chainable\n * LinkifyIt#set(options)\n * - options (Object): { fuzzyLink|fuzzyEmail|fuzzyIP: true|false }\n *\n * Set recognition options for links without schema.\n **/\nLinkifyIt.prototype.set = function set (options) {\n  this.__opts__ = assign(this.__opts__, options)\n  return this\n}\n\n/**\n * LinkifyIt#test(text) -> Boolean\n *\n * Searches linkifiable pattern and returns `true` on success or `false` on fail.\n **/\nLinkifyIt.prototype.test = function test (text) {\n  // Reset scan cache\n  this.__text_cache__ = text\n  this.__index__ = -1\n\n  if (!text.length) { return false }\n\n  let m, ml, me, len, shift, next, re, tld_pos, at_pos\n\n  // try to scan for link with schema - that's the most simple rule\n  if (this.re.schema_test.test(text)) {\n    re = this.re.schema_search\n    re.lastIndex = 0\n    while ((m = re.exec(text)) !== null) {\n      len = this.testSchemaAt(text, m[2], re.lastIndex)\n      if (len) {\n        this.__schema__ = m[2]\n        this.__index__ = m.index + m[1].length\n        this.__last_index__ = m.index + m[0].length + len\n        break\n      }\n    }\n  }\n\n  if (this.__opts__.fuzzyLink && this.__compiled__['http:']) {\n    // guess schemaless links\n    tld_pos = text.search(this.re.host_fuzzy_test)\n    if (tld_pos >= 0) {\n      // if tld is located after found link - no need to check fuzzy pattern\n      if (this.__index__ < 0 || tld_pos < this.__index__) {\n        if ((ml = text.match(this.__opts__.fuzzyIP ? this.re.link_fuzzy : this.re.link_no_ip_fuzzy)) !== null) {\n          shift = ml.index + ml[1].length\n\n          if (this.__index__ < 0 || shift < this.__index__) {\n            this.__schema__ = ''\n            this.__index__ = shift\n            this.__last_index__ = ml.index + ml[0].length\n          }\n        }\n      }\n    }\n  }\n\n  if (this.__opts__.fuzzyEmail && this.__compiled__['mailto:']) {\n    // guess schemaless emails\n    at_pos = text.indexOf('@')\n    if (at_pos >= 0) {\n      // We can't skip this check, because this cases are possible:\n      // 192.168.1.1@gmail.com, my.in@example.com\n      if ((me = text.match(this.re.email_fuzzy)) !== null) {\n        shift = me.index + me[1].length\n        next = me.index + me[0].length\n\n        if (this.__index__ < 0 || shift < this.__index__ ||\n            (shift === this.__index__ && next > this.__last_index__)) {\n          this.__schema__ = 'mailto:'\n          this.__index__ = shift\n          this.__last_index__ = next\n        }\n      }\n    }\n  }\n\n  return this.__index__ >= 0\n}\n\n/**\n * LinkifyIt#pretest(text) -> Boolean\n *\n * Very quick check, that can give false positives. Returns true if link MAY BE\n * can exists. Can be used for speed optimization, when you need to check that\n * link NOT exists.\n **/\nLinkifyIt.prototype.pretest = function pretest (text) {\n  return this.re.pretest.test(text)\n}\n\n/**\n * LinkifyIt#testSchemaAt(text, name, position) -> Number\n * - text (String): text to scan\n * - name (String): rule (schema) name\n * - position (Number): text offset to check from\n *\n * Similar to [[LinkifyIt#test]] but checks only specific protocol tail exactly\n * at given position. Returns length of found pattern (0 on fail).\n **/\nLinkifyIt.prototype.testSchemaAt = function testSchemaAt (text, schema, pos) {\n  // If not supported schema check requested - terminate\n  if (!this.__compiled__[schema.toLowerCase()]) {\n    return 0\n  }\n  return this.__compiled__[schema.toLowerCase()].validate(text, pos, this)\n}\n\n/**\n * LinkifyIt#match(text) -> Array|null\n *\n * Returns array of found link descriptions or `null` on fail. We strongly\n * recommend to use [[LinkifyIt#test]] first, for best speed.\n *\n * ##### Result match description\n *\n * - __schema__ - link schema, can be empty for fuzzy links, or `//` for\n *   protocol-neutral  links.\n * - __index__ - offset of matched text\n * - __lastIndex__ - index of next char after mathch end\n * - __raw__ - matched text\n * - __text__ - normalized text\n * - __url__ - link, generated from matched text\n **/\nLinkifyIt.prototype.match = function match (text) {\n  const result = []\n  let shift = 0\n\n  // Try to take previous element from cache, if .test() called before\n  if (this.__index__ >= 0 && this.__text_cache__ === text) {\n    result.push(createMatch(this, shift))\n    shift = this.__last_index__\n  }\n\n  // Cut head if cache was used\n  let tail = shift ? text.slice(shift) : text\n\n  // Scan string until end reached\n  while (this.test(tail)) {\n    result.push(createMatch(this, shift))\n\n    tail = tail.slice(this.__last_index__)\n    shift += this.__last_index__\n  }\n\n  if (result.length) {\n    return result\n  }\n\n  return null\n}\n\n/**\n * LinkifyIt#matchAtStart(text) -> Match|null\n *\n * Returns fully-formed (not fuzzy) link if it starts at the beginning\n * of the string, and null otherwise.\n **/\nLinkifyIt.prototype.matchAtStart = function matchAtStart (text) {\n  // Reset scan cache\n  this.__text_cache__ = text\n  this.__index__ = -1\n\n  if (!text.length) return null\n\n  const m = this.re.schema_at_start.exec(text)\n  if (!m) return null\n\n  const len = this.testSchemaAt(text, m[2], m[0].length)\n  if (!len) return null\n\n  this.__schema__ = m[2]\n  this.__index__ = m.index + m[1].length\n  this.__last_index__ = m.index + m[0].length + len\n\n  return createMatch(this, 0)\n}\n\n/** chainable\n * LinkifyIt#tlds(list [, keepOld]) -> this\n * - list (Array): list of tlds\n * - keepOld (Boolean): merge with current list if `true` (`false` by default)\n *\n * Load (or merge) new tlds list. Those are user for fuzzy links (without prefix)\n * to avoid false positives. By default this algorythm used:\n *\n * - hostname with any 2-letter root zones are ok.\n * - biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф\n *   are ok.\n * - encoded (`xn--...`) root zones are ok.\n *\n * If list is replaced, then exact match for 2-chars root zones will be checked.\n **/\nLinkifyIt.prototype.tlds = function tlds (list, keepOld) {\n  list = Array.isArray(list) ? list : [list]\n\n  if (!keepOld) {\n    this.__tlds__ = list.slice()\n    this.__tlds_replaced__ = true\n    compile(this)\n    return this\n  }\n\n  this.__tlds__ = this.__tlds__.concat(list)\n    .sort()\n    .filter(function (el, idx, arr) {\n      return el !== arr[idx - 1]\n    })\n    .reverse()\n\n  compile(this)\n  return this\n}\n\n/**\n * LinkifyIt#normalize(match)\n *\n * Default normalizer (if schema does not define it's own).\n **/\nLinkifyIt.prototype.normalize = function normalize (match) {\n  // Do minimal possible changes by default. Need to collect feedback prior\n  // to move forward https://github.com/markdown-it/linkify-it/issues/1\n\n  if (!match.schema) { match.url = 'http://' + match.url }\n\n  if (match.schema === 'mailto:' && !/^mailto:/i.test(match.url)) {\n    match.url = 'mailto:' + match.url\n  }\n}\n\n/**\n * LinkifyIt#onCompile()\n *\n * Override to modify basic RegExp-s.\n **/\nLinkifyIt.prototype.onCompile = function onCompile () {\n}\n\nexport default LinkifyIt\n","import { Any, Cc, Z, P } from 'uc.micro'\n\nexport default function (opts) {\n  const re = {}\n  opts = opts || {}\n\n  re.src_Any = Any.source\n  re.src_Cc = Cc.source\n  re.src_Z = Z.source\n  re.src_P = P.source\n\n  // \\p{\\Z\\P\\Cc\\CF} (white spaces + control + format + punctuation)\n  re.src_ZPCc = [re.src_Z, re.src_P, re.src_Cc].join('|')\n\n  // \\p{\\Z\\Cc} (white spaces + control)\n  re.src_ZCc = [re.src_Z, re.src_Cc].join('|')\n\n  // Experimental. List of chars, completely prohibited in links\n  // because can separate it from other part of text\n  const text_separators = '[><\\uff5c]'\n\n  // All possible word characters (everything without punctuation, spaces & controls)\n  // Defined via punctuation & spaces to save space\n  // Should be something like \\p{\\L\\N\\S\\M} (\\w but without `_`)\n  re.src_pseudo_letter = '(?:(?!' + text_separators + '|' + re.src_ZPCc + ')' + re.src_Any + ')'\n  // The same as abothe but without [0-9]\n  // var src_pseudo_letter_non_d = '(?:(?![0-9]|' + src_ZPCc + ')' + src_Any + ')';\n\n  re.src_ip4 =\n\n    '(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)'\n\n  // Prohibit any of \"@/[]()\" in user/pass to avoid wrong domain fetch.\n  re.src_auth = '(?:(?:(?!' + re.src_ZCc + '|[@/\\\\[\\\\]()]).)+@)?'\n\n  re.src_port =\n\n    '(?::(?:6(?:[0-4]\\\\d{3}|5(?:[0-4]\\\\d{2}|5(?:[0-2]\\\\d|3[0-5])))|[1-5]?\\\\d{1,4}))?'\n\n  re.src_host_terminator =\n\n    '(?=$|' + text_separators + '|' + re.src_ZPCc + ')' +\n    '(?!' + (opts['---'] ? '-(?!--)|' : '-|') + '_|:\\\\d|\\\\.-|\\\\.(?!$|' + re.src_ZPCc + '))'\n\n  re.src_path =\n\n    '(?:' +\n      '[/?#]' +\n        '(?:' +\n          '(?!' + re.src_ZCc + '|' + text_separators + '|[()[\\\\]{}.,\"\\'?!\\\\-;]).|' +\n          '\\\\[(?:(?!' + re.src_ZCc + '|\\\\]).)*\\\\]|' +\n          '\\\\((?:(?!' + re.src_ZCc + '|[)]).)*\\\\)|' +\n          '\\\\{(?:(?!' + re.src_ZCc + '|[}]).)*\\\\}|' +\n          '\\\\\"(?:(?!' + re.src_ZCc + '|[\"]).)+\\\\\"|' +\n          \"\\\\'(?:(?!\" + re.src_ZCc + \"|[']).)+\\\\'|\" +\n\n          // allow `I'm_king` if no pair found\n          \"\\\\'(?=\" + re.src_pseudo_letter + '|[-])|' +\n\n          // google has many dots in \"google search\" links (#66, #81).\n          // github has ... in commit range links,\n          // Restrict to\n          // - english\n          // - percent-encoded\n          // - parts of file path\n          // - params separator\n          // until more examples found.\n          '\\\\.{2,}[a-zA-Z0-9%/&]|' +\n\n          '\\\\.(?!' + re.src_ZCc + '|[.]|$)|' +\n          (opts['---']\n            ? '\\\\-(?!--(?:[^-]|$))(?:-*)|' // `---` => long dash, terminate\n            : '\\\\-+|'\n          ) +\n          // allow `,,,` in paths\n          ',(?!' + re.src_ZCc + '|$)|' +\n\n          // allow `;` if not followed by space-like char\n          ';(?!' + re.src_ZCc + '|$)|' +\n\n          // allow `!!!` in paths, but not at the end\n          '\\\\!+(?!' + re.src_ZCc + '|[!]|$)|' +\n\n          '\\\\?(?!' + re.src_ZCc + '|[?]|$)' +\n        ')+' +\n      '|\\\\/' +\n    ')?'\n\n  // Allow anything in markdown spec, forbid quote (\") at the first position\n  // because emails enclosed in quotes are far more common\n  re.src_email_name =\n\n    '[\\\\-;:&=\\\\+\\\\$,\\\\.a-zA-Z0-9_][\\\\-;:&=\\\\+\\\\$,\\\\\"\\\\.a-zA-Z0-9_]*'\n\n  re.src_xn =\n\n    'xn--[a-z0-9\\\\-]{1,59}'\n\n  // More to read about domain names\n  // http://serverfault.com/questions/638260/\n\n  re.src_domain_root =\n\n    // Allow letters & digits (http://test1)\n    '(?:' +\n      re.src_xn +\n      '|' +\n      re.src_pseudo_letter + '{1,63}' +\n    ')'\n\n  re.src_domain =\n\n    '(?:' +\n      re.src_xn +\n      '|' +\n      '(?:' + re.src_pseudo_letter + ')' +\n      '|' +\n      '(?:' + re.src_pseudo_letter + '(?:-|' + re.src_pseudo_letter + '){0,61}' + re.src_pseudo_letter + ')' +\n    ')'\n\n  re.src_host =\n\n    '(?:' +\n    // Don't need IP check, because digits are already allowed in normal domain names\n    //   src_ip4 +\n    // '|' +\n      '(?:(?:(?:' + re.src_domain + ')\\\\.)*' + re.src_domain/* _root */ + ')' +\n    ')'\n\n  re.tpl_host_fuzzy =\n\n    '(?:' +\n      re.src_ip4 +\n    '|' +\n      '(?:(?:(?:' + re.src_domain + ')\\\\.)+(?:%TLDS%))' +\n    ')'\n\n  re.tpl_host_no_ip_fuzzy =\n\n    '(?:(?:(?:' + re.src_domain + ')\\\\.)+(?:%TLDS%))'\n\n  re.src_host_strict =\n\n    re.src_host + re.src_host_terminator\n\n  re.tpl_host_fuzzy_strict =\n\n    re.tpl_host_fuzzy + re.src_host_terminator\n\n  re.src_host_port_strict =\n\n    re.src_host + re.src_port + re.src_host_terminator\n\n  re.tpl_host_port_fuzzy_strict =\n\n    re.tpl_host_fuzzy + re.src_port + re.src_host_terminator\n\n  re.tpl_host_port_no_ip_fuzzy_strict =\n\n    re.tpl_host_no_ip_fuzzy + re.src_port + re.src_host_terminator\n\n  //\n  // Main rules\n  //\n\n  // Rude test fuzzy links by host, for quick deny\n  re.tpl_host_fuzzy_test =\n\n    'localhost|www\\\\.|\\\\.\\\\d{1,3}\\\\.|(?:\\\\.(?:%TLDS%)(?:' + re.src_ZPCc + '|>|$))'\n\n  re.tpl_email_fuzzy =\n\n      '(^|' + text_separators + '|\"|\\\\(|' + re.src_ZCc + ')' +\n      '(' + re.src_email_name + '@' + re.tpl_host_fuzzy_strict + ')'\n\n  re.tpl_link_fuzzy =\n      // Fuzzy link can't be prepended with .:/\\- and non punctuation.\n      // but can start with > (markdown blockquote)\n      '(^|(?![.:/\\\\-_@])(?:[$+<=>^`|\\uff5c]|' + re.src_ZPCc + '))' +\n      '((?![$+<=>^`|\\uff5c])' + re.tpl_host_port_fuzzy_strict + re.src_path + ')'\n\n  re.tpl_link_no_ip_fuzzy =\n      // Fuzzy link can't be prepended with .:/\\- and non punctuation.\n      // but can start with > (markdown blockquote)\n      '(^|(?![.:/\\\\-_@])(?:[$+<=>^`|\\uff5c]|' + re.src_ZPCc + '))' +\n      '((?![$+<=>^`|\\uff5c])' + re.tpl_host_port_no_ip_fuzzy_strict + re.src_path + ')'\n\n  return re\n}\n","// main.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2021 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { sprintf, strftime, text_eq, string_utf8_index } from \"./utils.js\";\nimport {\n    hasClass, addClass, removeClass, toggleClass, classList,\n    handle_ui, $e, input_is_checkboxlike\n    } from \"./ui.js\";\nimport { event_key } from \"./ui-key.js\";\nimport \"./ui-autogrow.js\";\nimport \"./ui-range.js\";\nimport \"./ui-sessionlist.js\";\nimport { hoturl } from \"./hoturl.js\";\nimport { api_conditioner } from \"./xhr.js\";\nimport { tooltip } from \"./tooltip.js\";\nimport \"./pset.js\";\nimport { Filediff } from \"./diff.js\";\nimport \"./diff-markdown.js\";\nimport { Note } from \"./note.js\";\nimport \"./note-edit.js\";\nimport { render_text, render_feedback_list } from \"./render.js\";\nimport \"./render-terminal.js\";\nimport { run } from \"./run.js\";\nimport { run_settings_load } from \"./run-settings.js\";\nimport { grgraph } from \"./grgraph-ui.js\";\nimport \"./grgraph-highlight.js\";\nimport { GradeEntry, GradeSheet } from \"./gradeentry.js\";\nimport \"./gc-checkbox.js\";\nimport \"./gc-letter.js\";\nimport \"./gc-multicheckbox.js\";\nimport \"./gc-select.js\";\nimport \"./gc-markdown.js\";\nimport \"./gc-timermark.js\";\nimport \"./ptable-grades.js\";\nimport \"./ptable-diff.js\";\nimport \"./ptable-run.js\";\nimport { pa_pset_table } from \"./ptable.js\";\nimport { SearchParser, SearchExpr } from \"./search.js\";\nimport LinkifyIt from \"linkify-it\";\nwindow.markdownit.linkify = LinkifyIt();\nwindow.markdownit.linkify.set({fuzzyEmail: false, \"---\": true});\n\nfunction $$(id) {\n    return document.getElementById(id);\n}\n\n// geometry\n$.fn.extend({\n    geometry: function (outer) {\n        var g, d;\n        if (this[0] == window) {\n            g = {left: this.scrollLeft(), top: this.scrollTop()};\n        } else if (this.length == 1 && this[0].getBoundingClientRect) {\n            g = $.extend({}, this[0].getBoundingClientRect());\n            if ((d = window.pageXOffset))\n                g.left += d, g.right += d;\n            if ((d = window.pageYOffset))\n                g.top += d, g.bottom += d;\n            if (!(\"width\" in g)) {\n                g.width = g.right - g.left;\n                g.height = g.bottom - g.top;\n            }\n            return g;\n        } else {\n            g = this.offset();\n        }\n        if (g) {\n            g.width = outer ? this.outerWidth() : this.width();\n            g.height = outer ? this.outerHeight() : this.height();\n            g.right = g.left + g.width;\n            g.bottom = g.top + g.height;\n        }\n        return g;\n    },\n    scrollIntoView: function (opts) {\n        opts = opts || {};\n        for (let i = 0; i !== this.length; ++i) {\n            let p = $(this[i]).geometry(), x = this[i].parentNode;\n            while (x && x.tagName && $(x).css(\"overflow-y\") === \"visible\") {\n                x = x.parentNode;\n            }\n            x = x && x.tagName ? x : window;\n            let w = $(x).geometry();\n            if (p.top < w.top + (opts.marginTop || 0) || opts.atTop) {\n                let pos = Math.max(p.top - (opts.marginTop || 0), 0);\n                if (x === window) {\n                    x.scrollTo(x.scrollX, pos);\n                } else {\n                    x.scrollTop = pos;\n                }\n            } else if (p.bottom > w.bottom - (opts.marginBottom || 0)) {\n                let pos = Math.max(p.bottom + (opts.marginBottom || 0) - w.height, 0);\n                if (x === window) {\n                    x.scrollTo(x.scrollX, pos);\n                } else {\n                    x.scrollTop = pos;\n                }\n            }\n        }\n        return this;\n    },\n    serializeWith: function(data) {\n        var s = this.serialize();\n        if (s != null && data) {\n            let sep = s.length && s[s.length - 1] != \"&\" ? \"&\" : \"\";\n            for (let i in data) {\n                if (data[i] != null) {\n                    s += sep + encodeURIComponent(i) + \"=\" + encodeURIComponent(data[i]);\n                    sep = \"&\";\n                }\n            }\n        }\n        return s;\n    }\n});\n\n\n// initialization\nvar set_local_time = (function () {\nvar servhr24, showdifference = false;\nfunction set_local_time(elt, servtime) {\n    var d, s;\n    if (elt && typeof elt == \"string\")\n        elt = $$(elt);\n    if (elt && showdifference) {\n        d = new Date(servtime * 1000);\n        if (servhr24)\n            s = strftime(\"%A %#e %b %Y %#R your time\", d);\n        else\n            s = strftime(\"%A %#e %b %Y %#r your time\", d);\n        if (elt.tagName == \"SPAN\") {\n            elt.textContent = \" (\" + s + \")\";\n            elt.style.display = \"inline\";\n        } else {\n            elt.textContent = s;\n            elt.style.display = \"block\";\n        }\n    }\n}\nset_local_time.initialize = function (servzone, hr24) {\n    servhr24 = hr24;\n    // print local time if server time is in a different time zone\n    showdifference = Math.abs((new Date).getTimezoneOffset() - servzone) >= 60;\n};\nreturn set_local_time;\n})();\n\n\nvar hotcrp_onload = [];\nfunction hotcrp_load(arg) {\n    if (!arg)\n        for (var x = 0; x < hotcrp_onload.length; ++x)\n            hotcrp_onload[x]();\n    else if (typeof arg === \"string\")\n        hotcrp_onload.push(hotcrp_load[arg]);\n    else\n        hotcrp_onload.push(arg);\n}\nhotcrp_load.time = function (servzone, hr24) {\n    set_local_time.initialize(servzone, hr24);\n};\n\n\nvar foldmap = {}, foldsession_unique = 1;\nfunction fold(which, dofold, foldtype) {\n    var i, elt, selt, opentxt, closetxt, foldnum, foldnumid;\n    if (which instanceof Array) {\n        for (i = 0; i < which.length; i++)\n            fold(which[i], dofold, foldtype);\n\n    } else if (typeof which == \"string\") {\n        foldnum = foldtype;\n        if (foldmap[which] != null && foldmap[which][foldtype] != null)\n            foldnum = foldmap[which][foldtype];\n        foldnumid = foldnum ? foldnum : \"\";\n\n        elt = $$(\"fold\" + which) || $$(which);\n        fold(elt, dofold, foldnum);\n\n        // check for session\n        if ((selt = $$('foldsession.' + which + foldnumid)))\n            selt.src = selt.src.replace(/val=.*/, 'val=' + (dofold ? 1 : 0) + '&u=' + foldsession_unique++);\n        else if ((selt = $$('foldsession.' + which)))\n            selt.src = selt.src.replace(/val=.*/, 'val=' + (dofold ? 1 : 0) + '&sub=' + (foldtype || foldnumid) + '&u=' + foldsession_unique++);\n\n        // check for focus\n        if (!dofold && (selt = $$(\"fold\" + which + foldnumid + \"_d\"))) {\n            if (selt.setSelectionRange && selt.hotcrp_ever_focused == null) {\n                selt.setSelectionRange(selt.value.length, selt.value.length);\n                selt.hotcrp_ever_focused = true;\n            }\n            selt.focus();\n        }\n\n    } else if (which) {\n        foldnumid = foldtype ? foldtype : \"\";\n        opentxt = \"fold\" + foldnumid + \"o\";\n        closetxt = \"fold\" + foldnumid + \"c\";\n        if (dofold == null && which.className.indexOf(opentxt) >= 0)\n            dofold = true;\n        if (dofold)\n            which.className = which.className.replace(opentxt, closetxt);\n        else\n            which.className = which.className.replace(closetxt, opentxt);\n        // IE won't actually do the fold unless we yell at it\n        if (document.recalc)\n            try {\n                which.innerHTML = which.innerHTML + \"\";\n            } catch {\n            }\n    }\n\n    return false;\n}\n\nfunction foldup(evt, opts) {\n    let e = this, wantopen, m;\n    if (typeof opts === \"number\") {\n        opts = {n: opts};\n    } else if (!opts) {\n        opts = {};\n    }\n    if (this.tagName === \"DIV\"\n        && evt\n        && evt.target.closest(\"a\")\n        && !opts.required) {\n        return;\n    }\n    if (!(\"n\" in opts)\n        && e.hasAttribute(\"data-fold-target\")\n        && (m = e.getAttribute(\"data-fold-target\").match(/^((?![#\\d]|[couU]$)[^#]*)#?(\\d*)([couU]?)$/))) {\n        if (m[1] !== \"\") {\n            e = document.getElementById(m[1]);\n        }\n        opts.n = parseInt(m[2]) || 0;\n        if (!(\"open\" in opts) && m[3] !== \"\") {\n            if (this.tagName === \"INPUT\"\n                && input_is_checkboxlike(this)\n                && (this.checked ? m[3] === \"u\" : m[3] === \"U\")) {\n                m[3] = \"c\";\n            }\n            opts.open = m[3] !== \"c\";\n        }\n    }\n    var foldname = \"fold\" + (opts.n || \"\");\n    while (e && ((!hasClass(e, \"has-fold\") && (!e.id || !e.id.startsWith(\"fold\")))\n                 || (opts.n != null && !hasClass(e, foldname + \"c\") && !hasClass(e, foldname + \"o\")))) {\n        e = e.parentNode;\n    }\n    if (!e) {\n        return true;\n    }\n    if (opts.n == null) {\n        for (const cl of classList(e)) {\n            if (cl.startsWith(\"fold\")\n                && (m = cl.match(/^fold(\\d*)[oc]$/))\n                && (opts.n == null || +m[1] < opts.n)) {\n                opts.n = +m[1];\n                foldname = \"fold\" + (opts.n || \"\");\n            }\n        }\n    }\n    if (!(\"open\" in opts)\n        && (this.tagName === \"INPUT\" || this.tagName === \"SELECT\" || this.tagName === \"TEXTAREA\")) {\n        let value = null;\n        if (this.type === \"checkbox\") {\n            opts.open = this.checked;\n        } else if (this.type === \"radio\") {\n            if (!this.checked)\n                return true;\n            value = this.value;\n        } else if (this.type === \"select-one\") {\n            value = this.selectedIndex < 0 ? \"\" : this.options[this.selectedIndex].value;\n        } else if (this.type === \"text\" || this.type === \"textarea\") {\n            opts.open = this.value !== \"\";\n        }\n        if (value !== null) {\n            const vstr = e.getAttribute(\"data-\" + foldname + \"-values\") || \"\",\n                values = $.trim(vstr) === \"\" ? [] : vstr.split(/\\s+/);\n            opts.open = values.indexOf(value) >= 0;\n        }\n    }\n    wantopen = hasClass(e, foldname + \"c\");\n    if (!(\"open\" in opts) || !!opts.open === wantopen) {\n        opts.open = wantopen;\n        fold(e, !wantopen, opts.n || 0);\n        $(e).trigger($.Event(\"foldtoggle\", {which: opts}));\n    }\n    if (this.hasAttribute(\"aria-expanded\")) {\n        this.setAttribute(\"aria-expanded\", wantopen ? \"true\" : \"false\");\n    }\n    if (evt\n        && typeof evt === \"object\"\n        && evt.type === \"click\"\n        && !hasClass(evt.target, \"uic\")) {\n        handle_ui.stopPropagation(evt);\n        evt.preventDefault(); // needed for expanders despite handle_ui!\n    }\n}\n\nhandle_ui.on(\"js-foldup\", foldup);\n\nhandle_ui.on(\"js-hide-error\", function () {\n    addClass(this, \"hidden\");\n});\n\nhandle_ui.on(\"js-pset-upload-grades\", function () {\n    $(\"#upload\").removeClass(\"hidden\");\n});\n\nhandle_ui.on(\"pa-signin-radio\", function () {\n    let v;\n    if (this.value === \"login\") {\n        fold(\"logingroup\", false);\n        fold(\"logingroup\", false, 2);\n        v = \"Sign in\";\n    } else if (this.value === \"forgot\") {\n        fold(\"logingroup\", true);\n        fold(\"logingroup\", false, 2);\n        v = \"Reset password\";\n    } else if (this.value === \"new\") {\n        fold(\"logingroup\", true);\n        fold(\"logingroup\", true, 2);\n        v = \"Create account\";\n    }\n    document.getElementById(\"signin\").value = v;\n});\n\n\n// SAVE FLOW\n// * Every form containing unsaved grades has `.pa-dirty`\n// * Every psetinfo containing unsaved grades is included in `gv_dirtypi`\n//\n// When a grade entry changes:\n// * Mark the form with `.pa-dirty`, add the psetinfo to `gv_dirtypi`\n// * Soon, call `api_conditioner.then(gv_save_some)`\n// * That dequeues a psetinfo.\n//   * If psetinfo has `.pa-outstanding`, requeue it.\n//   * Otherwise:\n//     * Mark psetinfo as `.pa-outstanding`\n//     * Collect all changed grades, removing `.pa-dirty`\n//     * Save the grades\n//     * On response, remove `.pa-outstanding`\n\nlet gv_dirtypi = [], gv_save_queued = false;\n\nhandle_ui.on(\"input.pa-gradevalue\", function () {\n    const f = this.form;\n    if (f && hasClass(f, \"pa-pv\") && !hasClass(f, \"pa-dirty\")) {\n        gv_save_after(f, 8000);\n    }\n});\n\nhandle_ui.on(\"change.pa-gradevalue\", function () {\n    const f = this.form;\n    let ge;\n    if (f && hasClass(f, \"pa-pv\")) {\n        gv_save_after(f, 0);\n    } else if (this.type === \"hidden\" && (ge = GradeEntry.closest(this))) {\n        queueMicrotask(() => { ge.gc.update_edit.call(ge, this, +this.value, {}); });\n    }\n});\n\nhandle_ui.on(\"click.pa-gradevalue\", function () {\n    if (this.type === \"checkbox\" || this.type === \"radio\") {\n        queueMicrotask(() => { $(this).trigger(\"change\"); });\n    }\n});\n\nhandle_ui.on(\"pa-pv\", function (event) {\n    event.preventDefault();\n    gv_save_after(this, 0);\n});\n\nfunction gv_save_after(f, t) {\n    if (t > 0 && !hasClass(f, \"pa-dirty\")) {\n        setTimeout(gv_mark_changed, t);\n    }\n    addClass(f, \"pa-dirty\");\n    const pi = f.closest(\".pa-psetinfo\");\n    if (gv_dirtypi.indexOf(pi) < 0) {\n        gv_dirtypi.push(pi);\n    }\n    if (t === 0) {\n        gv_add_spinner(f);\n        gv_mark_changed();\n    }\n}\n\nfunction gv_add_spinner(f) {\n    let sm = f.querySelector(\".pa-save-message\");\n    sm || f.appendChild((sm = $e(\"span\", \"pa-save-message compact\")));\n    sm.className = \"pa-save-message compact\";\n    sm.replaceChildren($e(\"span\", \"spinner\"));\n}\n\nfunction gv_mark_changed() {\n    if (gv_dirtypi.length > 0 && !gv_save_queued) {\n        gv_save_queued = true;\n        api_conditioner.then(gv_save_some);\n    }\n}\n\nfunction gv_save_some() {\n    gv_save_queued = false;\n    const pi = gv_dirtypi[0];\n    if (!pi) {\n        api_conditioner.done();\n        return;\n    } else if (hasClass(pi, \"pa-outstanding\")) {\n        api_conditioner.retry(gv_save_some);\n        return;\n    }\n    gv_dirtypi.shift();\n\n    const g = {}, og = {}, gi = GradeSheet.closest(pi), fs = [];\n    $(pi).find(\".pa-dirty .pa-gradevalue\").each(function () {\n        if (this.tagName !== \"INPUT\" && this.tagName !== \"TEXTAREA\" && this.tagName !== \"SELECT\") {\n            return;\n        }\n        const ge = gi.xentry(this.name),\n            ov = ge ? ge.value_in(gi) : null;\n        let nv;\n        if ((this.type !== \"checkbox\" && this.type !== \"radio\")\n            || this.checked) {\n            nv = this.value;\n        } else if (this.type === \"checkbox\") {\n            nv = 0;\n        }\n        if (nv != null && (ov == null || nv != ov)) {\n            ov == null || (og[this.name] = ov);\n            g[this.name] = nv;\n            if (fs.indexOf(this.form) < 0) {\n                fs.push(this.form);\n            }\n        }\n    });\n\n    $(pi).find(\".pa-dirty .pa-save-message.compact\").remove();\n    $(pi).find(\".pa-dirty\").removeClass(\"pa-dirty\");\n\n    if (fs.length === 0) {\n        api_conditioner.done();\n    } else {\n        addClass(pi, \"pa-outstanding\");\n        for (const f of fs) {\n            gv_add_spinner(f);\n        }\n        $.ajax(hoturl(\"=api/grade\", {psetinfo: pi}), {\n            data: {grades: g, oldgrades: og},\n            method: \"POST\", cache: false, dataType: \"json\",\n            success: function (data) {\n                for (const f of fs) {\n                    gv_resolve_change(f, data);\n                }\n                removeClass(pi, \"pa-outstanding\");\n                data.ok && GradeSheet.store(pi, data);\n                api_conditioner.done();\n            }\n        });\n    }\n\n    gv_mark_changed();\n}\n\nfunction gv_resolve_change(f, data) {\n    const sm = f.querySelector(\".pa-save-message\");\n    let ge;\n    if (data.ok) {\n        if (data.answer_timeout\n            && (ge = f.closest(\".pa-grade\"))\n            && hasClass(ge, \"pa-ans\")) {\n            removeClass(sm, \"compact\");\n            sm.replaceChildren($e(\"strong\", \"err\", \"Your exam period has closed.\"), \" Your change was saved anyway, but the version used for grading will be selected from within the exam window.\");\n        } else if (hasClass(f, \"pa-dirty\")) {\n            sm.remove();\n        } else {\n            addClass(sm, \"compact\");\n            addClass(sm, \"fadeout\");\n            sm.replaceChildren($e(\"span\", \"savesuccess\"));\n        }\n    } else {\n        removeClass(sm, \"compact\"),\n        sm.replaceChildren($e(\"strong\", \"err\", data.error));\n    }\n}\n\n\nfunction pa_resolve_grade() {\n    removeClass(this, \"need-pa-grade\");\n    const ge = GradeEntry.closest(this),\n        gi = GradeSheet.closest(this);\n    if (ge && gi) {\n        const e = ge.render(gi);\n        this.parentElement.replaceChild(this, e);\n        gi.update_at(e);\n        if (ge.landmark_range && this.closest(\".pa-gradebox\")) {\n            // XXX maybe calling compute_landmark_range_grade too often\n            ge.landmark_grade(this.firstChild);\n        }\n        if (this.hasAttribute(\"data-pa-landmark-buttons\")) {\n            const lb = JSON.parse(this.getAttribute(\"data-pa-landmark-buttons\"));\n            for (const lbb of lb) {\n                if (typeof lbb === \"string\") {\n                    $(e).find(\".pa-pv\").append(lbb);\n                } else if (lbb.className) {\n                    $(e).find(\".pa-pv\").append($e(\"button\", {type: \"button\", \"class\": \"uic uikd pa-grade-button\", \"data-pa-grade-button\": lbb.className}, lbb.title));\n                }\n            }\n        }\n    }\n}\n\nhandle_ui.on(\"pa-grade-button\", function (event) {\n    if (event.type === \"keydown\") {\n        var k = event_key(event), gr;\n        if (event.ctrlKey\n            && (k === \"n\" || k === \"N\" || k === \"p\" || k === \"P\" || k === \"A\")\n            && (gr = this.closest(\".pa-grade\"))) {\n            var gradekey = gr.getAttribute(\"data-pa-grade\"),\n                buttons = $(\".pa-grade[data-pa-grade=\" + gradekey + \"] .pa-grade-button[data-pa-grade-button=\" + this.getAttribute(\"data-pa-grade-button\") + \"]\").filter(\":visible\"),\n                i = buttons.toArray().indexOf(this);\n            if (i >= 0) {\n                if (k === \"n\" || k === \"N\" || k === \"p\" || k === \"P\") {\n                    var delta = k === \"n\" || k === \"N\" ? 1 : buttons.length - 1,\n                        button = buttons[(i + delta) % buttons.length],\n                        dg = button.closest(\".pa-dg\");\n                    dg && $(dg).scrollIntoView({marginTop: 24, atTop: true});\n                    button.focus();\n                    $(button).scrollIntoView();\n                } else {\n                    buttons.click();\n                }\n                event.preventDefault();\n            }\n        }\n    } else if (event.type === \"click\") {\n        handle_ui.trigger.call(this, this.getAttribute(\"data-pa-grade-button\"), event);\n    }\n});\n\nfunction button_position_delta(button) {\n    return button.getBoundingClientRect().top - window.scrollY;\n}\n\nfunction button_reposition_delta(button, delta) {\n    queueMicrotask(() => {\n        const y = button.getBoundingClientRect().top - delta;\n        window.scrollBy(0, y - window.scrollY);\n    })\n}\n\nhandle_ui.on(\"pa-grade-toggle-description\", function (event) {\n    const me = this.closest(\".pa-gsection\"),\n        $es = event.metaKey ? $(\".pa-gsection\") : $(me),\n        show = hasClass(me, \"pa-hide-description\"),\n        tep = button_position_delta(this);\n    tooltip.erase();\n    $es.each(function () {\n        toggleClass(this, \"pa-hide-description\", !show);\n        $(this).find(\".pa-grade-toggle-description > span\").toggleClass(\"filter-gray\", !show);\n    });\n    button_reposition_delta(this, tep);\n});\n\nhandle_ui.on(\"pa-grade-toggle-markdown\", function (event) {\n    const me = this.closest(\".pa-gsection\"),\n        $es = event.metaKey ? $(\".pa-gsection\") : $(me),\n        show = hasClass(this.firstChild, \"filter-gray\"),\n        tep = button_position_delta(this);\n    tooltip.erase();\n    $es.each(function () {\n        const gi = GradeSheet.closest(this);\n        $(this).find(\".pa-grade\").each(function () {\n            const ge = gi.entries[this.getAttribute(\"data-pa-grade\")];\n            if (ge.type === \"markdown\"\n                && hasClass(this, \"pa-markdown\") !== show) {\n                toggleClass(this, \"pa-markdown\", show);\n                if (!hasClass(this, \"e\")) {\n                    gi.remount_at(this, 0);\n                    gi.update_at(this);\n                }\n            }\n        });\n        $(this).find(\".pa-grade-toggle-markdown > span\").toggleClass(\"filter-gray\", !show);\n    });\n    button_reposition_delta(this, tep);\n});\n\nhandle_ui.on(\"pa-grade-toggle-answer\", function (event) {\n    const me = this.closest(\".pa-gsection\"),\n        $es = event.metaKey ? $(\".pa-gsection\") : $(me),\n        mode = hasClass(this.firstChild, \"filter-gray\") ? 2 : 0,\n        tep = button_position_delta(this);\n    tooltip.erase();\n    $es.each(function () {\n        const gi = GradeSheet.closest(this);\n        $(this).find(\".pa-grade\").each(function () {\n            const ge = gi.entries[this.getAttribute(\"data-pa-grade\")];\n            if (ge.answer) {\n                gi.remount_at(this, mode);\n                gi.update_at(this, {reset: true});\n            }\n        });\n        $(this).find(\".pa-grade-toggle-answer > span\").toggleClass(\"filter-gray\", mode === 0);\n        $(this).find(\".pa-grade-toggle-markdown\").toggleClass(\"hidden\", mode !== 0);\n    });\n    button_reposition_delta(this, tep);\n});\n\nfunction gradelist_elementmap(glelt) {\n    const geltmap = {};\n    let ch = glelt.firstChild;\n    while (ch) {\n        if (hasClass(ch, \"pa-grade\")) {\n            geltmap[ch.getAttribute(\"data-pa-grade\")] = ch;\n        }\n        if (hasClass(ch, \"pa-dg\")) {\n            ch = ch.firstChild;\n        } else {\n            while (!ch.nextSibling && hasClass(ch.parentElement, \"pa-dg\")) {\n                ch = ch.parentElement;\n            }\n            ch = ch.nextSibling;\n        }\n    }\n    return geltmap;\n}\n\nfunction gradelist_make_sections(glelt, gi) {\n    const section_class = \"pa-dg pa-gsection\".concat(\n        gi.scores_editable ? \" pa-hide-description\" : \"\",\n        hasClass(glelt, \"is-main\") ? \" is-main\" : \"\"),\n        new_sections = [];\n    let ch = glelt.firstChild, section = null;\n    for (const k of gi.value_order) {\n        const ge = gi.entries[k];\n        if ((ge.concealed && !gi.scores_editable)\n            || (section !== null && ge.type !== \"section\")) {\n            continue;\n        }\n        while (ch && !hasClass(ch, \"pa-dg\") && !hasClass(ch, \"pa-grade\")) {\n            ch = ch.nextSibling;\n        }\n        if (!ch\n            || !hasClass(ch, \"pa-gsection\")\n            || ch.getAttribute(\"data-pa-grade\") !== k) {\n            const div = document.createElement(\"div\");\n            div.className = section_class;\n            div.setAttribute(\"data-pa-grade\", k);\n            glelt.insertBefore(div, ch);\n            ch = div;\n            new_sections.push(ch);\n        }\n        if (gi.section_wants_sidebar(ge)\n            && !hasClass(ch, \"pa-with-sidebar\")) {\n            addClass(ch, \"pa-with-sidebar\");\n            const sb = document.createElement(\"div\");\n            sb.className = \"pa-sidebar\";\n            const sdiv = document.createElement(\"div\");\n            sdiv.className = \"pa-dg is-mainsb\";\n            ch.append(sb, sdiv);\n        }\n        section = ch;\n        ch = ch.nextSibling;\n    }\n    return new_sections;\n}\n\nfunction gradelist_section_button(klass, label) {\n    const button = document.createElement(\"button\");\n    button.className = \"btn-t ui small need-tooltip \" + klass;\n    button.setAttribute(\"aria-label\", label);\n    button.append(document.createElement(\"span\"));\n    button.firstChild.className = \"filter-gray\";\n    return button;\n}\n\nfunction gradelist_resolve_section(gi, sectione) {\n    const ge = gi.entries[sectione.getAttribute(\"data-pa-grade\")];\n\n    // mark user prefix\n    let prefix = null;\n    if (gi.user && hasClass(document.body, \"pa-multiuser\")) {\n        prefix = document.createElement(\"span\");\n        prefix.className = \"pa-fileref-context\";\n        prefix.textContent = gi.user + \" / \";\n    }\n\n    // mark buttons\n    const buttons = [];\n    if (gi.scores_editable && gi.section_has(ge, xge => xge.description)) {\n        const e = gradelist_section_button(\"pa-grade-toggle-description\", \"Toggle description\");\n        toggleClass(e.firstChild, \"filter-gray\", hasClass(sectione, \"pa-hide-description\"));\n        e.firstChild.textContent = \"📃\";\n        buttons.push(e);\n    }\n    if (gi.scores_editable && gi.section_has(ge, xge => xge.answer && xge.type !== \"section\")) {\n        const e = gradelist_section_button(\"pa-grade-toggle-answer\", \"Toggle answer editing\");\n        e.firstChild.textContent = \"✍️\";\n        buttons.push(e);\n    }\n    if (!gi.answers_editable && gi.section_has(ge, xge => xge.type === \"markdown\")) {\n        const e = gradelist_section_button(\"pa-grade-toggle-markdown\", \"Toggle Markdown\");\n        e.firstChild.className = \"icon-markdown filter-gray\";\n        buttons.push(e);\n    }\n\n    // find grade parent\n    let parente = sectione;\n    while (!parente.firstChild || !hasClass(parente.firstChild, \"pa-p\")) {\n        parente = hasClass(parente, \"pa-dg\") ? parente.firstChild : parente.nextSibling;\n    }\n\n    // add section header if required\n    let headere = parente.firstChild;\n    if (!hasClass(headere, \"pa-p-section\")) {\n        if (!prefix && !buttons.length) {\n            return;\n        }\n        headere = document.createElement(\"div\");\n        headere.className = \"pa-p pa-p-section\";\n        const e = document.createElement(\"label\");\n        e.className = \"pa-pt\";\n        e.textContent = \"—\";\n        headere.appendChild(e);\n        parente.insertBefore(headere, parente.firstChild);\n    }\n\n    // decorate section header\n    if (prefix) {\n        headere.firstChild.insertBefore(prefix, headere.firstChild.firstChild);\n    }\n    if (buttons.length) {\n        const e = document.createElement(\"div\");\n        e.className = \"btnbox ml-3\";\n        e.append(...buttons);\n        headere.firstChild.append(e);\n    }\n\n    // set stickiness and move description out of sticky region\n    addClass(parente, \"pa-with-sticky\");\n    addClass(headere, \"pa-sticky\");\n    const desce = headere.firstChild.nextSibling;\n    if (desce && hasClass(desce, \"pa-pdesc\")) {\n        addClass(desce, \"pa-ptop\");\n        hasClass(headere, \"pa-p-hidden\") && addClass(desce, \"pa-p-hidden\");\n        parente.insertBefore(desce, headere.nextSibling);\n    }\n}\n\nfunction gradelist_finish_sidebar(sidebar, sidebarch) {\n    while (sidebarch) {\n        const next = sidebarch.nextSibling;\n        sidebarch.remove();\n        sidebarch = next;\n    }\n    while (!sidebar.firstChild) {\n        const next = sidebar.parentElement;\n        sidebar.remove();\n        sidebar = next;\n    }\n}\n\nfunction pa_resolve_gradelist() {\n    removeClass(this, \"need-pa-gradelist\");\n    addClass(this, \"pa-gradelist\");\n    const pi = this.closest(\".pa-psetinfo\"),\n        gi = GradeSheet.closest(pi);\n    if (!gi) {\n        return;\n    }\n\n    // obtain list of grade entries\n    const geltmap = gradelist_elementmap(this);\n\n    // set up sections\n    const sectioned = gi.has(xge => xge.description ||\n            xge.answer ||\n            xge.type === \"section\" ||\n            (xge.type === \"markdown\" && gi.answers_editable === false)),\n        new_sections = sectioned ? gradelist_make_sections(this, gi) : [];\n\n    // fill out list of grades\n    let chp = this, ch = chp.firstChild,\n        sidebar = null, sidebarch = null;\n    for (let i = 0; i !== gi.value_order.length; ++i) {\n        const k = gi.value_order[i], ge = gi.entries[k];\n        if (!gi.scores_editable && ge.concealed) {\n            continue;\n        }\n\n        // exit current section if required\n        if (sectioned && chp !== this && ge.type === \"section\") {\n            while (chp !== this) {\n                ch = chp.nextSibling;\n                chp = chp.parentElement;\n            }\n            if (sidebar) {\n                gradelist_finish_sidebar(sidebar, sidebarch);\n                sidebar = sidebarch = null;\n            }\n        }\n\n        // move into group\n        while (ch && !hasClass(ch, \"pa-grade\")) {\n            if (hasClass(ch, \"pa-dg\")) {\n                chp = ch;\n                ch = ch.firstChild;\n            } else {\n                if (hasClass(ch, \"pa-sidebar\")) {\n                    sidebar = ch;\n                }\n                ch = ch.nextSibling;\n            }\n        }\n\n        // add grade\n        let gelt = geltmap[k];\n        if (!gelt || gelt !== ch) {\n            if (gelt) {\n                ge.unmount_at(gelt);\n            } else {\n                gelt = ge.render(gi);\n            }\n            chp.insertBefore(gelt, ch);\n            gi.update_at(gelt);\n            ch = gelt;\n        }\n        delete geltmap[k];\n\n        // add grade to sidebar\n        if (sidebar && !ge.answer) {\n            if (sidebar.className === \"pa-sidebar\") {\n                if (sidebar.firstChild === null) {\n                    const e = document.createElement(\"div\");\n                    e.className = \"pa-gradebox pa-ps\";\n                    sidebar.appendChild(e);\n                }\n                sidebar = sidebar.firstChild;\n                sidebarch = sidebar.firstChild;\n            }\n            if (sidebarch && sidebarch.getAttribute(\"data-pa-grade\") === k) {\n                sidebarch = sidebarch.nextSibling;\n            } else {\n                const e = ge.render(gi);\n                sidebar.insertBefore(e, sidebarch);\n                gi.update_at(e, {sidebar: true});\n            }\n        }\n\n        ch = ch.nextSibling;\n    }\n\n    // finish sidebar\n    if (sidebar) {\n        gradelist_finish_sidebar(sidebar, sidebarch);\n    }\n\n    // remove remaining grades\n    for (const k in geltmap) {\n        const gelt = geltmap[k],\n            ge = gi.entries[gelt.getAttribute(\"data-pa-grade\")];\n        ge.unmount_at(gelt);\n    }\n\n    // resolve sections\n    for (const sectione of new_sections) {\n        gradelist_resolve_section(gi, sectione);\n    }\n\n    // add links\n    if (this.classList.contains(\"want-psetinfo-links\")) {\n        const bb = document.createElement(\"div\");\n        bb.className = \"pa-psetinfo-links btnbox mt-2 mb-2 hidden\";\n        this.append(bb);\n        for (const dir of [true, false]) {\n            const sib = psetinfo_sibling(this, dir);\n            if (sib) {\n                psetinfo_sibling_button(bb, dir);\n                psetinfo_sibling_button(sib.querySelector(\".pa-psetinfo-links\"), !dir);\n            }\n        }\n    }\n}\n\n$(function () {\n    $(\".need-pa-grade\").each(pa_resolve_grade);\n    $(\".need-pa-gradelist\").each(pa_resolve_gradelist);\n});\n\nfunction psetinfo_sibling(elt, prev) {\n    const sibling = prev ? \"previousSibling\" : \"nextSibling\",\n        pi = elt.closest(\".pa-psetinfo\");\n    let xpi = pi;\n    while (xpi && (xpi === pi || xpi.nodeType !== 1 || !xpi.classList.contains(\"pa-psetinfo\"))) {\n        xpi = xpi[sibling];\n    }\n    return xpi;\n}\n\nfunction psetinfo_sibling_button(bbox, prev) {\n    if (bbox && !bbox.querySelector(prev ? \".prev\" : \".next\")) {\n        bbox.classList.remove(\"hidden\");\n        const btn = document.createElement(\"button\");\n        btn.textContent = prev ? \"←\" : \"→\";\n        btn.className = \"ui pa-psetinfo-link \" + (prev ? \"prev\" : \"next\");\n        btn.type = \"button\";\n        bbox[prev ? \"prepend\" : \"append\"](btn);\n    }\n}\n\nhandle_ui.on(\"pa-psetinfo-link\", function () {\n    const xpi = psetinfo_sibling(this, this.classList.contains(\"prev\"));\n    if (xpi && xpi.id) {\n        location.hash = \"#\" + xpi.id;\n    }\n});\n\nfunction pa_render_total(gi, tm) {\n    var ne = 0, nv = 0;\n    for (var k in gi.entries) {\n        if (gi.entries[k].in_total) {\n            ++ne;\n            if (gi.entries[k].student_visible(gi))\n                ++nv;\n        }\n    }\n    const pdiv = document.createElement(\"div\"),\n        ptdiv = document.createElement(\"div\"),\n        pvdiv = document.createElement(\"div\"),\n        gvspan = document.createElement(\"span\"),\n        gdspan = document.createElement(\"span\");\n    pdiv.className = \"pa-total pa-p\" + (ne <= 1 ? \" hidden\" : \"\") + (nv < ne ? \" pa-p-hidden\" : \"\");\n    ptdiv.className = \"pa-pt\";\n    ptdiv.append(gi.total_type === \"subset\" ? \"subtotal\" : \"total\");\n    pvdiv.className = \"pa-pv\";\n    gvspan.className = \"pa-gradevalue pa-gradewidth\";\n    gdspan.className = \"pa-gradedesc\";\n    gdspan.append(\"of \" + tm[1]);\n    pdiv.append(ptdiv, pvdiv);\n    pvdiv.append(gvspan, \" \", gdspan);\n    return pdiv;\n}\n\nfunction pa_loadgrades() {\n    if (!hasClass(this, \"pa-psetinfo\")) {\n        throw new Error(\"bad pa_loadgrades\");\n    }\n    const gi = GradeSheet.closest(this);\n    if (!gi || !gi.value_order) {\n        return;\n    }\n\n    $(this).find(\".need-pa-grade\").each(function () {\n        pa_resolve_grade.call(this, true);\n    });\n\n    $(this).find(\".pa-gradelist\").each(function () {\n        pa_resolve_gradelist.call(this, true);\n    });\n\n    $(this).find(\".pa-grade\").each(function () {\n        gi.update_at(this, {reset: true});\n    });\n\n    // print totals\n    const tm = gi.total_type === \"hidden\" ? [null, null] : [gi.grade_total(), gi.grade_maxtotal],\n          total = tm[0] === null ? \"\" : \"\" + tm[0];\n    if (tm[0] !== null) {\n        $(this).find(\".pa-gradelist:not(.pa-gradebox)\").each(function () {\n            const $t = $(this).find(\".pa-total\");\n            $t.length || $(this).prepend(pa_render_total(gi, tm));\n        });\n    }\n    let drawgraph = false;\n    $(this).find(\".pa-total\").each(function () {\n        toggleClass(this, \"hidden\", total === \"\");\n        const $v = $(this).find(\".pa-gradevalue\");\n        if ($v.text() !== total) {\n            $v.text(total);\n            drawgraph = true;\n        }\n    });\n    if (drawgraph) {\n        $(this).find(\".pa-grgraph\").trigger(\"redrawgraph\");\n    }\n}\n\nhandle_ui.on(\"pa-notes-grade\", function (event) {\n    if (event.type === \"keydown\") {\n        var k = event_key(event), gr;\n        if (event.ctrlKey\n            && (k === \"n\" || k === \"N\" || k === \"p\" || k === \"P\" || k === \"A\")\n            && (gr = this.closest(\".pa-grade\"))) {\n            var gradekey = gr.getAttribute(\"data-pa-grade\"),\n                links = $(\".pa-grade[data-pa-grade=\" + gradekey + \"] .pa-notes-grade\").filter(\":visible\"),\n                i = links.toArray().indexOf(this);\n            if (i >= 0) {\n                if (k === \"n\" || k === \"N\" || k === \"p\" || k === \"P\") {\n                    var delta = k === \"n\" || k === \"N\" ? 1 : links.length - 1,\n                        link = links[(i + delta) % links.length],\n                        dg = link.closest(\".pa-dg\");\n                    dg && $(dg).scrollIntoView({marginTop: 24, atTop: true});\n                    link.focus();\n                    $(link).scrollIntoView();\n                } else {\n                    links.click();\n                }\n                event.preventDefault();\n            }\n        }\n    } else if (event.type === \"click\") {\n        const gv = this.closest(\".pa-grade\").querySelector(\".pa-gradevalue\");\n        if (gv && gv.value != gv.getAttribute(\"data-pa-notes-grade\")) {\n            $(gv).val(gv.getAttribute(\"data-pa-notes-grade\")).change();\n        }\n        event.preventDefault();\n    }\n});\n\n\nfunction pa_beforeunload(evt) {\n    let e = document.querySelector(\".pa-dirty, .pa-outstanding\");\n    if (e) {\n        evt.preventDefault();\n        return;\n    }\n    for (const ta of document.querySelectorAll(\".pa-gw textarea\")) {\n        const tr = ta.closest(\".pa-dl\"), note = Note.at(tr);\n        if (!text_eq(ta.value, note.text) && !hasClass(tr, \"pa-save-failed\")) {\n            evt.preventDefault();\n            return;\n        }\n    }\n}\n\nfunction pa_runmany(chain) {\n    const f = document.getElementById(\"pa-runmany-form\"),\n        doneinfo = [];\n    let timeout;\n    if (f && !f.hasAttribute(\"data-pa-runmany-unload\")) {\n        $(window).on(\"beforeunload\", function () {\n            const progress = document.getElementById(\"pa-runmany-progress\");\n            if (progress && progress.max < progress.value) {\n                return \"Several server requests are outstanding.\";\n            }\n        });\n        f.setAttribute(\"data-pa-runmany-unload\", \"\");\n        const runner = document.getElementById(\"run-\" + f.elements.run.value);\n        addClass(runner, \"has-hotlist\");\n        runner.addEventListener(\"pa-hotlist\", make_hotlist);\n    }\n    function make_hotlist(event) {\n        const j = [];\n        for (const s of doneinfo) {\n            let t = `~${s.u}/pset/${s.pset}`;\n            if (s.commit) {\n                t += `/${s.commit}`;\n            }\n            j.push(t);\n        }\n        const u = f.elements.u.value;\n        if (u) {\n            let t = `~${u}/pset/${f.elements.pset.value}`;\n            if (f.elements.commit.value) {\n                t += `/${f.elements.commit.value}`;\n            }\n            j.push(t);\n        }\n        event.detail.hotlist = {items: j};\n    }\n    function mark_job_complete(category, timestamp) {\n        doneinfo.push({\n            u: f.elements.u.value,\n            pset: f.elements.pset.value,\n            commit: f.elements.commit.value,\n            run: category,\n            timestamp: timestamp\n        });\n        f.elements.jobs.value = JSON.stringify(doneinfo);\n        f.elements.u.value = \"\";\n        if (doneinfo.length === 1) { // just added first output\n            const button = document.createElement(\"button\");\n            button.append(\"Download\");\n            button.className = \"ui js-runmany-download\";\n            statusui().lastChild.append(button);\n        }\n    }\n    function check() {\n        const button = f.elements.run,\n            category = button.getAttribute(\"data-pa-run-category\") || button.value,\n            therun = document.getElementById(\"pa-run-\" + category);\n        if (therun && hasClass(therun, \"pa-run-active\")) {\n            timeout = timeout || setTimeout(check, 2000);\n            return;\n        }\n        if (f.elements.jobs && category && therun && therun.hasAttribute(\"data-pa-timestamp\")) {\n            mark_job_complete(category, +therun.getAttribute(\"data-pa-timestamp\"));\n            therun.removeAttribute(\"data-pa-timestamp\");\n        }\n        $.ajax(hoturl(\"=api/runchainhead\", {chain: chain}), {\n            type: \"POST\", cache: false, dataType: \"json\", timeout: 30000,\n            success: success\n        });\n    }\n    function statusui() {\n        let e = document.getElementById(\"pa-runmany-statusui\");\n        if (!e) {\n            e = document.createElement(\"div\");\n            e.id = \"pa-runmany-statusui\";\n            e.className = \"d-flex justify-content-between\";\n            const progress = document.createElement(\"div\"),\n                download = document.createElement(\"div\");\n            progress.className = \"flex-grow-1\";\n            e.append(progress, download);\n            $(\"#run-\" + f.elements.run.value).after(e);\n        }\n        return e;\n    }\n    function progress(njobs) {\n        let progress = document.getElementById(\"pa-runmany-progress\");\n        if (!progress) {\n            progress = document.createElement(\"progress\");\n            progress.id = \"pa-runmany-progress\";\n            progress.className = \"ml-3 mr-3\";\n            statusui().firstChild.append(\"Progress: \", progress);\n        }\n        progress.max = Math.max(progress.max, njobs + 1);\n        progress.value = progress.max - njobs;\n        progress.textContent = sprintf(\"%d%%\", progress.value / progress.max);\n        if (njobs === 0) {\n            progress.after(\"Done!\");\n        }\n    }\n    function success(data) {\n        timeout && clearTimeout(timeout);\n        timeout = null;\n        if (data && data.ok && data.queueid) {\n            f.elements.u.value = data.u;\n            f.elements.pset.value = data.pset;\n            f.elements.commit.value = data.hash || \"\";\n            let url = `${siteinfo.site_relative}~${encodeURIComponent(data.u)}/pset/${data.pset}`;\n            if (data.hash) {\n                url += `/${data.hash}`;\n            }\n            run(f.elements.run, {noclear: true, queueid: data.queueid, timestamp: data.timestamp, headline: `\\x1b]8;;${url}\\x07${data.u}\\x1b]8;;\\x07`, done_function: check});\n        }\n        if (data && data.njobs != null) {\n            progress(data.njobs);\n        }\n        if (!data || data.njobs !== 0) {\n            timeout = setTimeout(check, 4000);\n        }\n    }\n    check();\n}\n\nhandle_ui.on(\"js-runmany-download\", function () {\n    const f = document.getElementById(\"pa-runmany-form\");\n    if (f.elements.jobs && f.elements.jobs.value) {\n        const download = document.createElement(\"input\");\n        download.type = \"hidden\";\n        download.name = \"download\";\n        download.value = \"1\";\n        f.elements.jobs.disabled = false;\n        f.append(download);\n        f.submit();\n        f.elements.jobs.disabled = true;\n        f.removeChild(download);\n    }\n});\n\n$(function () {\ndocument.body.setAttribute(\"data-time-skew\", Math.floor(new Date().getTime() / 1000) - +document.body.getAttribute(\"data-now\"));\n});\n\n$(\".pa-download-timed\").each(function () {\n    var that = this, timer = setInterval(show, 15000);\n    function show() {\n        const downloadat = +that.getAttribute(\"data-pa-download-at\"),\n            commitat = +that.getAttribute(\"data-pa-commit-at\"),\n            expiry = +that.getAttribute(\"data-pa-download-expiry\"),\n            now = new Date().getTime() / 1000 + +document.body.getAttribute(\"data-time-skew\");\n        let t;\n        if (now > expiry) {\n            t = strftime(\"%Y/%m/%d %H:%M\", downloadat);\n        } else {\n            t = Math.round((now - downloadat) / 60) + \" min\";\n        }\n        if (commitat > downloadat) {\n            t += \" · \" + Math.round((commitat - downloadat) / 60) + \" min before commit\";\n        }\n        $(that).find(\".pa-download-timer\").text(t);\n        if (now > expiry) {\n            clearInterval(timer);\n        }\n    }\n    show();\n});\n\nhandle_ui.on(\"submit.pa-setrepo\", function (evt) {\n    let f = this;\n    this.classList.remove(\"has-error\", \"has-warning\");\n    if (hasClass(this.firstChild, \"feedback-list\")) {\n        this.removeChild(this.firstChild);\n    }\n    this.querySelector(\"button[type=submit]\").disabled = true;\n    $.ajax(hoturl(\"=api/repo\", {\n        pset: this.getAttribute(\"data-pa-pset\"),\n        u: siteinfo.uservalue\n    }), {\n        type: \"POST\", cache: false, data: $(this).serialize(),\n        success: function (data) {\n            f.querySelector(\"button[type=submit]\").disabled = false;\n            if (data.message_list) {\n                f.insertBefore(render_feedback_list(data.message_list), f.firstChild);\n            } else {\n                location.reload();\n            }\n        }\n    })\n    evt.preventDefault();\n});\n\nhandle_ui.on(\"submit.pa-setbranch\", function (evt) {\n    let f = this;\n    this.classList.remove(\"has-error\", \"has-warning\");\n    if (hasClass(this.firstChild, \"feedback-list\")) {\n        this.removeChild(this.firstChild);\n    }\n    this.querySelector(\"button[type=submit]\").disabled = true;\n    $.ajax(hoturl(\"=api/branch\", {\n        pset: this.getAttribute(\"data-pa-pset\"),\n        u: siteinfo.uservalue\n    }), {\n        type: \"POST\", cache: false, data: $(this).serialize(),\n        success: function (data) {\n            f.querySelector(\"button[type=submit]\").disabled = false;\n            if (data.message_list) {\n                f.insertBefore(render_feedback_list(data.message_list), f.firstChild);\n            } else {\n                location.reload();\n            }\n        }\n    })\n    evt.preventDefault();\n});\n\nfunction repo_branches(repoid) {\n    let bl = document.getElementById(\"branchlist-\" + repoid);\n    if (bl) {\n        return Promise.resolve(bl);\n    }\n    bl = document.createElement(\"datalist\");\n    bl.id = \"branchlist-\" + repoid;\n    document.body.appendChild(bl);\n    return new Promise(function (resolve, reject) {\n        $.ajax(hoturl(\"api/branches\", {repoid: repoid}), {\n            \"type\": \"GET\", cache: false, success: function (data) {\n                if (data.ok) {\n                    for (const br of data.branches) {\n                        const e = document.createElement(\"option\");\n                        e.value = br;\n                        bl.appendChild(e);\n                    }\n                    resolve(bl);\n                } else {\n                    reject(data);\n                }\n            }\n        });\n    });\n}\n\nhandle_ui.on(\"focusin.pa-branch-datalist\", function () {\n    removeClass(this, \"ui-focusin\");\n    if (!this.hasAttribute(\"list\") && this.hasAttribute(\"data-pa-repoid\")) {\n        repo_branches(this.getAttribute(\"data-pa-repoid\")).then((bl) => { this.setAttribute(\"list\", bl.id); }).catch((e) => console.log(e));\n    }\n});\n\nfunction pa_checklatest(pset) {\n    var start = (new Date).getTime(), timeout;\n\n    function checkdata(d) {\n        if (d && d.commits) {\n            $(\".pa-commitcontainer\").each(function () {\n                var pset = this.getAttribute(\"data-pa-pset\"),\n                    latesthash = this.getAttribute(\"data-pa-checkhash\");\n                for (var c of d.commits) {\n                    if (c.pset == pset\n                        && c.hash\n                        && c.hash !== latesthash\n                        && c.snaphash !== latesthash) {\n                        $(this).find(\".pa-pv\").append(\"<div class=\\\"pa-inf-error\\\"><span class=\\\"pa-inf-alert\\\">Newer commits are available.</span> <a href=\\\"\" + hoturl(\"pset\", {u: siteinfo.uservalue, pset: pset, commit: c.hash}) + \"\\\">Load them</a></div>\");\n                        clearTimeout(timeout);\n                        break;\n                    }\n                }\n            });\n        }\n    }\n\n    function docheck() {\n        var now = (new Date).getTime(),\n            anyhash = $(\".pa-commitcontainer[data-pa-checkhash]\").length > 0;\n        if (now - start <= 60000)\n            timeout = setTimeout(docheck, anyhash ? 10000 : 2000);\n        else if (now - start <= 600000)\n            timeout = setTimeout(docheck, anyhash ? 20000 : 10000);\n        else if (now - start <= 3600000)\n            timeout = setTimeout(docheck, (now - start) * 1.25);\n        else\n            timeout = null;\n        $.ajax(hoturl(\"=api/latestcommit\", {u: siteinfo.uservalue, pset: pset}), {\n                type: \"GET\", cache: false, dataType: \"json\", success: checkdata\n            });\n    }\n\n    setTimeout(docheck, 2000);\n}\n\nfunction pa_pset_actions() {\n    var $f = $(this);\n    function update() {\n        var st = $f.find(\"select[name='state']\").val();\n        $f.find(\".pa-if-enabled\").toggleClass(\"hidden\", st === \"disabled\");\n        $f.find(\".pa-if-visible\").toggleClass(\"hidden\", st === \"disabled\" || st === \"invisible\");\n    }\n    update();\n    $f.find(\"select[name='state']\").on(\"change\", update);\n    $f.find(\"input, select\").on(\"change\", function () {\n        $f.find(\"[type='submit']\").addClass(\"alert\");\n    });\n    $f.removeClass(\"need-pa-pset-actions\");\n}\n\nhandle_ui.on(\"pa-anonymized-link\", function (event) {\n    var link = this.getAttribute(\"data-pa-link\");\n    if (event && event.metaKey) {\n        window.open(link);\n    } else {\n        window.location = link;\n    }\n});\n\nhandle_ui.on(\"js-multiresolveflag\", function () {\n    const form = this.closest(\"form\"),\n        ptconf = form.pa__ptconf, flags = [];\n    $(form).find(\".papsel:checked\").each(function () {\n        const s = ptconf.smap[this.closest(\"tr\").getAttribute(\"data-pa-spos\")];\n        flags.push({pset: s.pset, uid: s.uid, hash: s.commit, flagid: s.flagid});\n    });\n    if (flags.length !== 0) {\n        $.ajax(hoturl(\"=api/multiresolveflag\"), {\n                type: \"POST\", cache: false, data: {flags: JSON.stringify(flags)}\n            });\n    } else {\n        window.alert(\"No flags selected.\");\n    }\n});\n\n\nwindow.$pa = {\n    beforeunload: pa_beforeunload,\n    checklatest: pa_checklatest,\n    decorate_diff_page: Filediff.decorate_page,\n    gradeentry_closest: GradeEntry.closest,\n    fold: fold,\n    grgraph: grgraph,\n    hoturl: hoturl,\n    note_near: Note.near,\n    on: handle_ui.on,\n    onload: hotcrp_load,\n    loadgrades: pa_loadgrades,\n    load_runsettings: run_settings_load,\n    pset_actions: pa_pset_actions,\n    pset_table: pa_pset_table,\n    render_text_page: render_text.on_page,\n    runmany: pa_runmany,\n    gradesheet_store: GradeSheet.store,\n    text_eq: text_eq,\n    string_utf8_index: string_utf8_index,\n    SearchParser: SearchParser,\n    SearchExpr: SearchExpr\n};\n"],"names":["autogrowers","shadows","get_shadow","elt","width","css","window","getComputedStyle","t","concat","fontSize","fontFamily","fontWeight","fontStyle","lineHeight","tagName","pl","parseFloat","paddingLeft","pr","paddingRight","bl","borderLeftWidth","br","borderRightWidth","minWidth","style","maxWidth","classList","contains","s","signature","document","createElement","refcount","setAttribute","body","appendChild","resizer","ag","remover","self","shadow","$","removeData","Element","remove","delete","fn","autogrow","this","each","minHeight","$self","f","data","event","clientWidth","clientHeight","innerText","val","value","type","keyCode","wh","Math","max","height","min","offsetWidth","outerWidth","make_input_autogrower","on","Map","resize","set","unautogrow","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","wstorage","localStorage","JSON","is_session","key","sessionStorage","getItem","removeItem","setItem","stringify","sprintf","fmt","wordno","word","arg","argno","conv","pad","words","split","length","charAt","arguments","match","toString","Number","toPrecision","replace","p1","p2","toFixed","toExponential","floor","toUpperCase","parseInt","num","str","n","substring","unparse_q","d","alt","is24","getSeconds","strftime","getMinutes","json","x","parse","site","siteinfo","base","site_json","unparsers","a","getDay","A","getDate","e","u","w","b","getMonth","B","h","m","y","getFullYear","Y","H","getHours","k","I","l","M","X","p","P","q","r","R","S","T","D","F","getTime","Date","sec2text","round","abs","parseJSON","prototype","closest","replaceChildren","lastChild","removeChild","i","append","String","startsWith","search","pos","endsWith","this_len","trimStart","Object","hasOwn","defineProperty","hasOwnProperty","configurable","writable","ImmediatePromise","constructor","then","executor","v","Promise","reject","text_eq","string_utf8_index","index","re","len","lastIndex","exec","hasClass","addClass","removeClass","toggleClass","test","navigator","userAgent","add","toggle","trim","className","callbacks","collect_callbacks","cbs","c","etype","j","splice","call_callbacks","element","isImmediatePropagationStopped","call","handle_ui","target","preventDefault","callback","priority","dot","indexOf","push","trigger","Event","in_tab","fold61","sel","arrowholder","direction","find","html","input_is_checkboxlike","input_default_value","hasAttribute","getAttribute","checked","defaultChecked","defaultValue","input_set_default_value","removeAttribute","input_differs","expected","metaKey","setTimeout","setSelectionRange","HtmlCollector","clear","open","close","pop","pop_n","push_pop","text","pop_push","pop_collapse","render","$e","tag","attr","key_map","charCode_map","keyCode_map","nonprintable_map","event_key","evt","charCode","fromCharCode","event_modkey","shiftKey","ctrlKey","altKey","encodeURIComponentPlus","encodeURIComponent","hoturl_clean_before","page_component","prefix","first","pt","hoturl_clean","last","hoturl_psetinfo","page","args","sheet","uservalue","pa__gradesheet","enames","entries","join","hoturl","options","xv","anchor","site_relative","suffix","postvalue","substr","defaults","serialize_object","hoturl_get_go","location","log_jserror","errormsg","error","noconsole","Error","fileName","url","lineNumber","lineno","columnNumber","colno","stack","ajax","global","method","cache","console","printable","is_modifier","is_default_a","button","SHIFT","CTRL","ALT","META","$f","rangeclick_state","jsRangeClick","kind","name","__clicking__","cbgs","tkind","thispos","lastpos","lastelt","focus","scrollIntoView","group","single_group","state","changed","indeterminate","CustomEvent","bubbles","cancelable","detail","rangeType","rangeGroup","newState","dispatchEvent","old_onerror","onerror","nerrors_logged","jqxhr_error_ftext","jqxhr","status","check_message_list","message_list","isArray","message","warning","apply","err","nodeName","id","parentElement","reverse","locator","log","ajaxError","settings","httperror","readyState","responseText","msg","URL","baseURI","href","user","email","tracked_out","tracked_after","after_outstanding","ajaxPrefilter","success","sessioninfo","cid","action","elements","post","sessionreport","check_sessioninfo","Array","rjson","getResponseHeader","ok","timeout","dataType","trackOutstanding","ajaxComplete","shift","cookie_set_at","cond_out","cond_wait","cond_retry","api_conditioner","resolve","assign","done","api_conditioner_next","list_digest_update","info","digests","found","now","digest","list_digest_resolve","xinfo","set_cookie","sitehref","list_digest_create","want1","want2","pset","idx","items","cur","prev","next","set_prevnext","cookie","cookie_params","absolute_base","handle_list","hl","is_listable","hotlist","list_default_click","hash","unshift","retry","ee_re","ee_rep","escape_entities","regexp_quote","charclass","html_id_encode","charCodeAt","html_id_decode","decodeURIComponent","capdir","lcdir","szdir","cssborder","dir","cssbc","roundpixel","dpr","Bubble","content","bubopt","color","nearpos","dirspec","bubdiv","bubtail0","bubcontent","bubtail1","bubch","childNodes","sizes","divbw","change_tail_direction","bw","trw","trh","borderWidth","trdelta","sqrt","borderLeftColor","borderRightColor","borderTopColor","borderBottomColor","yc","constrainmid","wpos","ds","ds2","z0","z1","z","constrain","za","bpos","noconstrain","bdim","bpos_wconstraint","xw","left","right","make_bpos","$b","bg","geometry","wconstraint","top","bottom","remake_bpos","parse_dirspec","res","csscornerradius","corner","divbr","constrainradius","x0","x1","show","model","div","tail","make_model","$tail","children","calculate_sizes","noflip","dsx","xa","ya","wedge","visibility","bubble","near","epos","reference","jquery","g","offset","extend","at","newcolor","innerHTML","appendTo","createTextNode","text_to_html","content_node","firstChild","hover","enter","leave","removeOn","jq","outerHTML","devicePixelRatio","builders","show_tooltip","disable_tooltip","builder","delay","prepare_info","tt","bub","to","delayto","erase","clearTimeout","global_tooltip","show_bub","nc","exit","_element","new_content","new_text","noDelayClass","tx","ttenter","ttleave","tooltip","make_flagger","what","psetinfo","grade","gradecommit","gradelock","apply_flagger","add_builder","node","range","createRange","selectNode","getSelection","removeAllRanges","addRange","execCommand","repositories","insertAfter","nextSibling","parentNode","$form","serializeWith","grader_email","submit","form","flagreason","flagid","reason","replaceWith","placeholder","class","stopImmediatePropagation","click","decorators","Filediff","nodeType","Node","ELEMENT_NODE","ed","referenced","er","fd","by_hash","by_file","getElementById","by_href","add_decorator","load","wdiff","file","base_commit","commit","content_html","result","decorate","$pa","render_text_page","load_if","df","decorate_page","h3","previousSibling","h3fd","isarrow","toggle_show_left","sl","lineid_anchor","lineid","lines","Linediff","all","line","isb","start","ln","base_contains","expansion_contains","expand","_psetinfo","repourl","scroll_position","getBoundingClientRect","scrollY","preve","define_method","enumerable","el","filediff","_filediff","note_lineid","lm","dash","linea","linea_within","Infinity","lineb","bound","uf","is_visible","offsetParent","visible_predecessor","visible_source","is_source","is_base","is_expandable","em","delta","a0","b0","fromline","linecount","highlight","is_annotation","is_note","upper_bound","curlineno","curlm","BACKWARD","ANYFILE","flags","lo","hi","selector","matches","goto_hash","scrollTo","innerHeight","catch","skip_space","ch","skip_name","pos0","lch","parse_tag","tag0","toLowerCase","name0","name1","attrname","nextquote","nextnl","val0","minihtml_inline","silent","src","posMax","tag1","token","attrs","title","md","inline","env","lt","nl","markdownit_minihtml","ruler","after","mdcontext","hljs_line","lang","hlstate","hljs","ns","render_map","map","add_landmark","tokens","level","attrSet","renderToken","add_landmark_1","fix_landmark_html","sp","gt","modify_landmark","fix_list_item","dc","nd","parse_ftext","$es","collapse","querySelectorAll","originalEvent","currentTarget","hidelm","daclass","dbclass","drclass","this_lineno","textContent","lr","dx","markdownit","linkify","use","markdownit_katex","renderer","rules","fence","code_block","utils","unescapeAll","getLanguage","xtoken","attrIndex","slice","langPrefix","xattrs","renderAttrs","xl","ln0","escapeHtml","render_landmark_fence","image","fix","pi","m2","srci","modify_landmark_image","list_item_open","make_markdownit","lp","la","lb","l1","l2","klass","ee","insertBefore","langclass","hlstatei","hlstated","ce","ishl","et","markdown","shown","unmarkdown","renderers","add_format","format","link_urls","md2","try_highlight","langAttr","hlstr","classIndex","lineIndex","pfx","minlen","sfx","padStart","linestart","render_with","context","want_inline","display","render_inline","render_onto","ft","render_this","on_page","attributes","render_text","ftext","unparse","render_xmsg","render_feedback_list","ml","ul","append_feedback_to","mi","sklass","li","span","Note","iscomment","empty","source","editable_text","myftext","users","version","force_element","insertion","box","cancel_edit","transition","$text","blur","$td","$content","slideUp","queue","fix_links_at","contdiv","authorids","authors","pc","nick","nicklen","authordiv","markdiv","notediv","hide","slideDown","save_ftext","editing","tr","grb","oldversion","linenotes","count","gradeentry_closest","save_landmark_grade","resolve_grade_range","save_text","isNaN","set_link","next_tr","$a","prependTo","trs","notepos","prevpos","nextpos","color_map","GradeClass","basic_text","basic_mount_edit","opts","max_text","DocumentFragment","long_page","disabled","basic_mount_show","es","basic_unmount","basic_update_edit","ve","querySelector","simple_text","mixed","basic_configure_column","col","ge","gabbr","abbr","justify","gc","sort_forward","sort","gkey","ptconf","total_key","readonly","table_color","make_compare","basic_make_compare","gidx","erev","grades","_sort_user","localeCompare","basic_tcell_width","type_tabular","configure_column","tcell_width","tcell","mount_show","mount_edit","update_edit","unmount","numeric","ta","update_show","bwd","allsb","sbpos","sb","sbtabs","sidebar_tab_traverse","late_hours_entry","id_counter","gradesheet_props","pa_resetgrade","removeEventListener","gi","GradeSheet","gr","queueMicrotask","update_at","title_span","GradeEntry","normal","_abbr","_all","student_visible","visible","answer","scores_visible","title_node","title_html","title_text","textContext","compute_abbr","order","value_order","pabbr","grade_titles","abbrx","rest","mode","answers_editable","scores_editable","pge","le","pde","hidden","htmlFor","description","de","mount_at","edit","vt","has_max","gd","autograde","txt","addEventListener","fresh","reset","landmark","update_landmark","sidebar","tabIndex","required","clg","gl","pgbr","directory","filename","unmount_at","landmark_lines","landmark_range","landmark_grade","sum","note","gch","$nd","ceil","gh","gnv","gv","sumstr","gval","change","value_order_in","vpos","value_in","autovalue_in","autogrades","has_later_value_in","grades_latest","late_hours","LateHoursEntry","super","auto_late_hours","parent","root","make_child","set_entry","old_value_order","fixed_value_order","maxtotal","merge_grades","scores_visible_pinned","myg","ing","inorder","xentry","value_entries","remount_at","pdx","replaceChild","label","xopts","gradesheet","grade_total","noextra","total","in_total","is_extra","grade_maxtotal","file_anchor","has_sections","has","section_has","gei","section_wants_sidebar","store","loadgrades","curline","down_event","scrolled_x","scrolled_y","scrolled_at","set_scrolled_at","screenX","timeStamp","screenY","arrowcapture","modkey","uncapture","lnx","make_linenote","wf","marginTop","offsetHeight","capture","keydown","off","unedit","ctr","cancel","textarea_keydown","nearby","dy","stopPropagation","$ta","$tr","prop","pa_save_my_note","render_form","my_note_feedback","uid","like","dislike","note_suggestions","notelist","oldindex","sugui","mf","gf","bbox","b1","b2","display_note_suggestions","linenotemark","mark","ld","dl","locate","clientX","clientY","base_handout","af","bf","localeString","patterns","regex","RegExp","ne","ansistyle_map","rv","du","fg","ansistyle_keymap","ansistyle_parse","dst","cmp","isEmptyObject","ansistyle_combine","a1","a2","ansistyle_unparse","ansistyle_hexcolor","render_terminal","container","string","return_html","lastfull","styles","fragment","addlinepart","link","jQuery","backgroundColor","ansistyle_render","addfragment","createDocumentFragment","render_line","mm","isnew","displaylen","lineend","curstyle","parts","partno","glen","clearafter","lsplit","rpos","clean_cr","filematch","add_file_link","cursor","laststyles","divlen","toggle_grade_history","gelt","run","category","therun","therunout","thepre","thexterm","checkt","kill_checkt","queueid","eventsource","sendtimeout","unfold","timestamp","noclear","Terminal","cols","rows","fontsize","trunc","terminal_char_width","attachCustomKeyEventHandler","write","send","mod","clipboard","readText","scroll_therun","requestAnimationFrame","scrollHeight","scrollTop","ibuffer","preamble_offset","backoff","times","hide_cursor","complete","done_function","send_after","append_data","matchIndex","utf8_length","tsmsg","set_time_data","at_end","tpos","tstart","tlast","running","partial_time","partial_outstanding","ebutton","erange","etime","espeed","factor","time_factor","runspeed","set_time","load_more","end_offset","xdata","size","tpos_offset","time","npos","tpos_lower_bound","nlnl","add_data","boffset","eoffset","maxdata","lpos","moffset","time_data","parse_times","prepend","step","altscr","xtpos","offset_lower_bound","send_out","send_args","succeed_eventsource","msge","succeed","error_eventsource","ms","send_from_timeout","onqueue","nahead","headage","btn","stop","stop_button","loggedout","error_text","errorcode","conflict_timestamp","EventSource","onmessage","trim_data_to_offset","partial","timed","succeed_add_times","check","headline","$j","$x","eval_function_path","getTotalLength","getPointAtLength","runsettings","save","PATHSEG_ARGMAP","Z","L","V","C","Q","push_history_state","normalized_path_cache","normalized_path_cache_size","normalized_path_complaint","normalize","SVGPathElement","preva","cx","cy","cx0","cy0","copen","cb","sincb","coscb","parser","next_cmd","make_svg_path_parser","cos","sin","closest_point","pathNode","point","inbest","dist","oob","bounds","npsl","item","pathNodeMayBeNearer","distance","best","bestLength","pathLength","pathSegments","precision","bestDistance2","pLength","d2","xx","xdb","pdist","xd","yd","xmin","xmax","fill","path_x_distance2_buckets","IntervalSeq","is","lower","overlaps","mksvg","createElementNS","GradeGraph","plot_type","$parent","mainplot","dd","series","ddmin","entry","cutoff","svg","gg","gx","gy","xt","yl","yt","tw","th","maxp","hoveranno","hoveron","digits","domr","getBBox","xdw","xdh","xlw","log10","mt","mr","mb","minyaxis","yfmt","labelcap","ymax","ylu","yltext","removeText","gw","xfactor","xax","yax","unxax","ax","unyax","ay","pa_grade_types","tics","xtics","xfmt","hlcurve","hlcurve_series","hlcurve_priority","hlcurve_ucdf","numeric_xaxis","ndigit_max","labelw","unitbase","pow","nunits","unit","total_done","draw","xxv","xtics_xaxis","label_restrictions","tic_restrictions","notic","lw","label_space","xaxis","yaxis","_add_curve","path","prio","append_cdf","cdf","nr","append_pdf","kde","bins","nrdy","xs","ys","la2","epsilon","i2","i0","i1","i3","y1","x2","y2","binwidth","remove_if","predicate","cdfu","ispdf","nrgh","ui","yv","typed_annotation","star_annotation","rs","PI","star","annotate","user_x","ucdf","highlight_users","last_highlight","desired","uids","uidm","uidx","elnext","animVal","that","closer_mark","hlpaths","hlpt","hlp","distance2","handle","loc","ownerSVGElement","createSVGPoint","matrixTransform","getScreenCTM","inverse","rect","clientLeft","clientTop","paths","ha","bb","pa__ptconf","uidmap","render_tooltip_name","GradeSeries","mean","median","stddev","count_at","GradeKde","hfrac","nbins","maxg","ming","iH","epanechnikov","GradeStats","psetid","draw_grgraph","user_extension","plot_types","extension","plotarg","want_all","want_extension","want_noextra","$plot","grgr","kde_nbins","kde_hfactor","kdes","main","last_curve_series","stt","hash_parse","hash_modify","changes","newhash","hash_unparse","origin","pathname","want_grgraph_hash","update","where","old_attr","update_course","tries","ranges","colors","any","course_xcdf","ui0","hr","update_hash","hs","history","replaceState","pushState","rt","Checkbox_GradeClass","finish_mount_edit","want_checkbox","recheckbox","uncheckbox","chsp","fr","select","make_multicheckbox","repeat","chhidden","add_note_at","colon","none","opt","selectedIndex","descspan","desclink","descp","fileid","pos1","pos2","da","db","hr1","hr2","inner","timefmt","timeout_value","toge","tov","timeout_entry","remove_tmto","tm","makesticky","pa__tmto","pa__tmsticky","gsection","tms","timermark_interval","dt","deadline","tmch","start_at_text","tmelt","stelt","nextdt","alarmdelay","popup_skeleton","hc","$d","show_errors","dbody","errf","form_class","push_actions","actions","popup_close","HTMLFormElement","bgelt","anchorPos","wg","po","focus_at","popup_near","felt","hotcrp_ever_focused","grade_update","uid2tr","refreshflags","su","oldgrades","ngrades","refreshable","td","gdialog_gradelist_change","gdialog_section_click","$checkbox","$save_action","ptable_gdialog","checked_spos","table","hlgrade","$gdialog","gdialog_su","make_uid2tr","tBodies","gdialog_store_start","gdialog_store","byuid","url_gradeparts","grade_commit","commit_is_grade","us","rvu","gdialog_clearauto","noauto","te","gdialog_traverse","next_spos","gdialog_fill","spos","smap","render_gdialog_users","su1","tr1","_spos","gdialog_fill_user","sv","suv","gdialog_key","gdialog_gradelist_input","gdialog_mode_values","bsubmit","clearauto","gdialog_settings_submit","gs","gvisarg","gradertype","gradercid","gri","grn","random","clearrepo","adoptoldrepo","dropped","usc","progress","usci","more","gdialog_settings_gvis_click","gdialog_settings_dropped_click","gdialog_settings_grader_click","gdialog_mode","itype","gradertable","__order__","gitless","has_older_repo","is_admin","gdialog_fill_settings","gvis","ggr","ggra","gdropped","grcid","ngr","ngra","gdialog_mode_settings","student_timestamp","sts","strong","but","is_pclike","rbut","forEach","sus","users_in","CHECKED_USERS","alert","gdform","sus_uids","do_submit","diff","anonymous","otherdiff","files","landmark_range_file","landmark_range_first","landmark_range_last","do_diff","$gsi","do_gradesheet","report","writeText","do_report","do_key","mode_diff","dv","sep","diff_files","collate","input","do_mode","reports","mode_report","in_section","gcl","ccl","mode_gradesheet","ptable_diffdialog","SOME_USERS","slist","runner","ifneeded","skeys","param","runmany","ukey","selectcommits","commitq","____empty____","hoturl_post_go","rn","runners","gdialog","SearchOperator","precedence","subtype","UNARY","ALLOW_SUBTYPE","SUBTYPE","UNNAMED","NOT","AND","OR","XOR","unary","allow_subtype","make_subtype","REGEXP_TERMINATOR","SearchOperatorSet","static","define","op","lookup","xop","nop","alnum","safe_terminator","simple_operators","notop","OP_UNARY","spaceop","OP_UNNAMED","andop","xorop","orop","SPACE","simple_operator","SearchExpr","kword","kwpos1","child","make_simple","make_keyword","make_op_start","combine","opname","is_complete","is_incomplete_paren","complete_paren","flattened_children","indent","ctx","ts","nindent","evaluate_simple","REGEXP_STICKYSPACE","REGEXP_KEYWORD","SearchParser","last_pos","set_pos","shift_keyword","kw","shift_past","skip_whitespace","shift_balanced_parens","endchars","allow_empty","span_balanced_parens","starts_with","opset","pstack","plast","quote","startpos","pcleared","pslen","split_balanced_parens","parse_expression","max_ops","cure","parens","nops","nexte","render_name","last_first","grader_name","__nickname","render_year","yr","user_compare","grader_compare","ap","bp","stre","user_hover","PtableConf","pconf","gitless_grades","frozen","original_anonymous","has_nonanonymous","overridable_anonymous","flagged_commits","rev","no_sort","checkbox","need_total","requested_columns","pincol","colmap","input_timeout","set_gradesheet","in_total_indexes","answer_indexes","add_column","pin","pin_index","columns","pinned_columns","columns_in","column_index_in","anon_user","is_grade","make_student_ae","ae","make_pset_ae","render_username_td","tde","render_user_td","render_display_name","is2","render_checkbox_name","render_table_row","tre","user_row_checkbox","overlay","cbidx","ALL_USERS","user_at","chsus","ptable_head_click","tgt","deblind","sf","ptable_head_click_change_sort","ptable_body_click","ptable_track_header","ctr2","IntersectionObserver","ctr0","tctable","tHead","cloneNode","thead_bounds","ctr0_bounds","ctr2_bounds","ctrh","marginLeft","scrollLeft","ptable_body_scroller","passive","ptable_decorate_name_th","the","ptable_thead","tfixed","rem","current_width","scope","compare","documentElement","thead","queue_update_microtask_scheduled","queue_update_microtask_tds","update_microtask","gcoldef","rownumber","ariaLabel","cbe","flagcheckbox","classname","psets","username","name2","year","grader","latehours","notes","do_not_grade","has_notes","has_nongrader_notes","repo","repo_broken","repo_unconfirmed","repo_too_open","repo_handout_old","repo_partner_error","repo_sharing","conversation","conversation_pfx","sa","ptables_cellpos","tables","ptables_rerender_key","keys","ti","ptable_rangechange","ptable_boring_row","colSpan","ptable_permute","tb","rmap","ptable_permute_rmap","klasses","was_boringness","trn","boringness","any_visible","ss","partners","pa_render_pset_table","slist_input","$alltables","hdrtable","lpintable","lpinhdrtable","active_nameflag","make_hotlist","assign_slist","rerender_rownumber","render_user_compare","sort_data","nf","set_user_sorters","colr","av","be","checkbox_click","wanto","tr0","rowIndex","cb1","set_tables_width","lastc","rerender_sort_header","sortchange","osort","nsort","anon","override_anonymous","ngrades_expected","has_late_hours","emptydiff","need_ngrades","initialize","tbody","psu","overlay_div","table_hit","left_hit","observer","isIntersecting","otr","make_overlay","observe","make_overlay_observer","events","search_target","search_target_success","evaluate_search","se","ptable_search_check","trx","sexpr","maindiv","imageid","img","idiv","userae","nameae","pexpr","ptbodies","toArray","nextElementSibling","boring","ptable_recolor","change_state","reload","obj","_class","isFunction","escapeRE","defaultOptions","fuzzyLink","fuzzyEmail","fuzzyIP","defaultSchemas","validate","http","src_auth","src_host_port_strict","src_path","no_http","src_domain","src_domain_root","src_port","src_host_terminator","mailto","src_email_name","src_host_strict","tlds_default","compile","src_Any","src_Cc","src_Z","src_P","src_ZPCc","src_ZCc","src_pseudo_letter","src_ip4","src_xn","src_host","tpl_host_fuzzy","tpl_host_no_ip_fuzzy","tpl_host_fuzzy_strict","tpl_host_port_fuzzy_strict","tpl_host_port_no_ip_fuzzy_strict","tpl_host_fuzzy_test","tpl_email_fuzzy","tpl_link_fuzzy","tpl_link_no_ip_fuzzy","__opts__","tlds","__tlds__","untpl","tpl","src_tlds","onCompile","__tlds_replaced__","email_fuzzy","link_fuzzy","link_no_ip_fuzzy","host_fuzzy_test","aliases","schemaError","__compiled__","__schemas__","compiled","createValidator","isString","alias","filter","schema_test","schema_search","schema_at_start","pretest","__index__","__text_cache__","resetScanCache","Match","end","__last_index__","schema","__schema__","raw","createMatch","LinkifyIt","schemas","reduce","acc","definition","me","tld_pos","at_pos","testSchemaAt","matchAtStart","list","keepOld","arr","$$","outer","pageXOffset","pageYOffset","outerHeight","atTop","scrollX","marginBottom","serialize","set_local_time","servhr24","showdifference","servtime","servzone","hr24","getTimezoneOffset","hotcrp_onload","hotcrp_load","foldmap","foldsession_unique","fold","which","dofold","foldtype","selt","opentxt","closetxt","foldnum","foldnumid","recalc","wantopen","foldname","cl","vstr","values","gv_dirtypi","gv_save_queued","gv_save_after","gv_mark_changed","gv_add_spinner","sm","gv_save_some","og","fs","ov","nv","gv_resolve_change","answer_timeout","pa_resolve_grade","lbb","button_position_delta","button_reposition_delta","scrollBy","gradelist_section_button","gradelist_resolve_section","sectione","buttons","xge","parente","headere","desce","gradelist_finish_sidebar","sidebarch","pa_resolve_gradelist","geltmap","glelt","gradelist_elementmap","sectioned","new_sections","section_class","section","concealed","sdiv","gradelist_make_sections","chp","sib","psetinfo_sibling","psetinfo_sibling_button","sibling","xpi","gradekey","dg","tep","links","jobs","download","timer","setInterval","downloadat","commitat","expiry","clearInterval","repoid","branches","repo_branches","beforeunload","checklatest","checkdata","commits","latesthash","snaphash","docheck","anyhash","decorate_diff_page","grgraph","note_near","onload","total_type","pdiv","ptdiv","pvdiv","gvspan","gdspan","pa_render_total","drawgraph","$v","load_runsettings","$n","removeAttr","pset_actions","st","pset_table","chain","doneinfo","statusui","mark_job_complete","njobs","gradesheet_store"],"sourceRoot":""}